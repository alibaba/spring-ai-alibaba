(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[264],{1897:function(t){t.exports={container:"container--Ig6vhh6m",left:"left--GO17deKm",right:"right--Cg1UmMaL","full-height-divider":"full-height-divider--dcLayZaH","message-loading":"message-loading--WJMLtEFl"}},2605:function(t,e,n){"use strict";n.r(e);var i=n(1010),a=n(8975),o=n(8188),l=n(7582),s=n(9291),r=n(7294),c=n(9607),u=n(476),h=n(7647),p=n(3865),m=n(3981),d=n(4898),f=n(1897),g=n.n(f),_=n(4408),C=n(8391),y=(0,r.memo)(function(t){var e,n=t.chatClientData,f=(0,h.UO)(),y=(0,o._)((0,r.useState)({initialChatConfig:{model:"qwen-plus",temperature:.85,top_p:.8,seed:1,enable_search:!1,top_k:0,stop:[],incremental_output:!1,repetition_penalty:1.1,tools:[]},initialImgConfig:{model:"wanx-v1",responseFormat:"",n:1,size:"1024*1024",style:"<auto>",seed:0,ref_img:"",ref_strength:0,ref_mode:"",negative_prompt:""},initialTool:{}}),2),v=y[0],b=y[1],O=(0,o._)((0,r.useState)(),2),T=O[0],Z=O[1],w=(0,o._)((0,r.useState)(""),2),I=w[0],M=w[1],k=(0,o._)((0,r.useState)(""),2),E=k[0],J=k[1];return(0,r.useEffect)(function(){if(null!=n){var t=n.chatModel;0!==Object.keys(f).length&&f.client_name==t.name&&(null!=t&&null!=t.chatOptions&&delete t.chatOptions.proxyToolCalls,b(function(e){return{initialChatConfig:(0,a._)({},t.chatOptions),initialImgConfig:(0,a._)({},t.imageOptions),initialTool:{}}}),t.modelType==p.B.CHAT?Z(t.chatOptions):t.modelType==p.B.IMAGE&&Z(t.imageOptions))}},[n]),n?(0,s.BX)(c.Z,{justify:"space-between",style:{height:"100%"},children:[(0,s.tZ)(m.Z,{modelData:n.chatModel,modelType:n.chatModel.modelType,modelOptions:T,isMemoryEnabled:n.isMemoryEnabled,callScene:C.r.CLIENT,onRun:(e=(0,i._)(function(t){var e,i,a;return(0,l.Jh)(this,function(o){switch(o.label){case 0:return[4,_.Z.postChatClient({key:n.name,input:t.input,chatOptions:T,stream:t.stream,prompt:I,chatID:E})];case 1:return J((i=o.sent()).chatID),a=i?t.stream?null===(e=i.result.streamResponse)||void 0===e?void 0:e.join("\n"):i.result.response:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",[2,{result:i?a:"",telemetry:{traceId:i?i.telemetry.traceId:""}}]}})}),function(t){return e.apply(this,arguments)}),onClear:function(){J("")}}),(0,s.tZ)(d.Z,{tabs:["config","prompt","tool"],modelType:n.chatModel.modelType,initialValues:v,onChangeConfig:function(t){Z(t)},onChangePrompt:function(t){M(t)}})]}):(0,s.tZ)("div",{className:g().container,children:(0,s.tZ)(u.Z,{})})});e.default=y},4408:function(t,e,n){"use strict";var i=n(1010),a=n(7582),o=n(7647);e.Z={getChatClients(){return(0,i._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,o.WY)({url:"/studio/api/chat-clients",method:"get"})];case 1:return[2,t.sent()]}})})()},getChatClientByName(t){return(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,o.WY)({url:"/studio/api/chat-clients/".concat(t),method:"get"})];case 1:return[2,e.sent()]}})})()},postChatClient(t){return(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,o.WY)({url:"/studio/api/chat-clients",method:"post",data:t})];case 1:return[2,e.sent()]}})})()}}}}]);