(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[165],{295:function(e){e.exports={"message-wrapper":"message-wrapper--oLEkH9oV",message:"message--BlO_q7b6","message-icon":"message-icon--v_otTv7c","message-loading":"message-loading--AIV3qPxv"}},7824:function(e){e.exports={container:"container--BiiyR6gP"}},3981:function(e,t,n){"use strict";var r=n(1010),a=n(8975),i=n(4932),l=n(8188),o=n(1912),c=n(7582),u=n(9291),s=n(5893),d=n(7294),p=n(4319),h=n(5598),m=n(8884),Z=n(9607),g=n(1034),f=n(8368),v=n(9166),_=n(7700),y=n(3109),b=n(3865),I=n(6755),w=n(7011),C=n(4818),k=n(6391),T=n(295),S=n.n(T),B=n(1366),x=n(4070),N=n(8391),M=(0,d.memo)(function(e){var t,n,T=e.modelType,M=e.isMemoryEnabled,X=e.callScene,A=e.onRun,E=e.onClear,F=(0,l._)((0,d.useState)(""),2),P=F[0],J=F[1],V=(0,l._)((0,d.useState)(!1),2),D=V[0],O=V[1],R=(0,l._)((0,d.useState)(!1),2),L=R[0],W=R[1],H=(0,d.useRef)(null),Y=(0,l._)((0,d.useState)(!1),2),j=Y[0],q=Y[1],G=(0,l._)((0,d.useState)({}),2),U=G[0],z=G[1],K=(0,l._)((0,d.useState)([]),2),$=K[0],Q=K[1],ee=(t=(0,r._)(function(){var e,t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),W(!0),J(""),Q((0,o._)($).concat([{type:"user",content:P},{type:"model",content:en()}])),[4,A({input:P,stream:D})];case 1:return t=(e=n.sent())?e.result:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",Q((0,o._)($).concat([{type:"user",content:P},{type:T===b.B.CHAT?"chatModel":"imageModel",content:t,traceId:e?e.telemetry.traceId:""}])),[3,4];case 2:return console.error("Failed to fetch chat models: ",n.sent()),[3,4];case 3:return W(!1),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)}),et=p.Z.TextArea,en=function(){return(0,u.tZ)(h.Z,{tip:"Loading",children:(0,u.tZ)("div",{className:S()["message-loading"]})})},er=function(){H.current&&H.current.scrollIntoView({behavior:"smooth"})};(0,d.useEffect)(function(){er()},[$]);var ea=(n=(0,r._)(function(e){var t,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,I.Z.getTraceDetailClientById(e)];case 1:return t=r.sent(),null!==(n=(0,x.l)(t))?(z(n),q(!0)):m.ZP.error("TraceInfo is null"),[3,3];case 2:return console.error("Failed to fetch trace detail: ",r.sent()),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,u.BX)(s.Fragment,{children:[(0,u.BX)(Z.Z,{vertical:!0,style:{marginRight:20,flexGrow:1,height:"100%"},children:[(0,u.tZ)("div",{className:S()["message-wrapper"],children:$.map(function(e,t){return(0,u.BX)(s.Fragment,{children:[(0,u.BX)(Z.Z,{className:S().message,style:{alignSelf:"user"===e.type?"end":"auto"},ref:t===$.length-1?H:void 0,children:["user"!==e.type&&(0,u.tZ)(w.Z,{className:S()["message-icon"]}),(0,u.BX)(g.Z,{style:{marginLeft:"user"===e.type?0:10,marginRight:"user"===e.type?10:0},children:["imageModel"!==e.type&&(0,u.tZ)("div",{children:e.content}),"imageModel"===e.type&&(0,u.BX)(Z.Z,{align:"flex-end",children:[(0,u.tZ)(f.Z,{width:200,src:e.content}),(0,u.tZ)(v.ZP,{type:"primary",style:{marginLeft:10},children:"\u4E0B\u8F7D"})]})]}),"user"!==e.type&&e.traceId&&(0,u.tZ)(C.Z,{style:{fontSize:20,marginLeft:10,alignSelf:"end"},onClick:function(){return ea(e.traceId)}}),"user"===e.type&&(0,u.tZ)(k.Z,{className:S()["message-icon"]})]},t),e.isClear&&(0,u.tZ)(_.Z,{children:"\u4E0A\u4E0B\u6587\u5DF2\u7ED3\u675F"})]})})}),(0,u.BX)(Z.Z,{vertical:!0,children:[(0,u.tZ)(et,{autoSize:{minRows:3},style:{marginBottom:20},value:P,onChange:function(e){J(e.target.value)}}),(0,u.BX)(Z.Z,{align:"center",justify:"space-between",children:[(0,u.tZ)(Z.Z,{children:(0,u.tZ)(y.Z,{checked:M,onChange:function(){},children:"\u5BF9\u8BDD\u8BB0\u5FC6"})}),(0,u.BX)(Z.Z,{style:{width:300},align:"center",justify:"space-around",children:[(0,u.tZ)(v.ZP,{onClick:function(){X&&X==N.r.CLIENT?Q(function(e){if(0===e.length)return e;var t=(0,o._)(e);return t[t.length-1]=(0,i._)((0,a._)({},t[t.length-1]),{isClear:!0}),t}):Q([]),E&&E()},children:"\u6E05\u7A7A"}),(0,u.tZ)(y.Z,{checked:D,onChange:function(e){O(e.target.checked)},children:"\u6D41\u5F0F\u54CD\u5E94"}),(0,u.tZ)(v.ZP,{onClick:ee,disabled:L,children:"\u8FD0\u884C"})]})]})]})]}),(0,u.tZ)(B.Z,{record:U,open:j,setOpen:q})]})});t.Z=M},8391:function(e,t,n){"use strict";var r,a;n.d(t,{r:function(){return r}}),(a=r||(r={})).CLIENT="client",a.MODEL="model"},4898:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(8188),a=n(9291),i=n(3562),l=n(1010),o=n(7582),c=n(5893),u=n(764),s=n(6885),d=n(3213),p=n(9607),h=n(5741),m=n(8898),Z=n(8658),g=n(4319),f=n(9166),v=n(3865),_=n(7294),y=n(5930),b=u.Z.Option;function I(e){var t=e.modelType,n=e.configFromAPI,i=e.onChangeConfig,I=(0,r._)(s.Z.useForm(),1)[0],w=(0,r._)((0,_.useState)([]),2),C=w[0],k=w[1],T=function(e,t){return(0,a.tZ)(d.Z,{title:t,placement:"topLeft",children:(0,a.tZ)(p.Z,{justify:"space-between",style:{width:300},children:(0,a.tZ)("span",{children:e})})})};return(0,_.useEffect)(function(){var e;(e=(0,l._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,y.Z.getModelNames(t)];case 1:return(e=n.sent()).length>0&&k(e.map(function(e){return{value:e,label:e}})),[2]}})}),function(){return e.apply(this,arguments)})(),I.setFieldsValue(n)},[n]),(0,a.BX)(c.Fragment,{children:[(0,a.BX)(s.Z,{layout:"vertical",form:I,initialValues:t==v.B.CHAT?{model:"qwen-plus",temperature:.85,top_p:.8,seed:1,enable_search:!1,top_k:0,stop:[],incremental_output:!1,repetition_penalty:1.1,tools:[]}:{model:"wanx-v1",responseFormat:"",n:1,size:"1024*1024",style:"<auto>",seed:0,ref_img:"",ref_strength:0,ref_mode:"",negative_prompt:""},onValuesChange:function(e,t){console.log(e,t),i(t)},children:[(0,a.tZ)(s.Z.Item,{label:"Model",name:"model",children:(0,a.tZ)(u.Z,{style:{width:200},options:C})}),t==v.B.CHAT?(0,a.BX)(c.Fragment,{children:[(0,a.tZ)(s.Z.Item,{label:T("Temperature","\u7528\u4E8E\u63A7\u5236\u968F\u673A\u6027\u548C\u591A\u6837\u6027\u7684\u7A0B\u5EA6\u3002\u5177\u4F53\u6765\u8BF4\uFF0Ctemperature\u503C\u63A7\u5236\u4E86\u751F\u6210\u6587\u672C\u65F6\u5BF9\u6BCF\u4E2A\u5019\u9009\u8BCD\u7684\u6982\u7387\u5206\u5E03\u8FDB\u884C\u5E73\u6ED1\u7684\u7A0B\u5EA6\u3002\u8F83\u9AD8\u7684temperature\u503C\u4F1A\u964D\u4F4E\u6982\u7387\u5206\u5E03\u7684\u5CF0\u503C\uFF0C\u4F7F\u5F97\u66F4\u591A\u7684\u4F4E\u6982\u7387\u8BCD\u88AB\u9009\u62E9\uFF0C\u751F\u6210\u7ED3\u679C\u66F4\u52A0\u591A\u6837\u5316\uFF1B\u800C\u8F83\u4F4E\u7684temperature\u503C\u5219\u4F1A\u589E\u5F3A\u6982\u7387\u5206\u5E03\u7684\u5CF0\u503C\uFF0C\u4F7F\u5F97\u9AD8\u6982\u7387\u8BCD\u66F4\u5BB9\u6613\u88AB\u9009\u62E9\uFF0C\u751F\u6210\u7ED3\u679C\u66F4\u52A0\u786E\u5B9A\u3002"),name:"temperature",children:(0,a.tZ)(h.Z,{max:2,min:0,step:.1})}),(0,a.tZ)(s.Z.Item,{label:T("seed","\u751F\u6210\u65F6\u4F7F\u7528\u7684\u968F\u673A\u6570\u79CD\u5B50\uFF0C\u7528\u6237\u63A7\u5236\u6A21\u578B\u751F\u6210\u5185\u5BB9\u7684\u968F\u673A\u6027\u3002seed\u652F\u6301\u65E0\u7B26\u53F764\u4F4D\u6574\u6570\u3002\u5728\u4F7F\u7528seed\u65F6\uFF0C\u6A21\u578B\u5C06\u5C3D\u53EF\u80FD\u751F\u6210\u76F8\u540C\u6216\u76F8\u4F3C\u7684\u7ED3\u679C\uFF0C\u4F46\u76EE\u524D\u4E0D\u4FDD\u8BC1\u6BCF\u6B21\u751F\u6210\u7684\u7ED3\u679C\u5B8C\u5168\u76F8\u540C\u3002"),name:"seed",children:(0,a.tZ)(m.Z,{min:0,max:Number.MAX_SAFE_INTEGER})}),(0,a.tZ)(s.Z.Item,{label:T("Top P","\u751F\u6210\u65F6\uFF0C\u6838\u91C7\u6837\u65B9\u6CD5\u7684\u6982\u7387\u9608\u503C\u3002\u4F8B\u5982\uFF0C\u53D6\u503C\u4E3A0.8\u65F6\uFF0C\u4EC5\u4FDD\u7559\u7D2F\u8BA1\u6982\u7387\u4E4B\u548C\u5927\u4E8E\u7B49\u4E8E0.8\u7684\u6982\u7387\u5206\u5E03\u4E2D\u7684token\uFF0C\u4F5C\u4E3A\u968F\u673A\u91C7\u6837\u7684\u5019\u9009\u96C6\u3002\u53D6\u503C\u8303\u56F4\u4E3A\uFF080,1.0)\uFF0C\u53D6\u503C\u8D8A\u5927\uFF0C\u751F\u6210\u7684\u968F\u673A\u6027\u8D8A\u9AD8\uFF1B\u53D6\u503C\u8D8A\u4F4E\uFF0C\u751F\u6210\u7684\u968F\u673A\u6027\u8D8A\u4F4E\u3002\u9ED8\u8BA4\u503C\u4E3A0.8\u3002"),name:"top_p",children:(0,a.tZ)(h.Z,{max:1,min:0,step:.1})}),(0,a.tZ)(s.Z.Item,{label:T("Top K","\u751F\u6210\u65F6\uFF0C\u91C7\u6837\u5019\u9009\u96C6\u7684\u5927\u5C0F\u3002\u4F8B\u5982\uFF0C\u53D6\u503C\u4E3A50\u65F6\uFF0C\u4EC5\u5C06\u5355\u6B21\u751F\u6210\u4E2D\u5F97\u5206\u6700\u9AD8\u768450\u4E2Atoken\u7EC4\u6210\u968F\u673A\u91C7\u6837\u7684\u5019\u9009\u96C6\u3002\u53D6\u503C\u8D8A\u5927\uFF0C\u751F\u6210\u7684\u968F\u673A\u6027\u8D8A\u9AD8\uFF1B\u53D6\u503C\u8D8A\u5C0F\uFF0C\u751F\u6210\u7684\u786E\u5B9A\u6027\u8D8A\u9AD8\u3002\u6CE8\u610F\uFF1A\u5982\u679Ctop_k\u53C2\u6570\u4E3A\u7A7A\u6216\u8005top_k\u7684\u503C\u5927\u4E8E100\uFF0C\u8868\u793A\u4E0D\u542F\u7528top_k\u7B56\u7565\uFF0C\u6B64\u65F6\u4EC5\u6709top_p\u7B56\u7565\u751F\u6548\uFF0C\u9ED8\u8BA4\u662F\u7A7A\u3002"),name:"top_k",children:(0,a.tZ)(h.Z,{})}),(0,a.tZ)(s.Z.Item,{label:T("enable_search","\u6A21\u578B\u5185\u7F6E\u4E86\u4E92\u8054\u7F51\u641C\u7D22\u670D\u52A1\uFF0C\u8BE5\u53C2\u6570\u63A7\u5236\u6A21\u578B\u5728\u751F\u6210\u6587\u672C\u65F6\u662F\u5426\u53C2\u8003\u4F7F\u7528\u4E92\u8054\u7F51\u641C\u7D22\u7ED3\u679C"),name:"enable_search",valuePropName:"checked",children:(0,a.tZ)(Z.Z,{})}),(0,a.tZ)(s.Z.Item,{label:T("repetition_penalty","\u7528\u4E8E\u63A7\u5236\u6A21\u578B\u751F\u6210\u65F6\u7684\u91CD\u590D\u5EA6\u3002\u63D0\u9AD8repetition_penalty\u65F6\u53EF\u4EE5\u964D\u4F4E\u6A21\u578B\u751F\u6210\u7684\u91CD\u590D\u5EA6\u30021.0\u8868\u793A\u4E0D\u505A\u60E9\u7F5A\u3002\u9ED8\u8BA4\u4E3A1.1\u3002"),name:"repetition_penalty",children:(0,a.tZ)(m.Z,{step:.1})})]}):t==v.B.IMAGE?(0,a.BX)(c.Fragment,{children:[(0,a.tZ)(s.Z.Item,{label:T("n","\u8981\u751F\u6210\u7684\u56FE\u50CF\u6570\u91CF\u3002\u5FC5\u987B\u4ECB\u4E8E 1 \u548C 4 \u4E4B\u95F4"),name:"n",children:(0,a.tZ)(m.Z,{min:1,max:4})}),(0,a.tZ)(s.Z.Item,{label:T("size_height","\u8F93\u51FA\u56FE\u50CF\u7684\u5206\u8FA8\u7387"),name:"size",children:(0,a.BX)(u.Z,{placeholder:"\u8F93\u51FA\u56FE\u50CF\u7684\u5206\u8FA8\u7387",allowClear:!0,children:[(0,a.tZ)(b,{value:"1024*1024",children:"1024*1024"}),(0,a.tZ)(b,{value:"720*1280",children:"720*1280"}),(0,a.tZ)(b,{value:"768*1152",children:"768*1152"}),(0,a.tZ)(b,{value:"1280*720",children:"1280*720"})]})}),(0,a.tZ)(s.Z.Item,{label:T("style","\u751F\u6210\u56FE\u7247\u98CE\u683C"),name:"style",children:(0,a.BX)(u.Z,{placeholder:"\u56FE\u7247\u98CE\u683C",allowClear:!0,children:[(0,a.tZ)(b,{value:"<photography>",children:"\u6444\u5F71"}),(0,a.tZ)(b,{value:"<portrait>",children:"\u4EBA\u50CF\u5199\u771F"}),(0,a.tZ)(b,{value:"<3d cartoon>",children:"3D\u5361\u901A"}),(0,a.tZ)(b,{value:"<anime>",children:"\u52A8\u753B"}),(0,a.tZ)(b,{value:"<oil painting>",children:"\u6CB9\u753B"}),(0,a.tZ)(b,{value:"<watercolor>",children:"\u6C34\u5F69"}),(0,a.tZ)(b,{value:"<sketch>",children:"\u7D20\u63CF"}),(0,a.tZ)(b,{value:"<chinese painting>",children:"\u4E2D\u56FD\u753B"}),(0,a.tZ)(b,{value:"<flat illustration>",children:"\u6241\u5E73\u63D2\u753B"}),(0,a.tZ)(b,{value:"<auto>",children:"\u9ED8\u8BA4\u503C\uFF0C\u7531\u6A21\u578B\u968F\u673A\u8F93\u51FA\u56FE\u50CF\u98CE\u683C"})]})}),(0,a.tZ)(s.Z.Item,{label:T("seed","\u968F\u673A\u6570\u79CD\u5B50\uFF0C\u7528\u4E8E\u63A7\u5236\u6A21\u578B\u751F\u6210\u5185\u5BB9\u7684\u968F\u673A\u6027"),name:"seed",children:(0,a.tZ)(m.Z,{min:0,max:4294967290})}),(0,a.tZ)(s.Z.Item,{label:T("ref_img","\u53C2\u8003\u56FE\u50CF\uFF08\u57AB\u56FE\uFF09\u7684URL\u5730\u5740\uFF0C\u6A21\u578B\u6839\u636E\u53C2\u8003\u56FE\u50CF\u751F\u6210\u76F8\u4F3C\u98CE\u683C\u7684\u56FE\u50CF\uFF0C\u652F\u6301jpg\u3001png\u3001tiff\u3001webp"),name:"ref_img",children:(0,a.tZ)(g.Z,{})}),(0,a.tZ)(s.Z.Item,{label:T("ref_strength","\u63A7\u5236\u8F93\u51FA\u56FE\u50CF\u4E0E\u57AB\u56FE\uFF08\u53C2\u8003\u56FE\uFF09\u7684\u76F8\u4F3C\u5EA6\u3002\u53D6\u503C\u8303\u56F4\u4E3A[0.0, 1.0]\u3002\u53D6\u503C\u8D8A\u5927\uFF0C\u4EE3\u8868\u751F\u6210\u7684\u56FE\u50CF\u4E0E\u53C2\u8003\u56FE\u8D8A\u76F8\u4F3C\u3002"),name:"ref_strength",children:(0,a.tZ)(h.Z,{max:1,min:0,step:.1})}),(0,a.tZ)(s.Z.Item,{label:T("ref_mode","\u57FA\u4E8E\u57AB\u56FE\uFF08\u53C2\u8003\u56FE\uFF09\u751F\u6210\u56FE\u50CF\u7684\u6A21\u5F0F\u3002"),name:"ref_mode",children:(0,a.BX)(u.Z,{placeholder:"\u57FA\u4E8E\u57AB\u56FE\uFF08\u53C2\u8003\u56FE\uFF09\u751F\u6210\u56FE\u50CF\u7684\u6A21\u5F0F",allowClear:!0,children:[(0,a.tZ)(b,{value:"repaint",children:"\u57FA\u4E8E\u53C2\u8003\u56FE\u7684\u5185\u5BB9\u751F\u6210\u56FE\u50CF"}),(0,a.tZ)(b,{value:"refonly",children:"\u57FA\u4E8E\u53C2\u8003\u56FE\u7684\u98CE\u683C\u751F\u6210\u56FE\u50CF"})]})}),(0,a.tZ)(s.Z.Item,{label:T("negative_prompt","\u53CD\u5411\u63D0\u793A\u8BCD\uFF0C\u7528\u6765\u63CF\u8FF0\u4E0D\u5E0C\u671B\u5728\u753B\u9762\u4E2D\u770B\u5230\u7684\u5185\u5BB9\uFF0C\u53EF\u4EE5\u5BF9\u753B\u9762\u8FDB\u884C\u9650\u5236\u3002\u652F\u6301\u4E2D\u82F1\u6587\uFF0C\u957F\u5EA6\u4E0D\u8D85\u8FC7500\u4E2A\u5B57\u7B26\uFF0C\u8D85\u8FC7\u90E8\u5206\u4F1A\u81EA\u52A8\u622A\u65AD\u3002"),name:"negative_prompt",children:(0,a.tZ)(g.Z,{placeholder:"\u53CD\u5411\u63D0\u793A\u8BCD\uFF0C\u5BF9\u753B\u9762\u8FDB\u884C\u9650\u5236"})})]}):(0,a.tZ)(c.Fragment,{})]}),(0,a.tZ)(p.Z,{justify:"center",children:(0,a.tZ)(f.ZP,{onClick:function(){I.resetFields()},children:"Reset"})})]})}var w=n(7749).Z.Paragraph,C=g.Z.TextArea;function k(e){var t=e.onchangePrompt,n=(0,r._)(s.Z.useForm(),1)[0],i=(0,r._)((0,_.useState)(""),2),l=i[0],o=i[1];return(0,a.tZ)(c.Fragment,{children:(0,a.tZ)(s.Z,{layout:"vertical",form:n,children:(0,a.tZ)(s.Z.Item,{children:(0,a.tZ)(w,{copyable:{text:l},children:(0,a.tZ)(C,{rows:3,value:l,onChange:function(e){var n=e.target.value;t(n),o(n)}})})})})})}function T(e){return e.initialTool,(0,a.tZ)(c.Fragment,{})}var S=n(7824),B=n.n(S);function x(e){var t=e.modelType,n=e.tabs,l=e.initialValues,o=l.initialChatConfig,c=l.initialImgConfig,u=l.initialTool,s=(0,r._)((0,_.useState)(),2),d=s[0],p=s[1],h=[{key:"config",label:"\u914D\u7F6E",children:(0,a.tZ)(I,{modelType:t,onChangeConfig:e.onChangeConfig,configFromAPI:t==v.B.CHAT?o:c})},{key:"prompt",label:"\u63D0\u793A\u8BCD",children:(0,a.tZ)(k,{onchangePrompt:e.onChangePrompt})},{key:"tool",label:"\u5DE5\u5177",children:(0,a.tZ)(T,{initialTool:u})}];return(0,_.useEffect)(function(){p(h.filter(function(e){return n.includes(e.key)}))},[e.initialValues]),(0,a.tZ)("div",{className:B().container,children:(0,a.tZ)(i.Z,{defaultActiveKey:"config",items:d})})}},1366:function(e,t,n){"use strict";var r=n(8188),a=n(9291),i=n(7294),l=n(3335),o=n(1133),c=n(7963),u=n(6981),s=n(1034),d=n(9166),p=n(5742),h=n(7893),m={whiteSpace:"pre-wrap",wordWrap:"break-word",overflow:"auto"};t.Z=function(e){var t=e.record,n=e.open,Z=e.setOpen,g=(0,h.$G)(),f=g.t;g.i18n;var v=(0,r._)(i.useState({title:"chat_client",input:"What is a document loader?",output:"A document loader is a tool used to load and process documents for various tasks such as text analysis, information extraction, and more."}),2),_=v[0],y=v[1];(0,i.useEffect)(function(){y({input:t.input,output:t.output,title:t.model})},[t]);var b=function(e){var n=[];Object.keys(e.attributes||[]).forEach(function(t){n.push({name:t,value:e.attributes[t]})});var r=JSON.parse(JSON.stringify(e));0==r.input.length&&(r.input=t.input),0==r.output.length&&(r.output=t.output),r.attributes=n,y(r)};return(0,a.tZ)("div",{children:(0,a.tZ)(l.Z,{title:"Trace Detail",width:"90%",onClose:function(){return Z(!1)},open:n,children:(0,a.BX)(o.Z,{children:[(0,a.tZ)(c.Z,{span:6,style:{whiteSpace:"nowrap",overflowX:"auto",width:"100%",borderRight:"1px solid #d9d9d9",paddingRight:"10px"},children:(0,a.tZ)(u.Z,{onSelect:function(e,t){return b(t.selectedNodes[0])},showLine:!0,showIcon:!0,defaultExpandAll:!0,treeData:[t.traceDetail]})}),(0,a.tZ)(c.Z,{span:18,children:(0,a.tZ)(s.Z,{title:_.title,extra:(0,a.tZ)(d.ZP,{disabled:!0,children:f("gotoDebug")}),children:(0,a.BX)(o.Z,{children:[(0,a.BX)(c.Z,{span:16,style:{paddingRight:10},children:[(0,a.tZ)(s.Z,{title:"Input",style:{marginTop:10},children:(0,a.tZ)("pre",{style:m,children:JSON.stringify(_.input,null,2)})}),(0,a.tZ)(s.Z,{title:"Output",style:{marginTop:10},children:(0,a.tZ)("pre",{style:m,children:JSON.stringify(_.output,null,2)})}),(0,a.tZ)(s.Z,{title:"Messages",style:{marginTop:10},children:"aaa"})]}),(0,a.tZ)(c.Z,{span:7,children:(0,a.tZ)(p.Z,{pagination:!1,columns:[{title:"Name",dataIndex:"name"},{title:"Value",dataIndex:"value"}],dataSource:(null==_?void 0:_.attributes)||[]})})]})})})]})})})}},5930:function(e,t,n){"use strict";var r=n(1010),a=n(7582),i=n(7647);t.Z={getChatModels(){return(0,r._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,i.WY)({url:"studio/api/chat-models",method:"get"})];case 1:return[2,e.sent()]}})})()},getChatModelByName(e){return(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,i.WY)({url:"studio/api/chat-models/".concat(e),method:"get"})];case 1:return[2,t.sent()]}})})()},postChatModel(e){return(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,i.WY)({url:"/studio/api/chat-models",method:"post",data:e})];case 1:return[2,t.sent()]}})})()},postImageModel(e){return(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,i.WY)({url:"/studio/api/chat-models/run/image-gen/url",method:"post",data:e})];case 1:return[2,t.sent()]}})})()},getModelNames(e){return(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,i.WY)({url:"/studio/api/chat-models/model-names?modelType=".concat(e),method:"get"})];case 1:return[2,t.sent()]}})})()}}},6755:function(e,t,n){"use strict";var r=n(1010),a=n(7582),i=n(7647);t.Z={getTraceDetailClient(){return(0,r._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,i.WY)("/studio/api/observation/getAITraceInfo")];case 1:return[2,e.sent()]}})})()},getTraceDetailClientById(e){return(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,i.WY)({url:"/studio/api/observation/detail?traceId=".concat(e),method:"get"})];case 1:return[2,t.sent()]}})})()}}},3865:function(e,t,n){"use strict";var r,a;n.d(t,{B:function(){return r}}),(a=r||(r={})).CHAT="CHAT",a.IMAGE="IMAGE"},4070:function(e,t,n){"use strict";function r(e){var t,n=e.scopeSpans.flatMap(function(e){return e.spans});if(n.length<2)return null;var r=new Map,i=0,l=0,o=0,c="",u="",s="";n.forEach(function(e){var t=e.attributes.reduce(function(e,t){return e[t.key]=t.value.stringValue,e},{}),n=a(e,"gen_ai.content.prompt")||"",d=a(e,"gen_ai.content.completion")||"";t["gen_ai.usage.input_tokens"]&&(i+=parseInt(t["gen_ai.usage.input_tokens"],10)),t["gen_ai.usage.output_tokens"]&&(l+=parseInt(t["gen_ai.usage.output_tokens"],10)),t["gen_ai.usage.total_tokens"]&&(o+=parseInt(t["gen_ai.usage.total_tokens"],10)),t["gen_ai.request.model"]&&(c=t["gen_ai.request.model"]),"chat"==t["gen_ai.operation.name"]&&(c=t["gen_ai.request.model"],e.events.forEach(function(e){var t=e.attributes.reduce(function(e,t){return e[t.key]=t.value.arrayValue.values.map(function(e){return{input:e.stringValue}}),e},{});t["gen_ai.prompt"]&&(u=t["gen_ai.prompt"]),t["gen_ai.completion"]&&(s=t["gen_ai.completion"])}));var p=e.endTimeUnixNano-e.startTimeUnixNano;r.set(e.spanId,{title:"".concat(e.name,"   ").concat((p/1e9).toFixed(2),"s"),input:n,key:e.spanId,output:d,attributes:t,costTime:p,detail:{},children:[]})}),n.forEach(function(e){if(e.parentSpanId&&r.has(e.parentSpanId)){var t=r.get(e.parentSpanId);t&&t.children.push(r.get(e.spanId))}});var d=n.find(function(e){return!e.parentSpanId});return d?(d.attributes.reduce(function(e,t){return e[t.key]=t.value.stringValue,e},{}),{id:d.traceId,latencyMilliseconds:(t=d.startTimeUnixNano,(parseInt(d.endTimeUnixNano,10)-parseInt(t,10))/1e6).toString(),model:c,promptTokens:i,completionTokens:l.toString(),totalTokens:o.toString(),tags:[],calculatedTotalCost:"0.0",calculatedInputCost:"0.0",calculatedOutputCost:"0.0",usageDetails:{input:i.toString(),output:l.toString(),total:o.toString()},input:u,output:s,timestamp:d.endTimeUnixNano,costDetails:{input:"0.0",output:"0.0",total:"0.0"},traceDetail:r.get(d.spanId)}):null}function a(e,t){var n=e.attributes.find(function(e){return e.key===t});return n?n.value.stringValue:void 0}n.d(t,{l:function(){return r}})}}]);