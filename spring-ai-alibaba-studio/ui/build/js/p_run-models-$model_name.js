(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[981,730],{7318:function(e){e.exports={container:"container--ozeKUykS","message-loading":"message-loading--tf6KXdKv"}},4605:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n(1010),i=n(8188),a=n(7582),s=n(9291),r=n(7294),l=n(7647),u=n(5930),c=n(9550),p=n(5598),m=n(7318),d=n.n(m);function f(){var e=(0,l.UO)(),t=(0,i._)((0,r.useState)(),2),n=t[0],m=t[1];return(0,r.useEffect)(function(){var t;return(t=(0,o._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,u.Z.getChatModelByName(e.model_name)];case 1:return m(t.sent()),[3,3];case 2:return console.error("Failed to fetch chat models: ",t.sent()),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)})(),function(){console.log("".concat(e.model_name," unmount"))}},[e]),n?(0,s.tZ)("div",{style:{padding:20,height:"100%"},children:(0,s.tZ)(c.default,{modelData:n,modelType:n.modelType})}):(0,s.tZ)("div",{className:d().container,children:(0,s.tZ)(p.Z,{tip:"Loading",children:(0,s.tZ)("div",{className:d()["message-loading"]})})})}},9550:function(e,t,n){"use strict";n.r(t);var o=n(1010),i=n(8975),a=n(8188),s=n(7582),r=n(9291),l=n(7294),u=n(9607),c=n(476),p=n(7647),m=n(3865),d=n(3981),f=n(4898),h=n(7318),g=n.n(h),_=n(5930),y=(0,l.memo)(function(e){var t,n=e.modelData,h=e.modelType,y=(0,p.UO)(),Z=(0,a._)((0,l.useState)({initialChatConfig:{model:"qwen-plus",temperature:.85,top_p:.8,seed:1,enable_search:!1,top_k:0,stop:[],incremental_output:!1,repetition_penalty:1.1,tools:[]},initialImgConfig:{model:"wanx-v1",responseFormat:"",n:1,size:"1024*1024",style:"<auto>",seed:0,ref_img:"",ref_strength:0,ref_mode:"",negative_prompt:""},initialTool:{}}),2),C=Z[0],v=Z[1],T=(0,a._)((0,l.useState)(),2),O=T[0],b=T[1],k=(0,a._)((0,l.useState)(""),2),w=k[0],I=k[1];return(0,l.useEffect)(function(){0!==Object.keys(y).length&&y.model_name==n.name&&(null!=n&&null!=n.chatOptions&&delete n.chatOptions.proxyToolCalls,v(function(e){return{initialChatConfig:(0,i._)({},n.chatOptions),initialImgConfig:(0,i._)({},n.imageOptions),initialTool:{}}}),n.modelType==m.B.CHAT?b(n.chatOptions):n.modelType==m.B.IMAGE&&b(n.imageOptions))},[n]),n?(0,r.BX)(u.Z,{justify:"space-between",style:{height:"100%"},children:[(0,r.tZ)(d.Z,{modelData:n,modelType:h,modelOptions:O,onRun:(t=(0,o._)(function(e){var t,o;return(0,s.Jh)(this,function(i){switch(i.label){case 0:if(h!==m.B.CHAT)return[3,2];return[4,_.Z.postChatModel({input:e.input,chatOptions:O,stream:e.stream,key:n.name,prompt:w})];case 1:return o=i.sent(),[3,4];case 2:if(h!==m.B.IMAGE)return[3,4];return[4,_.Z.postImageModel({input:e.input,imageOptions:O,key:n.name,prompt:w})];case 3:o=i.sent(),i.label=4;case 4:return[2,{result:o?e.stream?null===(t=o.result.streamResponse)||void 0===t?void 0:t.join("\n"):o.result.response:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",telemetry:{traceId:o?o.telemetry.traceId:""}}]}})}),function(e){return t.apply(this,arguments)})}),(0,r.tZ)(f.Z,{tabs:["config","prompt"],modelType:n.modelType,initialValues:C,onChangeConfig:function(e){b(e)},onChangePrompt:function(e){I(e)}})]}):(0,r.tZ)("div",{className:g().container,children:(0,r.tZ)(c.Z,{})})});t.default=y}}]);