(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[11,264],{1897:function(t){t.exports={container:"container--Ig6vhh6m",left:"left--GO17deKm",right:"right--Cg1UmMaL","full-height-divider":"full-height-divider--dcLayZaH","message-loading":"message-loading--WJMLtEFl"}},7765:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var i=n(1010),a=n(8188),r=n(7582),o=n(9291),s=n(7294),l=n(7647),c=n(4408),u=n(1897),h=n.n(u),d=n(5598),f=n(2605);function p(){var t=(0,l.UO)(),e=(0,a._)((0,s.useState)(),2),n=e[0],u=e[1];return(0,s.useEffect)(function(){var e;(e=(0,i._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,c.Z.getChatClientByName(t.client_name)];case 1:return u(e.sent()),[3,3];case 2:return console.error("Failed to fetch chat models: ",e.sent()),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)})()},[t]),n?(0,o.tZ)("div",{style:{padding:20,height:"100%"},children:(0,o.tZ)(f.default,{chatClientData:n})}):(0,o.tZ)("div",{className:h().container,children:(0,o.tZ)(d.Z,{tip:"Loading",children:(0,o.tZ)("div",{className:h()["message-loading"]})})})}},2605:function(t,e,n){"use strict";n.r(e);var i=n(1010),a=n(8975),r=n(8188),o=n(7582),s=n(9291),l=n(7294),c=n(9607),u=n(476),h=n(7647),d=n(3865),f=n(3981),p=n(4898),m=n(1897),g=n.n(m),_=n(4408),C=n(8391),y=(0,l.memo)(function(t){var e,n=t.chatClientData,m=(0,h.UO)(),y=(0,r._)((0,l.useState)({initialChatConfig:{model:"qwen-plus",temperature:.85,top_p:.8,seed:1,enable_search:!1,top_k:0,stop:[],incremental_output:!1,repetition_penalty:1.1,tools:[]},initialImgConfig:{model:"wanx-v1",responseFormat:"",n:1,size:"1024*1024",style:"<auto>",seed:0,ref_img:"",ref_strength:0,ref_mode:"",negative_prompt:""},initialTool:{}}),2),v=y[0],Z=y[1],b=(0,r._)((0,l.useState)(),2),O=b[0],T=b[1],w=(0,r._)((0,l.useState)(""),2),I=w[0],M=w[1],k=(0,r._)((0,l.useState)(""),2),E=k[0],J=k[1];return(0,l.useEffect)(function(){if(null!=n){var t=n.chatModel;0!==Object.keys(m).length&&m.client_name==t.name&&(null!=t&&null!=t.chatOptions&&delete t.chatOptions.proxyToolCalls,Z(function(e){return{initialChatConfig:(0,a._)({},t.chatOptions),initialImgConfig:(0,a._)({},t.imageOptions),initialTool:{}}}),t.modelType==d.B.CHAT?T(t.chatOptions):t.modelType==d.B.IMAGE&&T(t.imageOptions))}},[n]),n?(0,s.BX)(c.Z,{justify:"space-between",style:{height:"100%"},children:[(0,s.tZ)(f.Z,{modelData:n.chatModel,modelType:n.chatModel.modelType,modelOptions:O,isMemoryEnabled:n.isMemoryEnabled,callScene:C.r.CLIENT,onRun:(e=(0,i._)(function(t){var e,i,a;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,_.Z.postChatClient({key:n.name,input:t.input,chatOptions:O,stream:t.stream,prompt:I,chatID:E})];case 1:return J((i=r.sent()).chatID),a=i?t.stream?null===(e=i.result.streamResponse)||void 0===e?void 0:e.join("\n"):i.result.response:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",[2,{result:i?a:"",telemetry:{traceId:i?i.telemetry.traceId:""}}]}})}),function(t){return e.apply(this,arguments)}),onClear:function(){J("")}}),(0,s.tZ)(p.Z,{tabs:["config","prompt","tool"],modelType:n.chatModel.modelType,initialValues:v,onChangeConfig:function(t){T(t)},onChangePrompt:function(t){M(t)}})]}):(0,s.tZ)("div",{className:g().container,children:(0,s.tZ)(u.Z,{})})});e.default=y},4408:function(t,e,n){"use strict";var i=n(1010),a=n(7582),r=n(7647);e.Z={getChatClients(){return(0,i._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,r.WY)({url:"/studio/api/chat-clients",method:"get"})];case 1:return[2,t.sent()]}})})()},getChatClientByName(t){return(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,r.WY)({url:"/studio/api/chat-clients/".concat(t),method:"get"})];case 1:return[2,e.sent()]}})})()},postChatClient(t){return(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,r.WY)({url:"/studio/api/chat-clients",method:"post",data:t})];case 1:return[2,e.sent()]}})})()}}}}]);