"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[673],{78061:function(E,c,e){e.d(c,{Z:function(){return x}});var u=e(2784),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},g=m,t=e(80367);function r(){return r=Object.assign?Object.assign.bind():function(l){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(l[a]=d[a])}return l},r.apply(this,arguments)}const i=(l,s)=>u.createElement(t.Z,r({},l,{ref:s,icon:g}));var x=u.forwardRef(i)},7325:function(E,c,e){e.d(c,{Z:function(){return x}});var u=e(2784),m={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},g=m,t=e(80367);function r(){return r=Object.assign?Object.assign.bind():function(l){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(l[a]=d[a])}return l},r.apply(this,arguments)}const i=(l,s)=>u.createElement(t.Z,r({},l,{ref:s,icon:g}));var x=u.forwardRef(i)},44199:function(E,c,e){e.d(c,{Z:function(){return x}});var u=e(2784),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},g=m,t=e(80367);function r(){return r=Object.assign?Object.assign.bind():function(l){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(l[a]=d[a])}return l},r.apply(this,arguments)}const i=(l,s)=>u.createElement(t.Z,r({},l,{ref:s,icon:g}));var x=u.forwardRef(i)},77261:function(E,c,e){e.d(c,{Z:function(){return x}});var u=e(2784),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},g=m,t=e(80367);function r(){return r=Object.assign?Object.assign.bind():function(l){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(l[a]=d[a])}return l},r.apply(this,arguments)}const i=(l,s)=>u.createElement(t.Z,r({},l,{ref:s,icon:g}));var x=u.forwardRef(i)},6731:function(E,c,e){e.d(c,{Z:function(){return O}});var u=e(13311),m=e.n(u),g=e(74875),t=e.n(g),r=e(64251),i=e(73088),p=e(91030),x=e(12524),l=e.n(x),s=e(2784),d={"slider-input":"slider-input____Rgz7","slider-marker":"slider-marker___SBC_d"},a=e(52322),C=["value","onChange","step","min","max","className","isShowMarker","style"],h=function(n){var D=n.value,T=n.onChange,o=n.step,S=n.min,v=n.max,b=n.className,I=n.isShowMarker,f=n.style,_=t()(n,C),N=function(Z){Z!==null&&(T==null||T(Z))};return(0,a.jsxs)("div",{className:l()(d["slider-input"],b),children:[(0,a.jsxs)(p.Z,{vertical:!0,children:[(0,a.jsx)(r.Z,m()({value:D,onChange:T,step:o,min:S,max:v,style:f},_)),I&&(0,a.jsxs)(p.Z,{align:"center",justify:"space-between",className:d["slider-marker"],style:f,children:[(0,a.jsx)("div",{className:d["slider-marker"],children:S}),(0,a.jsx)("div",{className:d["slider-marker"],children:v})]})]}),(0,a.jsx)(i.Z,{step:o||.01,min:S,max:v,value:D,onChange:N,formatter:function(Z){return Number.isInteger(o)?"".concat(Math.floor(Number(Z))):"".concat(Z)},parser:function(Z){return Number.isInteger(o)?Math.floor(Number(Z||0)):Number(Z||0)}})]})},O=h},16683:function(E,c,e){e.r(c),e.d(c,{default:function(){return H}});var u=e(13311),m=e.n(u),g=e(42035),t=e.n(g),r=e(882),i=e(22453),p=e(76077),x=e(19612),l=e(72624),s=e(2784),d=e(10289),a=e(17942),C=e(12524),h=e.n(C),O={"chunk-list":"chunk-list___H2VlX","chunk-list-header":"chunk-list-header___FXcS1","chunk-list-header-count":"chunk-list-header-count___sfqDv",empty:"empty___o1hKZ","empty-content":"empty-content___Iy7f1","empty-title":"empty-title___GZaZU","empty-desc":"empty-desc___88n_Q"},y=e(51034),n=e(52322),D=function(P){var L=P.list,j=L===void 0?[]:L,A=P.className;return(0,n.jsxs)("div",{className:h()(O["chunk-list"],A),children:[!!(j!=null&&j.length)&&(0,n.jsxs)("div",{className:O["chunk-list-header"],children:[i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.ChunkList.index.chunkPreview",dm:"\u5207\u7247\u9884\u89C8"}),(0,n.jsx)("span",{className:O["chunk-list-header-count"],children:j==null?void 0:j.length})]}),j!=null&&j.length?j==null?void 0:j.map(function(M,w){return(0,n.jsx)(a.Z,{data:{title:M.title,content:M.text||"",enabled:M.enabled},index:w,mode:"detail"},M.id)}):(0,n.jsx)("div",{className:O.empty,children:(0,n.jsx)(y.Z,{description:(0,n.jsxs)("div",{className:O["empty-content"],children:[(0,n.jsx)("span",{className:O["empty-title"],children:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.ChunkList.index.noData",dm:"\u6682\u65E0\u6570\u636E"})}),(0,n.jsx)("span",{className:O["empty-desc"],children:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.ChunkList.index.enterContentOnLeftClickToPreview",dm:"\u8BF7\u5728\u5DE6\u4FA7\u8F93\u5165\u5185\u5BB9\uFF0C\u70B9\u51FB\u7ACB\u5373\u9884\u89C8\u8FDB\u884C\u7ED3\u679C\u67E5\u770B"})})]})})})]})},T=D,o=e(6731),S=e(63993),v=e(58541),b=e(45753),I=e(4513),f=e(35276),_={"form-container":"form-container___uVf45","form-title":"form-title___coflT","form-item-label":"form-item-label___uyNhi","info-icon":"info-icon___XMlyj","submit-button":"submit-button___woWn3","chunk-type":"chunk-type___KxTzB","submit-icon":"submit-icon___KG3Nh"},N={chunk_size:600,chunk_overlap:100,input:"",chunk_type:"length"},k=function(P){var L=P.formRef,j=P.className,A=P.onSubmit,M=v.Z.useForm(),w=t()(M,1),W=w[0],z=(0,s.useState)("length"),F=t()(z,2),K=F[0],V=F[1];return(0,n.jsx)("div",{className:h()(_["form-container"],j),children:(0,n.jsxs)(v.Z,{form:W,layout:"vertical",onFinish:A,ref:L,className:_.form,initialValues:N,children:[(0,n.jsx)(v.Z.Item,{label:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.Form.index.chunkSplittingMethod",dm:"Chunk\u5207\u5206\u65B9\u5F0F"}),name:"chunk_type",children:(0,n.jsx)(S.x,{className:_["chunk-type"],onChange:function(U){V(U)}})}),K==="regex"&&(0,n.jsx)(v.Z.Item,{label:i.Z.get({id:"main.pages.Knowledge.components.StepThree.index.inputRegularExpression",dm:"\u8F93\u5165\u6B63\u5219\u8868\u8FBE\u5F0F"}),rules:[{required:!0,message:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.Form.index.enterRegularExpression",dm:"\u8BF7\u8F93\u5165\u6B63\u5219\u8868\u8FBE\u5F0F"})}],name:"regex",children:(0,n.jsx)(I.Z.TextArea,{style:{height:58}})}),K!=="regex"&&(0,n.jsx)(v.Z.Item,{label:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.Form.index.estimatedChunkLength",dm:"\u5206\u6BB5\u9884\u4F30\u957F\u5EA6"}),name:"chunk_size",rules:[{required:!0,message:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.Form.index.enterEstimatedChunkLength",dm:"\u8BF7\u8F93\u5165\u5206\u6BB5\u9884\u4F30\u957F\u5EA6"})}],children:(0,n.jsx)(o.Z,{min:10,max:6e3,step:1,isShowMarker:!0})}),(K==="length"||K==="regex")&&(0,n.jsx)(v.Z.Item,{label:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.Form.index.chunkOverlapLength",dm:"\u5206\u6BB5\u91CD\u53E0\u957F\u5EA6"}),name:"chunk_overlap",rules:[{required:!0,message:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.Form.index.enterChunkOverlapLength",dm:"\u8BF7\u8F93\u5165\u5206\u6BB5\u91CD\u53E0\u957F\u5EA6"})}],children:(0,n.jsx)(o.Z,{min:1,max:1024,step:1,isShowMarker:!0})}),(0,n.jsx)(v.Z.Item,{children:(0,n.jsx)(f.ZP,{type:"default",icon:(0,n.jsx)(b.Z,{type:"spark-visable-line",className:_["submit-icon"]}),className:_["submit-button"],htmlType:"submit",children:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.components.Form.index.previewNow",dm:"\u7ACB\u5373\u9884\u89C8"})})})]})})},Z=k,R={container:"container___X_wA8",footer:"footer___OATBn"};function H(){var B=(0,s.useState)([]),P=t()(B,2),L=P[0],j=P[1],A=(0,s.useState)(!1),M=t()(A,2),w=M[0],W=M[1],z=(0,d.UO)(),F=z.kb_id,K=F===void 0?"":F,V=z.doc_id,X=V===void 0?"":V,U=(0,s.useRef)(),Y=(0,d.s0)(),J=function(){var $=U.current.getFieldsValue(),G={kb_id:K,doc_id:X,process_config:m()({},$)};(0,p.PU)(G).then(function(){x.Z.success(i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.index.chunkConfigurationSuccessful",dm:"\u5207\u7247\u914D\u7F6E\u6210\u529F"}))}),W(!0)},q=function(){var $=U.current.getFieldsValue(),G={kb_id:K,doc_id:X,process_config:m()({},$)};(0,p.gB)(G).then(function(ee){j(ee)}),W(!0)};return(0,n.jsx)(r.Z,{breadcrumbLinks:[{title:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.index.fileList",dm:"\u6587\u4EF6\u5217\u8868"}),path:"/knowledge/".concat(K)},{title:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.index.chunkConfiguration",dm:"\u5207\u7247\u914D\u7F6E"})}],simplifyBreadcrumb:!0,bottom:(0,n.jsxs)("div",{className:R.footer,children:[(0,n.jsx)(l.Z,{type:"primary",onClick:J,children:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.index.save",dm:"\u4FDD\u5B58"})}),(0,n.jsx)(l.Z,{type:"default",onClick:function(){return Y(-1)},children:i.Z.get({id:"main.pages.Knowledge.Detail.SliceConfiguration.index.cancel",dm:"\u53D6\u6D88"})})]}),children:(0,n.jsxs)("div",{className:R.container,children:[(0,n.jsx)(Z,{className:R.form,formRef:U,onSubmit:q}),w&&(0,n.jsx)(T,{className:R["chunk-list"],list:L})]})})}},17942:function(E,c,e){var u=e(13311),m=e.n(u),g=e(42035),t=e.n(g),r=e(74875),i=e.n(r),p=e(22453),x=e(2784),l=e(71783),s=e(87643),d=e(83317),a=e(52322),C=["data","index","mode","showSource"],h=function(y){var n=y.data,D=y.index,T=y.mode,o=y.showSource,S=i()(y,C),v=n.content,b=n.doc_name,I=(0,x.useState)(!1),f=t()(I,2),_=f[0],N=f[1],k=(0,x.useState)(!1),Z=t()(k,2),R=Z[0],H=Z[1],B=function(){N(!_)};return(0,a.jsxs)("div",{className:d.Z["chunk-item"],children:[(0,a.jsx)(s.Z,m()({data:n,index:D,mode:T,showExpand:R,isExpanded:_,onExpand:B},S)),(0,a.jsx)(l.Z,{isExpanded:_,className:_?d.Z.expanded:"",content:v||"",onShowExpand:H}),o&&(0,a.jsxs)("div",{className:d.Z["chunk-source"],children:[p.Z.get({id:"main.pages.Knowledge.Detail.components.ChunkItem.index.document",dm:"\u6587\u6863\uFF1A"}),b]})]})};c.Z=h},63993:function(E,c,e){e.d(c,{x:function(){return D},Z:function(){return T}});var u=e(13311),m=e.n(u),g=e(6731),t=e(22453),r=e(58541),i=e(4513),p=e(91030),x=e(12524),l=e.n(x),s=e(2784),d=e(87329),a=e.n(d),C={"radio-item":"radio-item___H4gtp",title:"title___iVsTA",checkIcon:"checkIcon___YwR51",active:"active___Xbs_P",logoWrap:"logoWrap___hVTvN",disabled:"disabled___TBad7",desc:"desc___YI4wy",top:"top___ltxAD"},h=e(52322);function O(o){return(0,h.jsxs)("div",{onClick:function(){o.disabled||o.isActive||!o.onSelect||o.onSelect()},className:l()(C["radio-item"],o.className,a()(a()({},C.active,o.isActive),C.disabled,o.disabled)),children:[(0,h.jsxs)(p.Z,{gap:12,align:"center",className:C.top,children:[!!o.logo&&(0,h.jsx)("div",{style:{backgroundColor:o.logoBg},className:C.logoWrap,children:(0,h.jsx)("img",{src:o.logo,alt:""})}),(0,h.jsx)("div",{className:C.title,children:o.label}),(0,h.jsx)("div",{className:l()(C.checkIcon,a()(a()({},C.active,o.isActive),C.disabled,o.disabled))})]}),!!o.desc&&(0,h.jsx)("div",{className:C.desc,children:o.desc})]})}var y={"step-three":"step-three___KgCGD","form-item-label":"form-item-label___hlWhg","info-icon":"info-icon___BjjyQ",mcpInstallTypeItem:"mcpInstallTypeItem___BcdyK"},n=[{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByLength",dm:"\u6309\u957F\u5EA6\u5207\u5206"}),value:"length",desc:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.suitableForTokenCount",dm:"\u9002\u5408\u5BF9 Token \u6570\u91CF\u6709\u4E25\u683C\u8981\u6C42\u7684\u573A\u666F\uFF0C\u6BD4\u5982\u4F7F\u7528\u4E0A\u4E0B\u6587\u957F\u5EA6\u8F83\u5C0F\u7684\u6A21\u578B\u65F6\u3002"})},{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByPage",dm:"\u6309\u5206\u9875\u5207\u5206"}),value:"page",desc:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.suitableForIndependentPages",dm:"\u9002\u5408\u6BCF\u9875\u4F20\u8FBE\u72EC\u7ACB\u4E3B\u9898\u7684\u6587\u6863\uFF0C\u8981\u6C42\u4E0D\u540C\u9875\u9762\u7684\u5185\u5BB9\u4E0D\u4F1A\u6DF7\u6742\u5728\u540C\u4E00\u6587\u672C\u5207\u7247\u4E2D\u3002"})},{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByTitle",dm:"\u6309\u6807\u9898\u5207\u5206"}),value:"title",desc:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.suitableForIndependentTitles",dm:"\u9002\u5408\u4E8E\u7528\u6807\u9898\u5212\u5206\u5E76\u4F20\u8FBE\u72EC\u7ACB\u4E3B\u9898\u7684\u6587\u6863,\u8981\u6C42\u4E0D\u540C\u7EA7\u6807\u9898\u4E0B\u7684\u5185\u5BB9\u4E0D\u4F1A\u6DF7\u6742\u5728\u540C\u4E00\u6587\u672C\u5207\u7247\u4E2D\u3002"})},{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByRegex",dm:"\u6309\u6B63\u5219\u5207\u5206"}),value:"regex",desc:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByRegexExpression",dm:"\u4F9D\u636E\u8BBE\u7F6E\u7684\u6B63\u5219\u8868\u8FBE\u5F0F,\u5BF9\u77E5\u8BC6\u5E93\u4E2D\u7684\u6587\u672C\u8FDB\u884C\u5207\u5206\u3002"})}],D=function(S){var v=S.value,b=S.onChange,I=S.disabled,f=S.className;return(0,h.jsx)(p.Z,{gap:12,wrap:!0,children:n.map(function(_){return(0,s.createElement)(O,m()(m()({className:l()(y.mcpInstallTypeItem,f),onSelect:function(){b(_.value)},isActive:v===_.value,disabled:I},_),{},{key:_.value}))})})};function T(o){var S=o.formRef,v=o.changeFormValue,b=o.formValue;return(0,h.jsx)("div",{className:y["step-three"],children:(0,h.jsxs)(r.Z,{layout:"vertical",ref:S,children:[(0,h.jsx)(r.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.chunkSplittingMethod",dm:"Chunk\u5207\u5206\u65B9\u5F0F"}),children:(0,h.jsx)(D,{onChange:function(f){v({chunk_type:f})},value:b.chunk_type})}),b.chunk_type==="regex"&&(0,h.jsx)(r.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.inputRegularExpression",dm:"\u8F93\u5165\u6B63\u5219\u8868\u8FBE\u5F0F"}),required:!0,children:(0,h.jsx)(i.Z.TextArea,{style:{height:58},value:b.regex,onChange:function(f){v({regex:f.target.value})}})}),b.chunk_type!=="regex"&&(0,h.jsx)(r.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.segmentEstimatedLength",dm:"\u5206\u6BB5\u9884\u4F30\u957F\u5EA6"}),children:(0,h.jsx)(g.Z,{min:10,max:6e3,step:1,style:{width:480},isShowMarker:!0,value:b.chunk_size,onChange:function(f){v({chunk_size:f})}})}),(b.chunk_type==="length"||b.chunk_type==="regex")&&(0,h.jsx)(r.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.components.StepThree.index.segmentOverlapLength",dm:"\u5206\u6BB5\u91CD\u53E0\u957F\u5EA6"}),children:(0,h.jsx)(g.Z,{min:1,max:1024,step:1,style:{width:480},isShowMarker:!0,value:b.chunk_overlap,onChange:function(f){v({chunk_overlap:f})}})})]})})}},81964:function(E,c,e){var u=e(2784);function m(g){var t=(0,u.useRef)(g);return t.current=g,t}c.Z=m},42991:function(E,c,e){var u=e(2784),m=e(81964),g=e(78922),t=e(63177),r=function(i){t.Z&&((0,g.mf)(i)||console.error("useUnmount expected parameter is a function, got ".concat(typeof i)));var p=(0,m.Z)(i);(0,u.useEffect)(function(){return function(){p.current()}},[])};c.Z=r},63233:function(E,c,e){e.d(c,{Z:function(){return u}});function u(m,g){if(m===g)return!0;for(var t=0;t<m.length;t++)if(!Object.is(m[t],g[t]))return!1;return!0}},97154:function(E,c){var e=!!(typeof window!="undefined"&&window.document&&window.document.createElement);c.Z=e},63177:function(E,c){var e=!1;c.Z=e}}]);
