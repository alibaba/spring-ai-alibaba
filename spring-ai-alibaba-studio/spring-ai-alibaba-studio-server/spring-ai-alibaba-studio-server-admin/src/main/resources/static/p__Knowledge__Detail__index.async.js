(self.webpackChunkmain=self.webpackChunkmain||[]).push([[7009],{90257:function(R,U,t){"use strict";var F=t(99604),P=t(50097),u=t(52322);function m(l){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},m(l)}function S(l,s){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);s&&(w=w.filter(function(v){return Object.getOwnPropertyDescriptor(l,v).enumerable})),r.push.apply(r,w)}return r}function p(l){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?S(Object(r),!0).forEach(function(w){C(l,w,r[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(r,w))})}return l}function C(l,s,r){return s=b(s),s in l?Object.defineProperty(l,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):l[s]=r,l}function b(l){var s=G(l,"string");return m(s)=="symbol"?s:String(s)}function G(l,s){if(m(l)!="object"||!l)return l;var r=l[Symbol.toPrimitive];if(r!==void 0){var w=r.call(l,s||"default");if(m(w)!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(l)}U.Z=function(l){var s=(0,F.sA)(),r=s.variables;return(0,u.jsx)(P.Z,p(p({},l),{},{overlayStyle:p(p({},r),l.overlayStyle)}))}},19612:function(R,U,t){"use strict";var F=t(78061),P=t(44199),u=t(7325),m=t(77261),S=t(88133),p=t(52322),C=["content"];function b(a){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},b(a)}function G(a,n){if(a==null)return{};var c=l(a,n),_,e;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(a);for(e=0;e<M.length;e++)_=M[e],!(n.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(a,_)&&(c[_]=a[_])}return c}function l(a,n){if(a==null)return{};var c={},_=Object.keys(a),e,M;for(M=0;M<_.length;M++)e=_[M],!(n.indexOf(e)>=0)&&(c[e]=a[e]);return c}function s(a,n){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(a);n&&(_=_.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),c.push.apply(c,_)}return c}function r(a){for(var n=1;n<arguments.length;n++){var c=arguments[n]!=null?arguments[n]:{};n%2?s(Object(c),!0).forEach(function(_){w(a,_,c[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):s(Object(c)).forEach(function(_){Object.defineProperty(a,_,Object.getOwnPropertyDescriptor(c,_))})}return a}function w(a,n,c){return n=v(n),n in a?Object.defineProperty(a,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[n]=c,a}function v(a){var n=h(a,"string");return b(n)=="symbol"?n:String(n)}function h(a,n){if(b(a)!="object"||!a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var _=c.call(a,n||"default");if(b(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}var N={success:{type:"success",icon:(0,p.jsx)(F.Z,{})},warning:{type:"warning",icon:(0,p.jsx)(P.Z,{})},error:{type:"error",icon:(0,p.jsx)(u.Z,{})},info:{type:"info",icon:(0,p.jsx)(m.Z,{})}},O=function(n,c){var _,e;typeof c=="string"?e={content:c}:e=r({},c);var M=e,fe=M.content,ve=G(M,C);S.ZP.open(r({type:n,content:fe,icon:n==="loading"||(_=N[n])===null||_===void 0?void 0:_.icon},ve))};U.Z=r(r({},S.ZP),{},{success:function(n){return O("success",n)},warning:function(n){return O("warning",n)},error:function(n){return O("error",n)},info:function(n){return O("info",n)},loading:function(n){return O("loading",n)}})},12990:function(R,U,t){"use strict";var F=t(2784),P=t(52322),u="/images/pdf.svg",m="/images/md.svg",S="/images/excel.svg",p="/images/ppt.svg",C="/images/txt.png",b="/images/word.png",G="/images/general.png",l=function(r){var w=r.type,v=r.className,h={PDF:u,MD:m,Excel:S,PPT:p,TXT:C,DOC:b,DOCX:b,PPTX:p,GENERAL:G},N=h[w]||h.GENERAL;return(0,P.jsx)("img",{src:N,className:v})};U.Z=l},79589:function(R,U,t){"use strict";t.r(U),t.d(U,{default:function(){return tt}});var F=t(87329),P=t.n(F),u=t(13311),m=t.n(u),S=t(42035),p=t.n(S),C=t(882),b=t(76077),G=t(2821),l=t(65741),s=t(77423),r=t(2784),w=t(10289),v=t(49616),h=t.n(v),N=t(74875),O=t.n(N),a=t(92782),n=t(12524),c=t.n(n),_={table:"table___gAPeG"},e=t(52322),M=["className"],fe=function(d){var Z=d.className,E=O()(d,M);return(0,e.jsx)(a.Z,m()({className:c()(_.table,Z)},E))},ve=fe,T=t(12990),i=t(92748),g={container:"container___gUBFc",icon:"icon___W1qEL",text:"text___A9eV4"},B=["format","className","children"],A={PDF:{text:"PDF"},MD:{text:"MD"},Excel:{text:"Excel"},PPT:{text:"PPT"},TXT:{text:"TXT"},DOC:{text:"DOC"},DOCX:{text:"DOCX"},PPTX:{text:"PPTX"}},de=function(d){var Z,E=d.format,k=d.className,x=d.children,K=O()(d,B),I=(0,e.jsx)(T.Z,{type:E,className:g.icon});return(0,e.jsx)(i.Z,m()(m()({icon:I,className:c()(g.container,k)},K),{},{children:x||((Z=A[E])===null||Z===void 0?void 0:Z.text)}))},ke=de,ce=t(45753),o=t(22453),Pe={container:"container___NMmPM",icon:"icon___Qc9wb",processing:"processing___N8aYu",rotate:"rotate___qJyJU",processed:"processed___CsCcq",failed:"failed___meqPY",text:"text___mCngu"},Fe=["status","className","children"],je={uploaded:{icon:"spark-process-line",text:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.pending",dm:"\u5F85\u5904\u7406"})},processing:{icon:"spark-loading-line",text:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.processing",dm:"\u5904\u7406\u4E2D"})},processed:{icon:"spark-checkCircle-fill",text:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.completed",dm:"\u5904\u7406\u5B8C\u6210"})},failed:{icon:"spark-errorCircle-fill",text:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.failed",dm:"\u5904\u7406\u5931\u8D25"})}},Me=function(d){var Z,E,k=d.status,x=d.className,K=d.children,I=O()(d,Fe),V=(0,e.jsx)(ce.Z,{type:(Z=je[k])===null||Z===void 0?void 0:Z.icon,className:c()(Pe.icon,Pe[k])});return(0,e.jsx)(i.Z,m()(m()({icon:V,className:c()(Pe.container,x)},I),{},{children:K||((E=je[k])===null||E===void 0?void 0:E.text)}))},Ue=Me,ie=t(72624),Ne=t(90257),q=t(19612),be=t(11246),Be=t(18561);function Ce(X){var d=X[0].index_status;return X.every(function(Z){return Z.index_status===d})}var ye={"batch-operation":"batch-operation___TFcYM","selected-count":"selected-count___GBz4V","cancel-select":"cancel-select___hLVoR","button-group":"button-group___tYXfp"},Re=function(d){var Z=d.selectedCount,E=d.onCancelSelect,k=d.onBatchDelete,x=d.onExitOperation;return(0,e.jsxs)("div",{className:ye["batch-operation"],children:[(0,e.jsxs)("span",{className:ye["selected-count"],children:[o.Z.get({id:"main.pages.Knowledge.Detail.components.BatchOperation.index.selected",dm:"\u5DF2\u9009"}),"\xA0",Z,"\xA0",o.Z.get({id:"main.pages.Knowledge.Detail.components.BatchOperation.index.items",dm:"\u9879"})]}),(0,e.jsx)("span",{className:ye["cancel-select"],onClick:E,children:o.Z.get({id:"main.pages.Knowledge.Detail.components.BatchOperation.index.cancelSelection",dm:"\u53D6\u6D88\u9009\u62E9"})}),(0,e.jsxs)("div",{className:ye["button-group"],children:[(0,e.jsx)(ie.Z,{type:"default",onClick:k,children:o.Z.get({id:"main.pages.Knowledge.Detail.components.BatchOperation.index.batchDelete",dm:"\u6279\u91CF\u5220\u9664"})}),(0,e.jsxs)(ie.Z,{type:"default",onClick:x,children:[(0,e.jsx)(ce.Z,{type:"spark-escape-line"}),o.Z.get({id:"main.pages.Knowledge.Detail.components.BatchOperation.index.exitOperation",dm:"\u9000\u51FA\u64CD\u4F5C"})]})]})]})},Ie=Re,Oe={"operation-btn":"operation-btn___tONks"},We=function(d){var Z=d.list,E=d.operationable,k=E===void 0?!1:E,x=d.onSelectionChange,K=d.current,I=K===void 0?1:K,V=d.pageSize,J=V===void 0?10:V,se=d.total,le=se===void 0?0:se,te=d.onPaginationChange,H=d.onExitOperation,ue=d.handleClickAction,ge=d.refreshList,ne=(0,w.s0)(),f=(0,w.UO)(),D=f.kb_id,L=(0,r.useState)([]),j=p()(L,2),$=j[0],_e=j[1],ae=(0,r.useState)([]),z=p()(ae,2),y=z[0],Q=z[1],pe=(0,r.useState)(!1),me=p()(pe,2),nt=me[0],Ze=me[1],Te=function(Y,W){_e(Y);var oe=h()(y);W.forEach(function(De){oe.find(function(st){return st.doc_id===De.doc_id})||oe.push(De)});var Se=oe.filter(function(De){return Y.includes(De.doc_id)});Q(Se),x==null||x(Y,Se)},at=[{title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.dataName",dm:"\u6570\u636E\u540D\u79F0"}),dataIndex:"name",key:"name",width:500},{title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.status",dm:"\u72B6\u6001"}),dataIndex:"index_status",key:"index_status",width:180,render:function(Y){return(0,e.jsx)(Ue,{status:Y})}},{title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.dataFormat",dm:"\u6570\u636E\u683C\u5F0F"}),dataIndex:"format",key:"format",width:100,render:function(Y){return(0,e.jsx)(ke,{format:Y==null?void 0:Y.toUpperCase()})}},{title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.dataSize",dm:"\u6570\u636E\u5927\u5C0F"}),dataIndex:"size",key:"size",width:120,render:function(Y,W){var oe=W.size,Se=oe/1024/1024<1?"".concat((oe/1024).toFixed(2)," KB"):"".concat((oe/1024/1024).toFixed(2)," MB");return(0,e.jsx)("div",{children:Se})}},{title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.operation",dm:"\u64CD\u4F5C"}),key:"action",width:300,render:function(Y,W){return(0,e.jsxs)(Be.Z,{size:12,children:[(0,e.jsx)(ie.Z,{type:"link",className:Oe["operation-btn"],onClick:function(){return ne("/knowledge/sliceConfiguration/".concat(W.kb_id,"/").concat(W.doc_id))},children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.sliceConfiguration",dm:"\u5207\u7247\u914D\u7F6E"})}),(0,e.jsx)(ie.Z,{type:"link",className:Oe["operation-btn"],onClick:function(){return ne("/knowledge/sliceEditing/".concat(W.kb_id,"/").concat(W.doc_id))},children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.sliceEdit",dm:"\u5207\u7247\u7F16\u8F91"})}),(0,e.jsx)(Ne.Z,{menu:{items:[{key:"delete",label:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.delete",dm:"\u5220\u9664"}),danger:!0,onClick:function(){return ue&&ue("delete",W==null?void 0:W.kb_id,W==null?void 0:W.doc_id)}}]},trigger:["click"],children:(0,e.jsx)(ie.Z,{type:"link",className:Oe["operation-btn"],children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.more",dm:"\u66F4\u591A"})})})]})}}];(0,r.useEffect)(function(){_e([]),Q([])},[k]);var ot=function(){if(!y.length)return q.Z.error(o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.selectFileFirst",dm:"\u8BF7\u5148\u9009\u62E9\u6587\u4EF6"}));if(!Ce(y)){Ze(!0);return}be.Z.warning({title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.confirmDisableThreeFiles",dm:"\u786E\u8BA4\u7981\u7528\u6240\u9009\u76843\u4E2A\u6587\u4EF6\u5417"}),children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.disabledFileNotRetrieved",dm:"\u7981\u7528\u540E\uFF0C\u6587\u4EF6\u5C06\u4E0D\u518D\u88AB\u68C0\u7D22\u5230"})})},it=function(){if(!y.length)return q.Z.error(o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.selectFileFirst",dm:"\u8BF7\u5148\u9009\u62E9\u6587\u4EF6"}));if(!Ce(y)){Ze(!0);return}be.Z.warning({title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.confirmEnableThreeFiles",dm:"\u786E\u8BA4\u542F\u7528\u6240\u9009\u76843\u4E2A\u6587\u4EF6\u5417"}),children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.enabledFileRetrieved",dm:"\u542F\u7528\u540E\uFF0C\u6587\u4EF6\u5C06\u5F00\u59CB\u88AB\u68C0\u7D22\u5230"}),okText:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.confirm",dm:"\u786E\u8BA4"}),cancelText:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.cancel",dm:"\u53D6\u6D88"})})},rt=function(){if(!y.length)return q.Z.error(o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.selectFileFirst",dm:"\u8BF7\u5148\u9009\u62E9\u6587\u4EF6"}));be.Z.warning({title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.confirmDeleteVar1Files",dm:"\u786E\u8BA4\u5220\u9664\u6240\u9009\u7684{var1}\u4E2A\u6587\u4EF6\u5417"},{var1:y==null?void 0:y.length}),danger:!0,children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.deletedFileCannotRecover",dm:"\u5220\u9664\u540E\uFF0C\u6587\u4EF6\u5C06\u65E0\u6CD5\u6062\u590D"}),okText:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.confirmDelete",dm:"\u786E\u8BA4\u5220\u9664"}),cancelText:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.cancel",dm:"\u53D6\u6D88"}),onOk:function(){if(D){var W={kb_id:D,doc_ids:$};(0,b.Mj)(W).then(function(){q.Z.success(o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.successfullyDeleted",dm:"\u5220\u9664\u6210\u529F"})),ge(),Q([])})}}})};return(0,e.jsxs)(e.Fragment,{children:[k&&(0,e.jsx)(Ie,{selectedCount:y.length,onCancelSelect:function(){return Te([],[])},onBatchDisable:ot,onBatchDelete:rt,onBatchEnable:it,onExitOperation:H}),(0,e.jsx)(ve,{columns:at,dataSource:Z,rowKey:"doc_id",rowSelection:k?{selectedRowKeys:$,onChange:Te,preserveSelectedRowKeys:!0,hideSelectAll:!1}:void 0,pagination:{current:I,pageSize:J,total:le,showSizeChanger:!1,showQuickJumper:!1,onChange:te}}),nt&&(0,e.jsx)(be.Z,{type:"warning",title:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.confirmSelectedFiles",dm:"\u8BF7\u786E\u8BA4\u60A8\u9009\u62E9\u7684\u6587\u4EF6"}),open:!0,footer:(0,e.jsx)(ie.Z,{type:"primary",onClick:function(){Ze(!1)},children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.close",dm:"\u5173\u95ED"})}),children:o.Z.get({id:"main.pages.Knowledge.Detail.components.FileList.index.filesHaveMultipleStatuses",dm:"\u60A8\u5F53\u524D\u6240\u9009\u7684\u6587\u4EF6\u5305\u542B\u591A\u79CD\u72B6\u6001\uFF0C\u65E0\u6CD5\u8FDB\u884C\u540C\u4E00\u4E2A\u6279\u91CF\u64CD\u4F5C\uFF0C\u8BF7\u786E\u8BA4\uFF01"})})]})},Ae=We,ze=t(4513),Ge=t(50097),we=t(91030),he={"search-container":"search-container___Y3gNN","search-content":"search-content___RaWkE","select-group":"select-group___rLcyb","search-input":"search-input___Mr52o","dropdown-icon":"dropdown-icon___uqE0j"},$e=[{label:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.allStatuses",dm:"\u5168\u90E8\u72B6\u6001"}),key:""},{label:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.pending",dm:"\u5F85\u5904\u7406"}),key:"uploaded"},{label:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.processing",dm:"\u5904\u7406\u4E2D"}),key:"processing"},{label:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.completed",dm:"\u5904\u7406\u5B8C\u6210"}),key:"processed"},{label:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.failed",dm:"\u5904\u7406\u5931\u8D25"}),key:"failed"}],Xe=function(d){var Z=d.operationable,E=d.className,k=d.onSearch,x=d.onFilter,K=d.onBatchOperation,I=d.setUploadModalVisible,V=(0,r.useState)(""),J=p()(V,2),se=J[0],le=J[1];return(0,e.jsx)("div",{className:c()(he["search-container"],E),children:(0,e.jsxs)("div",{className:he["search-content"],children:[(0,e.jsx)(ze.Z,{prefix:(0,e.jsx)(ce.Z,{type:"spark-search-line"}),className:he["search-input"],placeholder:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.enterFileName",dm:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}),onPressEnter:function(H){return k&&k(H.target.value)}}),(0,e.jsx)("div",{className:he["select-group"],children:(0,e.jsx)(Ge.Z,{menu:{items:$e,onClick:function(H){x==null||x("index_status",H.key),le(H.domEvent.target.innerText)}},children:(0,e.jsxs)(we.Z,{align:"center",gap:6,children:[(0,e.jsx)(ie.Z,{type:"textCompact",children:se||o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.allStatuses",dm:"\u5168\u90E8\u72B6\u6001"})}),(0,e.jsx)(ce.Z,{type:"spark-down-line",className:he["dropdown-icon"]})]})})}),!Z&&(0,e.jsxs)(we.Z,{align:"center",gap:8,children:[(0,e.jsx)(ie.Z,{type:"default",onClick:K,children:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.batchOperation",dm:"\u6279\u91CF\u64CD\u4F5C"})}),(0,e.jsx)(ie.Z,{type:"primary",icon:(0,e.jsx)(ce.Z,{type:"spark-plus-line"}),onClick:function(){return I(!0)},children:o.Z.get({id:"main.pages.Knowledge.Detail.components.Search.index.uploadFile",dm:"\u4E0A\u4F20\u6587\u4EF6"})})]})]})})},Ve=Xe,Ee={container:"container___zQxvj",list:"list___PgWi6",pagination:"pagination___sySNo"},Ye=t(12323),Ke=t.n(Ye),Je=t(63260),He=t.n(Je),Le=t(36488),Qe=t(84546),xe=t(53707),ee={"upload-dragger":"upload-dragger___jkXMl","upload-dragger-icon":"upload-dragger-icon___Ajg83","upload-dragger-title":"upload-dragger-title___Paa4Z","upload-dragger-desc":"upload-dragger-desc___STc1E","upload-dragger-progress":"upload-dragger-progress___TxSHx","upload-dragger-wrapper":"upload-dragger-wrapper___Ib7Ij","upload-modal-content":"upload-modal-content___zU8b6","remove-icon":"remove-icon___HbU_A"};function qe(X){var d=(0,w.UO)(),Z=d.kb_id,E=X.onClose,k=X.refreshList,x=(0,r.useState)([]),K=p()(x,2),I=K[0],V=K[1],J=(0,r.useRef)(!1),se=(0,r.useState)(0),le=p()(se,2),te=le[0],H=le[1],ue=function(){var f={type:"file",files:I,kb_id:Z};(0,b.GZ)(f).then(function(){q.Z.success(o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.fileImportSuccess",dm:"\u6587\u4EF6\u5BFC\u5165\u6210\u529F"})),E(),k()})},ge=function(f){var D=(f==null?void 0:f.toUpperCase())==="PPTX"?"PPT":f==null?void 0:f.toUpperCase();return(0,e.jsx)(T.Z,{type:D,className:ee["upload-dragger-format"]})};return(0,e.jsx)(Qe.Z,{title:o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.uploadFile",dm:"\u4E0A\u4F20\u6587\u4EF6"}),open:!0,onCancel:E,okText:o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.confirm",dm:"\u786E\u8BA4"}),onOk:ue,okButtonProps:{disabled:te>0||I.length===0},children:(0,e.jsxs)("div",{className:ee["upload-modal-content"],children:[(0,e.jsx)("div",{className:ee["upload-dragger-progress"],children:o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.uploadVar1Of50",dm:"\u4E0A\u4F20\uFF08{var1}/ 50\uFF09"},{var1:I.length})}),(0,e.jsx)(xe.Z.Dragger,{multiple:!0,disabled:I.length>=50||te>0,accept:".pdf,.doc,.txt,.md,.ppt,.docx,.pptx",customRequest:function(f){H(function(D){return D+1}),(0,Le.ZP)({file:f.file,category:"document",onProgress:function(L){var j,$=L.percent;f.file.percent=$,(j=f.onProgress)===null||j===void 0||j.call(f,{percent:$})}}).then(function(){var D=He()(Ke()().mark(function L(j){var $;return Ke()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return j.percent=1,ae.next=3,(0,Le.pC)(j.path);case 3:f.file.url=ae.sent,($=f.onSuccess)===null||$===void 0||$.call(f,j),V(function(z){return[].concat(h()(z),[j])});case 6:case"end":return ae.stop()}},L)}));return function(L){return D.apply(this,arguments)}}()).catch(function(D){var L;(L=f.onError)===null||L===void 0||L.call(f,D)}).finally(function(){H(function(D){return D-1})})},beforeUpload:function(f,D){if(J.current=!1,I.length+D.length>50||D.length>50)return J.current||(q.Z.destroy(),q.Z.error(o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.maxUpload50Files",dm:"\u6700\u591A\u53EA\u80FD\u4E0A\u4F20 50 \u4E2A\u6587\u4EF6"})),J.current=!0),xe.Z.LIST_IGNORE;var L=/\.(pdf|doc|txt|md|ppt|docx|pptx)$/i.test(f.name),j=f.size/1024/1024<=100,$=/\.(png|jpg|jpeg|gif)$/i.test(f.name)?f.size/1024/1024<=20:!0;return L?j?$?!0:(q.Z.error(o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.imageSizeExceeds20MB",dm:"\u5355\u4E2A\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC720MB"})),xe.Z.LIST_IGNORE):(q.Z.error(o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.fileSizeExceeds100MB",dm:"\u5355\u4E2A\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100MB"})),xe.Z.LIST_IGNORE):(q.Z.error(o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.supportedFormats",dm:"\u4EC5\u652F\u6301\u4E0A\u4F20.pdf\u3001.doc\u3001.txt\u3001.md\u3001.ppt\u3001.docx\u3001.pptx\u7B49\u683C\u5F0F\u7684\u6587\u4EF6"})),xe.Z.LIST_IGNORE)},maxCount:50,listType:"picture",onRemove:function(f){var D=I.filter(function(L){var j;return L.path!==((j=f.response)===null||j===void 0?void 0:j.path)});V(D),D.length<50&&(J.current=!1)},showUploadList:{removeIcon:(0,e.jsx)(ce.Z,{type:"spark-delete-line",className:ee["remove-icon"],size:20}),showRemoveIcon:!0},iconRender:function(f){var D,L=f.name,j=L==null||(D=L.split("."))===null||D===void 0||(D=D.pop())===null||D===void 0?void 0:D.toUpperCase();return ge(j||"")},children:(0,e.jsx)("div",{className:ee["upload-dragger-wrapper"],children:(0,e.jsxs)(we.Z,{vertical:!0,align:"center",justify:"center",className:ee["upload-dragger"],children:[(0,e.jsx)(ce.Z,{type:"spark-upload-line",className:ee["upload-dragger-icon"]}),(0,e.jsx)("div",{className:ee["upload-dragger-title"],children:o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.clickOrDragUploadLocalFile",dm:"\u70B9\u51FB\u6216\u62D6\u62FD\u4E0A\u4F20\u672C\u5730\u6587\u4EF6"})}),(0,e.jsx)("div",{className:ee["upload-dragger-desc"],children:o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.supportedFormatsAndMaxSize",dm:"\u652F\u6301.pdf\u3001.doc\u3001.txt\u3001.md\u3001.ppt\u3001.docx\u3001.pptx\u7B49\u683C\u5F0F\u7684\u6587\u4EF6\uFF0C"})}),(0,e.jsx)("div",{className:ee["upload-dragger-desc"],children:o.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.fileSizeAndPageLimit",dm:"\u5355\u4E2A\u6587\u4EF6\u6700\u5927100MB\u62161000\u9875\uFF0C\u5355\u4E2A\u56FE\u7247\u6700\u5927\u9650\u523620MB"})})]})})})]})})}var et=function(){var d=(0,w.UO)(),Z=d.kb_id,E=(0,G.Z)({current:1,pageSize:10,operationable:!1,selectedRowKeys:[],list:[],name:"",total:0,index_status:"",format:""}),k=p()(E,2),x=k[0],K=k[1],I=(0,r.useState)(""),V=p()(I,2),J=V[0],se=V[1],le=(0,r.useState)(!1),te=p()(le,2),H=te[0],ue=te[1],ge=function(){(0,b.Eq)({current:x.current,size:x.pageSize,kb_id:Z||"",name:x.name||void 0,index_status:x.index_status||void 0}).then(function(y){K({list:y.records,total:y.total,current:y.current,pageSize:y.size})})};(0,r.useEffect)(function(){ge()},[x.current,x.pageSize,x.name,x.index_status,x.format]);var ne=function(y,Q){K({current:y,pageSize:Q})},f=function(y){K({selectedRowKeys:y})},D=function(y){K({name:y,current:1})},L=function(y,Q){K(function(pe){return m()(m()({},pe),{},P()(P()({},y,Q),"current",1))})},j=function(){K({operationable:!x.operationable})},$=function(y,Q){s.Z.confirm({title:o.Z.get({id:"main.pages.Knowledge.Detail.index.deleteData",dm:"\u5220\u9664\u6570\u636E"}),content:o.Z.get({id:"main.pages.Knowledge.Detail.index.confirmDeleteData",dm:"\u786E\u5B9A\u5220\u9664\u8BE5\u6570\u636E\u5417\uFF1F"}),onOk:function(){(0,b.mU)(y,Q).then(function(){var me=x.current;x.list.length===1&&me>1&&(me-=1,K({current:me})),ge()})}})},_e=function(y,Q,pe){switch(y){case"delete":$(Q,pe);break;default:break}};(0,l.Z)(function(){return(0,b.mB)(Z)},{onSuccess:function(y){se(y.name)}});var ae=function(){x.current!==1?K({current:1}):ge(),f([])};return(0,e.jsxs)(C.Z,{breadcrumbLinks:[{title:J,path:"/knowledge"},{title:o.Z.get({id:"main.pages.Knowledge.Detail.index.fileList",dm:"\u6587\u4EF6\u5217\u8868"})}],children:[(0,e.jsxs)("div",{className:Ee.container,children:[(0,e.jsx)(Ve,m()({className:Ee.search,onSearch:D,onFilter:L,onBatchOperation:j,setUploadModalVisible:ue},x)),(0,e.jsx)(Ae,m()({onSelectionChange:f,onPaginationChange:ne,onExitOperation:j,handleClickAction:_e,refreshList:ae},x))]}),H&&(0,e.jsx)(qe,{onClose:function(){return ue(!1)},refreshList:ae})]})},tt=et},36488:function(R,U,t){"use strict";t.d(U,{qO:function(){return b},ZP:function(){return G},pC:function(){return p}});var F=t(12323),P=t.n(F),u=t(63260),m=t.n(u),S=t(85545);function p(v){return C.apply(this,arguments)}function C(){return C=m()(P()().mark(function v(h){var N,O;return P()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(N=window.g_config.config.upload_method,N!==b.OSS){n.next=6;break}return n.next=4,(0,S.ZP)({url:"/console/v1/files/get-preview-url",method:"GET",params:{path:h}});case 4:return O=n.sent,n.abrupt("return",O.data.data);case 6:if(N!==b.FILE){n.next=8;break}return n.abrupt("return","".concat(S.v2.get(),"/console/v1/files/download?path=").concat(encodeURIComponent(h),"&preview=true&access_token=").concat(S.nP.get()));case 8:case"end":return n.stop()}},v)})),C.apply(this,arguments)}var b=function(v){return v.OSS="oss",v.FILE="file",v}({});function G(v){var h=window.g_config.config.upload_method;return h===b.OSS?s(v):(h===b.FILE,l(v))}function l(v){var h=new FormData;return h.append("category",v.category),h.append("files",v.file),(0,S.ZP)({method:"POST",url:"/console/v1/files/upload",data:h,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(O){var a;(a=v.onProgress)===null||a===void 0||a.call(v,{percent:Math.min(1,O.loaded/((O==null?void 0:O.total)||1))})}}).then(function(N){return N.data.data[0]})}function s(v){return r.apply(this,arguments)}function r(){return r=m()(P()().mark(function v(h){var N,O,a;return P()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,S.ZP)({url:"/console/v1/files/upload-policies",method:"POST",data:{files:[{name:h.file.name}],category:h.category}});case 2:return N=c.sent,O=N.data.data[0],a=new FormData,a.append("OSSAccessKeyId",O.access_id),a.append("success_action_status","200"),a.append("policy",O.policy),a.append("signature",O.signature),a.append("key",O.path),a.append("file",h.file),c.abrupt("return",(0,S.ZP)({method:"POST",url:O.host,data:a,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var M;(M=h.onProgress)===null||M===void 0||M.call(h,{percent:Math.min(1,e.loaded/((e==null?void 0:e.total)||1))})}}).then(function(){return{extension:w(h.file.name),name:h.file.name,path:O.path,size:h.file.size}}));case 12:case"end":return c.stop()}},v)})),r.apply(this,arguments)}function w(v){var h=v.lastIndexOf(".");return(h>0?v.slice(h):"").replace(/\./,"")}},76077:function(R,U,t){"use strict";t.d(U,{Cs:function(){return fe},Eq:function(){return h},Et:function(){return s},GZ:function(){return N},Mj:function(){return a},PU:function(){return e},XK:function(){return _},Y6:function(){return ve},YN:function(){return n},ZJ:function(){return r},bN:function(){return v},eU:function(){return G},eb:function(){return l},gB:function(){return M},mB:function(){return w},mU:function(){return O},tH:function(){return c}});var F=t(74875),P=t.n(F),u=t(46639),m=["kb_id"],S=["doc_id","chunk_id"],p=["doc_id","kb_id"],C=["doc_id"],b=["doc_id"],G=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases",method:"GET",params:i}).then(function(g){return g.data.data})},l=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases",method:"POST",data:i}).then(function(g){return g.data.data})},s=function(i){var g=i.kb_id,B=P()(i,m);return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(g),method:"PUT",data:B}).then(function(A){return A.data})},r=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(i),method:"DELETE"}).then(function(g){return g.data})},w=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(i),method:"GET"}).then(function(g){return g.data.data})},v=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases/retrieve",method:"POST",data:i}).then(function(g){if(g)return g.data.data})},h=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(i.kb_id,"/documents"),method:"GET",params:i}).then(function(g){return g.data.data})},N=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(i.kb_id,"/documents"),method:"POST",data:i}).then(function(g){return g.data.data})},O=function(i,g){return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(i,"/documents/").concat(g),method:"DELETE"}).then(function(B){return B.data.data})},a=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(i==null?void 0:i.kb_id,"/documents/batch-delete"),method:"DELETE",data:i}).then(function(g){return g.data.data})},n=function(i){var g=i.doc_id,B=i.current,A=i.size;return(0,u.W)({url:"/console/v1/documents/".concat(g,"/chunks"),method:"GET",params:{current:B,size:A}}).then(function(de){return de.data.data})},c=function(i){var g=i.doc_id,B=i.chunk_id;return(0,u.W)({url:"/console/v1/documents/".concat(g,"/chunks/").concat(B),method:"DELETE"}).then(function(A){return A.data.data})},_=function(i){var g=i.doc_id,B=i.chunk_id,A=P()(i,S);return(0,u.W)({url:"/console/v1/documents/".concat(g,"/chunks/").concat(B),method:"PUT",data:A}).then(function(de){return de.data.data})},e=function(i){var g=i.doc_id,B=i.kb_id,A=P()(i,p);return(0,u.W)({url:"/console/v1/knowledge-bases/".concat(B,"/documents/").concat(g,"/re-index"),method:"PUT",data:A}).then(function(de){return de.data.data})},M=function(i){var g=i.doc_id,B=P()(i,C);return(0,u.W)({url:"/console/v1/documents/".concat(g,"/chunks/preview"),method:"POST",data:B}).then(function(A){return A.data.data})},fe=function(i){var g=i.doc_id,B=P()(i,b);return(0,u.W)({url:"/console/v1/documents/".concat(g,"/chunks/update-status"),method:"PUT",data:B}).then(function(A){return A.data.data})},ve=function(i){return(0,u.W)({url:"/console/v1/knowledge-bases/query-by-codes",method:"POST",data:{kb_ids:i}}).then(function(g){return g.data.data})}},2821:function(R,U,t){"use strict";var F=t(22970),P=t(2784),u=t(78922),m=function(S){var p=(0,F.CR)((0,P.useState)(S),2),C=p[0],b=p[1],G=(0,P.useCallback)(function(l){b(function(s){var r=(0,u.mf)(l)?l(s):l;return r?(0,F.pi)((0,F.pi)({},s),r):s})},[]);return[C,G]};U.Z=m},74875:function(R,U,t){var F=t(60918);function P(u,m){if(u==null)return{};var S=F(u,m),p,C;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(u);for(C=0;C<b.length;C++)p=b[C],!(m.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(u,p)&&(S[p]=u[p])}return S}R.exports=P,R.exports.__esModule=!0,R.exports.default=R.exports},60918:function(R){function U(t,F){if(t==null)return{};var P={},u=Object.keys(t),m,S;for(S=0;S<u.length;S++)m=u[S],!(F.indexOf(m)>=0)&&(P[m]=t[m]);return P}R.exports=U,R.exports.__esModule=!0,R.exports.default=R.exports}}]);
