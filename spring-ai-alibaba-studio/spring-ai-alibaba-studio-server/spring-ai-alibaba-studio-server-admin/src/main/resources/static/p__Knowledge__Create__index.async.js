"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[7600],{12990:function(J,D,n){var W=n(2784),k=n(52322),U="/images/pdf.svg",m="/images/md.svg",S="/images/excel.svg",t="/images/ppt.svg",P="/images/txt.png",N="/images/word.png",Z="/images/general.png",K=function(I){var g=I.type,a=I.className,l={PDF:U,MD:m,Excel:S,PPT:t,TXT:P,DOC:N,DOCX:N,PPTX:t,GENERAL:Z},c=l[g]||l.GENERAL;return(0,k.jsx)("img",{src:c,className:a})};D.Z=K},78986:function(J,D,n){n.r(D),n.d(D,{default:function(){return ge}});var W=n(13311),k=n.n(W),U=n(42035),m=n.n(U),S=n(882),t=n(22453),P=n(76077),N=n(11246),Z=n(72624),K=n(19612),$=n(2821),I=n(8951),g=n(2784),a=n(44433),l=n(6731),c=n(58541),f=n(4513),p=n(73306),v=n(45753),i=n(23985),x={"step-one":"step-one___NJoA0","form-item-label":"form-item-label___fP07_","info-icon":"info-icon___TDv0O","opt-item":"opt-item___FI8m1","opt-title":"opt-title___J4gKX"},e=n(52322);function j(R){var Y=R.formRef,b=R.changeFormValue,y=R.formValue,V=(0,g.useRef)(null);return(0,e.jsx)("div",{className:x["step-one"],children:(0,e.jsxs)(c.Z,{layout:"vertical",ref:Y,children:[(0,e.jsx)(c.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.knowledgeBaseName",dm:"\u77E5\u8BC6\u5E93\u540D\u79F0"}),required:!0,children:(0,e.jsx)(f.Z,{className:x.input,value:y.name,onChange:function(o){var u=o.target.value;b({name:u})},showCount:!0,maxLength:15,placeholder:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.enterKnowledgeBaseName",dm:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u540D\u79F0"}),onBlur:function(){V.current&&(clearTimeout(V.current),V.current=null)}})}),(0,e.jsx)(c.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.knowledgeBaseDescription",dm:"\u77E5\u8BC6\u5E93\u63CF\u8FF0"}),name:"description",children:(0,e.jsx)(f.Z.TextArea,{placeholder:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.enterKnowledgeBaseDescription",dm:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u63CF\u8FF0"}),value:y.description,style:{height:100},onChange:function(o){b({description:o.target.value})}})}),(0,e.jsx)(c.Z.Item,{label:(0,e.jsxs)("div",{className:x["form-item-label"],children:[(0,e.jsx)("span",{children:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.embeddingModel",dm:"Embedding\u6A21\u578B"})}),(0,e.jsx)(p.Z,{title:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.modelConvertTextToVector",dm:"\u7528\u4E8E\u5C06\u6587\u672C\u8F6C\u6362\u4E3A\u5411\u91CF\u8868\u793A\u7684\u6A21\u578B\uFF0C\u80FD\u628A\u6587\u672C\u4FE1\u606F\u6620\u5C04\u5230\u4F4E\u7EF4\u7A20\u5BC6\u5411\u91CF\u7A7A\u95F4\uFF0C\u4FBF\u4E8E\u8BA1\u7B97\u673A\u7406\u89E3\u6587\u672C\u8BED\u4E49\uFF0C\u652F\u6301\u540E\u7EED\u7684\u76F8\u4F3C\u6027\u8BA1\u7B97\u7B49\u64CD\u4F5C"}),children:(0,e.jsx)(v.Z,{type:"spark-info-line",className:x["info-icon"]})})]}),required:!0,children:(0,e.jsx)(i.Z,{value:y.embedding_value,modelType:"text_embedding",onChange:function(o){b({embedding_value:o,embedding_model:o==null?void 0:o.split("@@@")[1],embedding_provider:o==null?void 0:o.split("@@@")[0]})}})}),(0,e.jsx)(c.Z.Item,{label:(0,e.jsxs)("div",{className:x["form-item-label"],children:[(0,e.jsx)("span",{children:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.rerankModel",dm:"Rerank\u6A21\u578B"})}),(0,e.jsx)(p.Z,{title:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.rerankModelReorderResults",dm:"Rerank\u6A21\u578B\u5728\u68C0\u7D22\u51FA\u76F8\u5173\u7ED3\u679C\u540E\uFF0C\u5BF9\u7ED3\u679C\u8FDB\u884C\u91CD\u65B0\u6392\u5E8F\uFF0C\u901A\u8FC7\u66F4\u7CBE\u51C6\u7684\u7B97\u6CD5\u8C03\u6574\u7ED3\u679C\u987A\u5E8F\uFF0C\u4F7F\u76F8\u5173\u6027\u66F4\u9AD8\u7684\u5185\u5BB9\u6392\u5728\u524D\u5217\uFF0C\u63D0\u5347\u68C0\u7D22\u7ED3\u679C\u8D28\u91CF\u3002"}),children:(0,e.jsx)(v.Z,{type:"spark-info-line",className:x["info-icon"]})})]}),required:!0,children:(0,e.jsx)(i.Z,{value:y.rerank_value,modelType:"rerank",onChange:function(o){b({rerank_value:o,rerank_model:o==null?void 0:o.split("@@@")[1],rerank_provider:o==null?void 0:o.split("@@@")[0]})}})}),(0,e.jsx)(c.Z.Item,{label:(0,e.jsxs)("div",{className:x["form-item-label"],children:[(0,e.jsx)("span",{children:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.similarityThreshold",dm:"\u76F8\u4F3C\u5EA6\u9608\u503C"})}),(0,e.jsx)(p.Z,{title:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.thresholdMeasureSimilarity",dm:"\u7528\u4E8E\u8861\u91CF\u6587\u672C\u6216\u6570\u636E\u95F4\u76F8\u4F3C\u7A0B\u5EA6\u7684\u4E34\u754C\u503C,\u5F53\u8BA1\u7B97\u51FA\u7684\u6587\u672C\u76F8\u4F3C\u5EA6\u8FBE\u5230\u6216\u8D85\u8FC7\u8BE5\u503C\u65F6\uFF0C\u4F1A\u8FD4\u56DE\u8BE5\u6587\u672C \u3002"}),children:(0,e.jsx)(v.Z,{type:"spark-info-line",className:x["info-icon"]})})]}),children:(0,e.jsx)(l.Z,{min:.01,max:.99,step:.01,style:{width:480},value:y.similarity_threshold,onChange:function(o){b({similarity_threshold:o})}})}),(0,e.jsx)(c.Z.Item,{label:(0,e.jsxs)("div",{className:x["form-item-label"],children:[(0,e.jsx)("span",{children:"Topk"}),(0,e.jsx)(p.Z,{title:t.Z.get({id:"main.pages.Knowledge.components.StepOne.index.topKReturnObjects",dm:"top-k\u4EE3\u8868\u91CD\u6392\u540E\u8FD4\u56DE\u7684\u7B26\u5408\u76F8\u4F3C\u5EA6\u8981\u6C42\u7684\u5BF9\u8C61\u4E2A\u6570"}),children:(0,e.jsx)(v.Z,{type:"spark-info-line",className:x["info-icon"]})})]}),children:(0,e.jsx)(l.Z,{min:1,max:10,step:1,style:{width:480},value:y.top_k,onChange:function(o){b({top_k:o})}})})]})})}var z=n(63993),L=n(12323),G=n.n(L),oe=n(49616),re=n.n(oe),de=n(63260),se=n.n(de),ce=n(12990),ie=n(36488),Q=n(53707),me=n(91030),E={"step-two":"step-two___AxLCO","form-item-label":"form-item-label___na5KI","info-icon":"info-icon___rHROs","upload-dragger":"upload-dragger___B98o_","upload-dragger-icon":"upload-dragger-icon___QRAvL","upload-dragger-title":"upload-dragger-title___SaQRF","upload-dragger-desc":"upload-dragger-desc___lxyVN","form-item-label-text":"form-item-label-text___CqGnf","form-item-label-desc":"form-item-label-desc___IX9sn","used-tags":"used-tags___HihNG","used-tags-item":"used-tags-item___V6dQN","upload-dragger-item":"upload-dragger-item___MJ5kG","upload-dragger-img":"upload-dragger-img___nLFXY","upload-dragger-format":"upload-dragger-format___aUllt","upload-dragger-info":"upload-dragger-info___Pbmco","upload-dragger-progress":"upload-dragger-progress___DgsLA","remove-icon":"remove-icon___wrQ7Q"};function ue(R){var Y=R.formRef,b=R.setFileList,y=R.fileList,V=R.setUploadingCount,O=R.uploadingCount,o=(0,g.useRef)(!1),u=function(r){var s=(r==null?void 0:r.toUpperCase())==="PPTX"?"PPT":r==null?void 0:r.toUpperCase();return(0,e.jsx)(ce.Z,{type:s,className:E["upload-dragger-format"]})};return(0,e.jsx)("div",{className:E["step-two"],children:(0,e.jsx)(c.Z,{layout:"vertical",ref:Y,children:(0,e.jsx)(c.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.components.StepTwo.index.dataUpload",dm:"\u6570\u636E\u4E0A\u4F20"})+"(".concat(y==null?void 0:y.length,"/50)"),valuePropName:"upload",children:(0,e.jsx)(Q.Z.Dragger,{multiple:!0,disabled:y.length>=50||O>0,defaultFileList:y,accept:".pdf,.doc,.txt,.md,.ppt,.docx,.pptx",customRequest:function(r){V(function(s){return s+1}),(0,ie.ZP)({file:r.file,category:"document",onProgress:function(h){var C,B=h.percent;r.file.percent=B,(C=r.onProgress)===null||C===void 0||C.call(r,{percent:B})}}).then(function(){var s=se()(G()().mark(function h(C){var B;return G()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return C.percent=1,M.next=3,(0,ie.pC)(C.path);case 3:r.file.url=M.sent,(B=r.onSuccess)===null||B===void 0||B.call(r,C),b(function(q){return[].concat(re()(q),[C])});case 6:case"end":return M.stop()}},h)}));return function(h){return s.apply(this,arguments)}}()).catch(function(s){var h;(h=r.onError)===null||h===void 0||h.call(r,s)}).finally(function(){V(function(s){return s-1})})},beforeUpload:function(r,s){if(o.current=!1,y.length+s.length>50||s.length>50)return o.current||(K.Z.destroy(),K.Z.error(t.Z.get({id:"main.pages.Knowledge.components.StepTwo.index.maxUpload50Files",dm:"\u6700\u591A\u53EA\u80FD\u4E0A\u4F20 50 \u4E2A\u6587\u4EF6"})),o.current=!0),Q.Z.LIST_IGNORE;var h=/\.(pdf|doc|txt|md|ppt|pptx|docx)$/i.test(r.name),C=r.size/1024/1024<=100,B=/\.(png|jpg|jpeg|gif)$/i.test(r.name)?r.size/1024/1024<=20:!0;return h?C?B?!0:(K.Z.error(t.Z.get({id:"main.pages.Knowledge.components.StepTwo.index.singleImageSizeLimit20MB",dm:"\u5355\u4E2A\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC720MB"})),Q.Z.LIST_IGNORE):(K.Z.error(t.Z.get({id:"main.pages.Knowledge.components.StepTwo.index.singleFileSizeLimit100MB",dm:"\u5355\u4E2A\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100MB"})),Q.Z.LIST_IGNORE):(K.Z.error(t.Z.get({id:"main.pages.Knowledge.Detail.components.UploadModal.index.supportedFormats",dm:"\u4EC5\u652F\u6301\u4E0A\u4F20.pdf\u3001.doc\u3001.txt\u3001.md\u3001.ppt\u3001.docx\u3001.pptx\u7B49\u683C\u5F0F\u7684\u6587\u4EF6"})),Q.Z.LIST_IGNORE)},listType:"picture",onRemove:function(r){var s=y.filter(function(h){var C;return h.path!==((C=r.response)===null||C===void 0?void 0:C.path)});b(s),s.length<50&&(o.current=!1)},showUploadList:{removeIcon:(0,e.jsx)(v.Z,{type:"spark-delete-line",className:E["remove-icon"],size:20}),showRemoveIcon:!0},iconRender:function(r){var s,h=r.name,C=(h==null||(s=h.split("."))===null||s===void 0||(s=s.pop())===null||s===void 0?void 0:s.toUpperCase())||"TXT";return u(C)},children:(0,e.jsxs)(me.Z,{vertical:!0,align:"center",justify:"center",className:E["upload-dragger"],children:[(0,e.jsx)(v.Z,{type:"spark-upload-line",className:E["upload-dragger-icon"]}),(0,e.jsx)("div",{className:E["upload-dragger-title"],children:t.Z.get({id:"main.pages.Knowledge.components.StepTwo.index.clickOrDragToUploadLocalFile",dm:"\u70B9\u51FB\u6216\u62D6\u62FD\u4E0A\u4F20\u672C\u5730\u6587\u4EF6"})}),(0,e.jsx)("div",{className:E["upload-dragger-desc"],children:t.Z.get({id:"main.pages.Knowledge.components.StepTwo.index.supportedFileFormats",dm:"\u652F\u6301.pdf\u3001.doc\u3001.txt\u3001.md\u3001.ppt\u3001.docx\u3001.pptx\u7B49\u683C\u5F0F\u7684\u6587\u4EF6\uFF0C"})}),(0,e.jsx)("div",{className:E["upload-dragger-desc"],children:t.Z.get({id:"main.pages.Knowledge.components.StepTwo.index.singleFileMax100MBOr1000PagesSingleImageMax20MB",dm:"\u5355\u4E2A\u6587\u4EF6\u6700\u5927100MB\u62161000\u9875\uFF0C\u5355\u4E2A\u56FE\u7247\u6700\u5927\u9650\u523620MB"})})]})})})})})}var w={container:"container___WA1Nr",steps:"steps___Ja7SI",content:"content___eQDFd","steps-title":"steps-title___zJY2e","steps-icon":"steps-icon___nSbWi","confirm-title":"confirm-title___fqmFj","confirm-content":"confirm-content___G7tut","warning-icon":"warning-icon___anCzW",footer:"footer___BOdNN","btn-group":"btn-group___vd6sE",divider:"divider____CtWI"};function ge(){var R=(0,g.useRef)(null),Y=(0,g.useState)(!1),b=m()(Y,2),y=b[0],V=b[1],O=(0,$.Z)({isChanged:!1,quitConfirm:!1,step:0,formValue:{name:"",description:"",enable_rewrite:!1,embedding_value:"",embedding_model:"",embedding_provider:"",rerank_value:"",rerank_model:"",rerank_provider:"",similarity_threshold:.2,top_k:3,sourceType:"file",upload:"",tags:[],meta:!1,chunk_type:"length",regex:"",chunk_size:600,chunk_overlap:100,fileList:[]},countdown:3}),o=m()(O,2),u=o[0],F=o[1],r=(0,g.useState)([]),s=m()(r,2),h=s[0],C=s[1],B=(0,g.useState)(0),H=m()(B,2),M=H[0],q=H[1],ee=function(){N.Z.warning({title:(0,e.jsx)("span",{className:w["confirm-title"],children:t.Z.get({id:"main.pages.Knowledge.Create.index.confirmDiscardCreation",dm:"\u786E\u8BA4\u653E\u5F03\u521B\u5EFA\u77E5\u8BC6\u5E93\u5417"})}),content:(0,e.jsx)("span",{className:w["confirm-content"],children:t.Z.get({id:"main.pages.Knowledge.Create.index.discardCreationDataWillNotBeSaved",dm:"\u653E\u5F03\u521B\u5EFA\u540E\u60A8\u521A\u521A\u586B\u5199\u7684\u6570\u636E\u5C06\u4E0D\u4F1A\u88AB\u4FDD\u5B58\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C"})}),okText:t.Z.get({id:"main.pages.Knowledge.Create.index.confirmDiscard",dm:"\u786E\u8BA4\u653E\u5F03"}),cancelText:t.Z.get({id:"main.pages.Knowledge.Create.index.continueEditing",dm:"\u7EE7\u7EED\u7F16\u8F91"}),onOk:function(){a.m8.push("/knowledge")},onCancel:function(){F({quitConfirm:!1})}})},ne=function(T){F(function(d){return k()(k()({},d),{},{isChanged:!0,formValue:k()(k()({},d.formValue),T)})})},te=function(){return new Promise(function(T,d){var A=u.formValue;if(u.step===0){var _;if(!((_=A.name)!==null&&_!==void 0&&_.trim())){d(t.Z.get({id:"main.pages.Knowledge.Create.index.pleaseEnterKnowledgeBaseName",dm:"\u8BF7\u5148\u586B\u5199\u77E5\u8BC6\u5E93\u540D\u79F0"}));return}if(!A.embedding_model){d(t.Z.get({id:"main.pages.Knowledge.Create.index.pleaseSelectEmbeddingModel",dm:"\u8BF7\u5148\u9009\u62E9Embedding\u6A21\u578B"}));return}if(!A.rerank_model){d(t.Z.get({id:"main.pages.Knowledge.Create.index.pleaseSelectRerankModel",dm:"\u8BF7\u5148\u9009\u62E9Rerank\u6A21\u578B"}));return}}T(A)})},le=function(T){te().then(function(){var d=u.formValue,A={name:d.name,description:d.description,process_config:{chunk_type:d.chunk_type,chunk_size:d.chunk_size,chunk_overlap:d.chunk_overlap},index_config:{embedding_provider:d.embedding_provider,embedding_model:d.embedding_model},search_config:{top_k:d.top_k,similarity_threshold:d.similarity_threshold,rerank_provider:d.rerank_provider,rerank_model:d.rerank_model}};(0,P.eb)(A).then(function(_){V(!0),T==="done"&&h.length&&pe(_);var ae=u.countdown=3,he=setInterval(function(){ae-=1,F({countdown:ae}),ae===0&&(clearInterval(he),a.m8.push("/knowledge"))},1e3)})})},pe=function(T){var d=u.formValue,A={kb_id:T,type:d.sourceType,files:h,process_config:{chunk_type:d.chunk_type,chunk_size:d.chunk_size,chunk_overlap:d.chunk_overlap}};(0,P.GZ)(A)},fe=function(){return(0,e.jsxs)("div",{className:w.footer,children:[u.step===0&&(0,e.jsxs)("div",{className:w["btn-group"],children:[(0,e.jsx)(Z.Z,{type:"primary",onClick:function(){te().then(function(){F({step:1})}).catch(function(d){return K.Z.warning(d)})},children:t.Z.get({id:"main.pages.Knowledge.Create.index.nextStep",dm:"\u4E0B\u4E00\u6B65"})}),(0,e.jsx)(Z.Z,{onClick:ee,children:t.Z.get({id:"main.pages.Knowledge.Create.index.cancel",dm:"\u53D6\u6D88"})}),(0,e.jsx)("div",{className:w.divider}),(0,e.jsx)(Z.Z,{type:"default",onClick:function(){return le("next")},children:t.Z.get({id:"main.pages.Knowledge.Create.index.directCreate",dm:"\u76F4\u63A5\u521B\u5EFA"})})]}),u.step===1&&(0,e.jsxs)("div",{className:w["btn-group"],children:[(0,e.jsx)(Z.Z,{type:"default",onClick:function(){F({step:0})},disabled:M>0,children:t.Z.get({id:"main.pages.Knowledge.Create.index.previousStep",dm:"\u4E0A\u4E00\u6B65"})}),(0,e.jsx)(Z.Z,{type:"primary",onClick:function(){te().then(function(){F({step:2})}).catch(function(d){return K.Z.warning(d)})},disabled:M>0,children:t.Z.get({id:"main.pages.Knowledge.Create.index.nextStep",dm:"\u4E0B\u4E00\u6B65"})}),(0,e.jsx)(Z.Z,{onClick:ee,children:t.Z.get({id:"main.pages.Knowledge.Create.index.cancel",dm:"\u53D6\u6D88"})})]}),u.step===2&&(0,e.jsxs)("div",{className:w["btn-group"],children:[(0,e.jsx)(Z.Z,{type:"default",onClick:function(){F({step:1})},children:t.Z.get({id:"main.pages.Knowledge.Create.index.previousStep",dm:"\u4E0A\u4E00\u6B65"})}),(0,e.jsx)(Z.Z,{type:"primary",onClick:function(){return le("done")},children:t.Z.get({id:"main.pages.Knowledge.Create.index.complete",dm:"\u5B8C\u6210"})}),(0,e.jsx)(Z.Z,{onClick:ee,children:t.Z.get({id:"main.pages.Knowledge.Create.index.cancel",dm:"\u53D6\u6D88"})})]})]})};return(0,e.jsxs)(S.Z,{breadcrumbLinks:[{title:t.Z.get({id:"main.pages.Knowledge.Create.index.knowledgeBase",dm:"\u77E5\u8BC6\u5E93"}),path:"/knowledge"},{title:t.Z.get({id:"main.pages.Knowledge.Create.index.createKnowledgeBase",dm:"\u521B\u5EFA\u77E5\u8BC6\u5E93"})}],bottom:fe(),children:[(0,e.jsxs)("div",{className:w.container,children:[(0,e.jsx)("div",{className:w.steps,children:(0,e.jsx)(I.Z,{current:u.step,labelPlacement:"vertical",size:"small",items:[{title:(0,e.jsx)("span",{className:w["steps-title"],children:t.Z.get({id:"main.pages.Knowledge.Create.index.knowledgeBaseInformation",dm:"\u77E5\u8BC6\u5E93\u4FE1\u606F"})}),status:u.step===0?"process":"finish"},{title:(0,e.jsx)("span",{className:w["steps-title"],children:t.Z.get({id:"main.pages.Knowledge.Create.index.selectData",dm:"\u9009\u62E9\u6570\u636E"})}),status:u.step===2?"finish":"process"},{title:(0,e.jsx)("span",{className:w["steps-title"],children:t.Z.get({id:"main.pages.Knowledge.Create.index.dataProcessing",dm:"\u6570\u636E\u5904\u7406"})}),status:"process"}]})}),u.step===0&&(0,e.jsx)("div",{className:w.content,children:(0,e.jsx)(j,{formRef:R,changeFormValue:ne,formValue:u.formValue})}),u.step===1&&(0,e.jsx)("div",{className:w.content,children:(0,e.jsx)(ue,{formRef:R,changeFormValue:ne,formValue:u.formValue,setFileList:C,fileList:h,setUploadingCount:q,uploadingCount:M})}),u.step===2&&(0,e.jsx)("div",{className:w.content,children:(0,e.jsx)(z.Z,{formRef:R,changeFormValue:ne,formValue:u.formValue})})]}),y&&(0,e.jsx)(N.Z,{type:"success",title:t.Z.get({id:"main.pages.Knowledge.Create.index.knowledgeBaseCreatedSuccessfully",dm:"\u77E5\u8BC6\u5E93\u521B\u5EFA\u6210\u529F"}),open:!0,footer:(0,e.jsx)(Z.Z,{type:"primary",onClick:function(){V(!1),a.m8.push("/knowledge")},children:t.Z.get({id:"main.pages.Knowledge.Create.index.returnToKnowledgeBaseManagementVar1S",dm:"\u8FD4\u56DE\u77E5\u8BC6\u5E93\u7BA1\u7406 \uFF08{var1}S\uFF09"},{var1:u.countdown})}),children:t.Z.get({id:"main.pages.Knowledge.Create.index.congratulationsYouHaveCompletedKnowledgeBaseCreationYouCanGoToConfigureApplication",dm:"\u606D\u559C\uFF0C\u60A8\u5DF2\u5B8C\u6210\u77E5\u8BC6\u5E93\u521B\u5EFA\uFF0C\u53EF\u4EE5\u53BB\u914D\u7F6E\u5E94\u7528\u4E86"})})]})}},63993:function(J,D,n){n.d(D,{x:function(){return p},Z:function(){return v}});var W=n(13311),k=n.n(W),U=n(6731),m=n(22453),S=n(58541),t=n(4513),P=n(91030),N=n(12524),Z=n.n(N),K=n(2784),$=n(87329),I=n.n($),g={"radio-item":"radio-item___H4gtp",title:"title___iVsTA",checkIcon:"checkIcon___YwR51",active:"active___Xbs_P",logoWrap:"logoWrap___hVTvN",disabled:"disabled___TBad7",desc:"desc___YI4wy",top:"top___ltxAD"},a=n(52322);function l(i){return(0,a.jsxs)("div",{onClick:function(){i.disabled||i.isActive||!i.onSelect||i.onSelect()},className:Z()(g["radio-item"],i.className,I()(I()({},g.active,i.isActive),g.disabled,i.disabled)),children:[(0,a.jsxs)(P.Z,{gap:12,align:"center",className:g.top,children:[!!i.logo&&(0,a.jsx)("div",{style:{backgroundColor:i.logoBg},className:g.logoWrap,children:(0,a.jsx)("img",{src:i.logo,alt:""})}),(0,a.jsx)("div",{className:g.title,children:i.label}),(0,a.jsx)("div",{className:Z()(g.checkIcon,I()(I()({},g.active,i.isActive),g.disabled,i.disabled))})]}),!!i.desc&&(0,a.jsx)("div",{className:g.desc,children:i.desc})]})}var c={"step-three":"step-three___KgCGD","form-item-label":"form-item-label___hlWhg","info-icon":"info-icon___BjjyQ",mcpInstallTypeItem:"mcpInstallTypeItem___BcdyK"},f=[{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByLength",dm:"\u6309\u957F\u5EA6\u5207\u5206"}),value:"length",desc:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.suitableForTokenCount",dm:"\u9002\u5408\u5BF9 Token \u6570\u91CF\u6709\u4E25\u683C\u8981\u6C42\u7684\u573A\u666F\uFF0C\u6BD4\u5982\u4F7F\u7528\u4E0A\u4E0B\u6587\u957F\u5EA6\u8F83\u5C0F\u7684\u6A21\u578B\u65F6\u3002"})},{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByPage",dm:"\u6309\u5206\u9875\u5207\u5206"}),value:"page",desc:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.suitableForIndependentPages",dm:"\u9002\u5408\u6BCF\u9875\u4F20\u8FBE\u72EC\u7ACB\u4E3B\u9898\u7684\u6587\u6863\uFF0C\u8981\u6C42\u4E0D\u540C\u9875\u9762\u7684\u5185\u5BB9\u4E0D\u4F1A\u6DF7\u6742\u5728\u540C\u4E00\u6587\u672C\u5207\u7247\u4E2D\u3002"})},{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByTitle",dm:"\u6309\u6807\u9898\u5207\u5206"}),value:"title",desc:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.suitableForIndependentTitles",dm:"\u9002\u5408\u4E8E\u7528\u6807\u9898\u5212\u5206\u5E76\u4F20\u8FBE\u72EC\u7ACB\u4E3B\u9898\u7684\u6587\u6863,\u8981\u6C42\u4E0D\u540C\u7EA7\u6807\u9898\u4E0B\u7684\u5185\u5BB9\u4E0D\u4F1A\u6DF7\u6742\u5728\u540C\u4E00\u6587\u672C\u5207\u7247\u4E2D\u3002"})},{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByRegex",dm:"\u6309\u6B63\u5219\u5207\u5206"}),value:"regex",desc:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.splitByRegexExpression",dm:"\u4F9D\u636E\u8BBE\u7F6E\u7684\u6B63\u5219\u8868\u8FBE\u5F0F,\u5BF9\u77E5\u8BC6\u5E93\u4E2D\u7684\u6587\u672C\u8FDB\u884C\u5207\u5206\u3002"})}],p=function(x){var e=x.value,j=x.onChange,z=x.disabled,L=x.className;return(0,a.jsx)(P.Z,{gap:12,wrap:!0,children:f.map(function(G){return(0,K.createElement)(l,k()(k()({className:Z()(c.mcpInstallTypeItem,L),onSelect:function(){j(G.value)},isActive:e===G.value,disabled:z},G),{},{key:G.value}))})})};function v(i){var x=i.formRef,e=i.changeFormValue,j=i.formValue;return(0,a.jsx)("div",{className:c["step-three"],children:(0,a.jsxs)(S.Z,{layout:"vertical",ref:x,children:[(0,a.jsx)(S.Z.Item,{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.chunkSplittingMethod",dm:"Chunk\u5207\u5206\u65B9\u5F0F"}),children:(0,a.jsx)(p,{onChange:function(L){e({chunk_type:L})},value:j.chunk_type})}),j.chunk_type==="regex"&&(0,a.jsx)(S.Z.Item,{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.inputRegularExpression",dm:"\u8F93\u5165\u6B63\u5219\u8868\u8FBE\u5F0F"}),required:!0,children:(0,a.jsx)(t.Z.TextArea,{style:{height:58},value:j.regex,onChange:function(L){e({regex:L.target.value})}})}),j.chunk_type!=="regex"&&(0,a.jsx)(S.Z.Item,{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.segmentEstimatedLength",dm:"\u5206\u6BB5\u9884\u4F30\u957F\u5EA6"}),children:(0,a.jsx)(U.Z,{min:10,max:6e3,step:1,style:{width:480},isShowMarker:!0,value:j.chunk_size,onChange:function(L){e({chunk_size:L})}})}),(j.chunk_type==="length"||j.chunk_type==="regex")&&(0,a.jsx)(S.Z.Item,{label:m.Z.get({id:"main.pages.Knowledge.components.StepThree.index.segmentOverlapLength",dm:"\u5206\u6BB5\u91CD\u53E0\u957F\u5EA6"}),children:(0,a.jsx)(U.Z,{min:1,max:1024,step:1,style:{width:480},isShowMarker:!0,value:j.chunk_overlap,onChange:function(L){e({chunk_overlap:L})}})})]})})}},36488:function(J,D,n){n.d(D,{qO:function(){return N},ZP:function(){return Z},pC:function(){return t}});var W=n(12323),k=n.n(W),U=n(63260),m=n.n(U),S=n(85545);function t(a){return P.apply(this,arguments)}function P(){return P=m()(k()().mark(function a(l){var c,f;return k()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(c=window.g_config.config.upload_method,c!==N.OSS){v.next=6;break}return v.next=4,(0,S.ZP)({url:"/console/v1/files/get-preview-url",method:"GET",params:{path:l}});case 4:return f=v.sent,v.abrupt("return",f.data.data);case 6:if(c!==N.FILE){v.next=8;break}return v.abrupt("return","".concat(S.v2.get(),"/console/v1/files/download?path=").concat(encodeURIComponent(l),"&preview=true&access_token=").concat(S.nP.get()));case 8:case"end":return v.stop()}},a)})),P.apply(this,arguments)}var N=function(a){return a.OSS="oss",a.FILE="file",a}({});function Z(a){var l=window.g_config.config.upload_method;return l===N.OSS?$(a):(l===N.FILE,K(a))}function K(a){var l=new FormData;return l.append("category",a.category),l.append("files",a.file),(0,S.ZP)({method:"POST",url:"/console/v1/files/upload",data:l,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(f){var p;(p=a.onProgress)===null||p===void 0||p.call(a,{percent:Math.min(1,f.loaded/((f==null?void 0:f.total)||1))})}}).then(function(c){return c.data.data[0]})}function $(a){return I.apply(this,arguments)}function I(){return I=m()(k()().mark(function a(l){var c,f,p;return k()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,S.ZP)({url:"/console/v1/files/upload-policies",method:"POST",data:{files:[{name:l.file.name}],category:l.category}});case 2:return c=i.sent,f=c.data.data[0],p=new FormData,p.append("OSSAccessKeyId",f.access_id),p.append("success_action_status","200"),p.append("policy",f.policy),p.append("signature",f.signature),p.append("key",f.path),p.append("file",l.file),i.abrupt("return",(0,S.ZP)({method:"POST",url:f.host,data:p,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var j;(j=l.onProgress)===null||j===void 0||j.call(l,{percent:Math.min(1,e.loaded/((e==null?void 0:e.total)||1))})}}).then(function(){return{extension:g(l.file.name),name:l.file.name,path:f.path,size:l.file.size}}));case 12:case"end":return i.stop()}},a)})),I.apply(this,arguments)}function g(a){var l=a.lastIndexOf(".");return(l>0?a.slice(l):"").replace(/\./,"")}}}]);
