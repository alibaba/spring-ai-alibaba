"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[9411],{86700:function(pe,W,a){a.r(W),a.d(W,{default:function(){return Se}});var k=a(12323),s=a.n(k),L=a(63260),u=a.n(L),j=a(42035),M=a.n(j),f=a(882),n=a(22453),w=a(13341),J=a(76042),K=a(11246),G=a(19612),V=a(90257),se=a(78308),F=a(72624),Y=a(73306),R=a(77813),x=a(2784),$=a(10289),i=a(51034),c=a(18561),l=a(91030),y=a(87329),r=a.n(y),X=a(58541),te=a(56733),ve=a(4513),he=a(93e3),ie=a(45753),fe=a(12901),ge=a(12524),be=a.n(ge),d={"tool-card":"tool-card___WLqtY","tool-header":"tool-header___z1YGx","header-main":"header-main___LDcs3","title-row":"title-row___IH49C","tool-name":"tool-name___j4Ih3","expand-icon":"expand-icon___tq4MI","tool-icon":"tool-icon____H03s","tool-description":"tool-description___JnMHL","tool-content":"tool-content___W2twr","tool-form":"tool-form____0BqX","form-label":"form-label___WLK4L",required:"required___Iy2qc","form-label-type":"form-label-type___htLoM","form-description":"form-description___NtFk9","form-actions":"form-actions___IH9ls","execute-status":"execute-status___BhnhC","success-icon":"success-icon___WxW8k","result-container":"result-container___ZPPRi"},e=a(52322),Pe=function(_){var h=_.server_Code,p=_.tool,E=_.onExecute,T=_.btnDisabled,C=T===void 0?!1:T,S=(0,x.useState)(!1),B=M()(S,2),g=B[0],t=B[1],v=X.Z.useForm(),oe=M()(v,1),Q=oe[0],de=(0,x.useState)(null),z=M()(de,2),A=z[0],q=z[1],ue=(0,x.useState)(!1),ee=M()(ue,2),ce=ee[0],N=ee[1],D=function(){t(!g)},U=function(){var re=u()(s()().mark(function O(b){var H;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:o.prev=0,Object.keys(b).forEach(function(m){var P,ne=b[m],me=(P=p.input_schema.properties)===null||P===void 0?void 0:P[m];if(me&&ne&&(["array","object"].includes(me.type)&&(b[m]=JSON.parse(ne)),me.type==="number")){if(isNaN(Number(ne)))throw new Error(n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.var1NeedsPureNumbers",dm:"{var1}\u9700\u8981\u8F93\u5165\u7EAF\u6570\u5B57"},{var1:m}));b[m]=Number(ne)}}),o.next=8;break;case 4:return o.prev=4,o.t0=o.catch(0),G.Z.warning(n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.parameterParsingFailedCheckParameterFormat",dm:"\u53C2\u6570\u89E3\u6790\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u53C2\u6570\u683C\u5F0F"})),o.abrupt("return");case 8:return o.prev=8,N(!0),o.next=12,E({server_code:h,tool_name:p.name,tool_params:b});case 12:H=o.sent,q({success:!0,result:H}),o.next=20;break;case 16:o.prev=16,o.t1=o.catch(8),q({success:!1,result:o.t1}),console.error("Form validation failed:",o.t1);case 20:return o.prev=20,N(!1),o.finish(20);case 23:case"end":return o.stop()}},O,null,[[0,4],[8,16,20,23]])}));return function(b){return re.apply(this,arguments)}}(),_e=function(O,b){return b.type==="boolean"?(0,e.jsxs)(te.ZP.Group,{children:[(0,e.jsx)(te.ZP,{value:!0,children:"True"}),(0,e.jsx)(te.ZP,{value:!1,children:"False"})]}):b.type==="object"?(0,e.jsx)(ve.Z.TextArea,{placeholder:n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.enterVar1",dm:"\u8BF7\u8F93\u5165{var1}"},{var1:O})}):(0,e.jsx)(ve.Z,{placeholder:n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.enterVar1",dm:"\u8BF7\u8F93\u5165{var1}"},{var1:O})})},I=function(){var O=p.input_schema,b=O.properties,H=O.required,ae=H===void 0?[]:H,o=Object.keys(b).sort(function(m){return ae.includes(m)?-1:1});return o.map(function(m){var P=b[m];return(0,e.jsx)(X.Z.Item,{label:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:d["form-label"],children:[(0,e.jsx)("div",{children:m}),(0,e.jsx)("div",{className:d["form-label-type"],children:P.type&&" (".concat(P.type,")")}),ae.includes(m)&&(0,e.jsx)("span",{className:d.required,children:"*"})]}),(P==null?void 0:P.description)&&(0,e.jsx)("div",{className:d["form-description"],children:P.description})]}),name:m,rules:[{required:ae.includes(m),message:n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.enterVar1",dm:"\u8BF7\u8F93\u5165{var1}"},{var1:m})}],required:!1,initialValue:P.type==="boolean"?!1:void 0,children:_e(m,P)},m)})};return(0,e.jsxs)(he.Z,{className:d["tool-card"],children:[(0,e.jsx)("div",{className:d["tool-header"],onClick:D,children:(0,e.jsx)("div",{className:d["header-main"],children:(0,e.jsxs)("div",{className:d["title-row"],children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(ie.Z,{className:d["tool-icon"],type:"spark-tool-line"}),(0,e.jsx)("span",{className:d["tool-name"],children:p.name})]}),(0,e.jsx)(ie.Z,{type:g?"spark-up-line":"spark-down-line",className:be()(d["expand-icon"],r()({},d.expanded,g))})]})})}),g&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:d["tool-description"],children:p.description}),(0,e.jsxs)("div",{className:d["tool-content"],children:[(0,e.jsxs)(X.Z,{form:Q,onFinish:U,layout:"vertical",className:d["tool-form"],children:[I(),(0,e.jsx)(X.Z.Item,{style:{marginBottom:0},children:(0,e.jsxs)("div",{className:d["form-actions"],children:[(0,e.jsx)(Y.Z,{title:C?n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.openServiceFirst",dm:"\u8BF7\u5148\u5F00\u901A\u6B64MCP\u670D\u52A1\u540E\u6D4B\u8BD5"}):"",children:(0,e.jsx)(F.Z,{loading:ce,type:"primary",htmlType:"submit",disabled:C,children:n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.run",dm:"\u8FD0\u884C"})})}),(A==null?void 0:A.success)&&(0,e.jsxs)("div",{className:d["execute-status"],children:[(0,e.jsx)(ie.Z,{type:"spark-check-circle-line",className:d["success-icon"]}),(0,e.jsx)("span",{children:n.Z.get({id:"main.pages.MCP.components.ToolPanel.index.runSuccess",dm:"\u8FD0\u884C\u6210\u529F"})})]})]})})]}),A&&(0,e.jsx)("div",{className:d["result-container"],children:(0,e.jsx)(fe.ZP,{theme:"dark",language:"json",value:JSON.stringify(A.result,null,2)})})]})]})]})},je=Pe,Me={container:"container___miPEh"},Ce=function(_){var h=_.tools,p=_.code,E=_.activated,T=function(){var C=u()(s()().mark(function S(B){var g;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,(0,w.I9)(B);case 3:return g=v.sent,G.Z.success(n.Z.get({id:"main.pages.MCP.components.McpTools.index.executionSuccessful",dm:"\u6267\u884C\u6210\u529F"})),v.abrupt("return",g==null?void 0:g.data);case 8:v.prev=8,v.t0=v.catch(0);case 10:case"end":return v.stop()}},S,null,[[0,8]])}));return function(B){return C.apply(this,arguments)}}();return(0,e.jsx)("div",{className:Me.container,children:(0,e.jsx)(c.Z,{direction:"vertical",style:{width:"100%"},children:h!=null&&h.length?h.map(function(C){return(0,e.jsx)(je,{server_Code:p,tool:C,onExecute:T,btnDisabled:!E},C.name)}):(0,e.jsx)(l.Z,{className:"h-full",align:"center",justify:"center",children:(0,e.jsx)(i.Z,{description:n.Z.get({id:"main.pages.MCP.components.McpTools.index.serviceStartingPleaseRefreshLater",dm:"\u670D\u52A1\u542F\u52A8\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u5237\u65B0"})})})})})},De=Ce,xe=a(99604),Z={"overview-container":"overview-container___zCWnz",loading:"loading___tGPWp","info-item":"info-item___IKCSG","info-label":"info-label___MuPYs","info-value":"info-value___yFuz0","info-value-link":"info-value-link___KBuZh","code-container":"code-container___Oz3bn","code-block":"code-block___ILUpl"},ye=function(_){var h=_.detail,p=(0,xe.sA)().isDarkMode,E=function(C,S){return(0,e.jsxs)("div",{className:Z["info-item"],children:[(0,e.jsx)("div",{className:Z["info-label"],children:C}),(0,e.jsx)("div",{className:Z["info-value"],children:S})]})};return h?(0,e.jsxs)("div",{className:Z["overview-container"],children:[E(n.Z.get({id:"main.pages.MCP.components.Overview.index.serviceName",dm:"\u670D\u52A1\u540D\u79F0"}),h.name),E(n.Z.get({id:"main.pages.MCP.components.Overview.index.serviceDescription",dm:"\u670D\u52A1\u63CF\u8FF0"}),h.description),(0,e.jsxs)("div",{className:Z["info-item"],children:[(0,e.jsx)("div",{className:Z["info-label"],children:n.Z.get({id:"main.pages.MCP.components.Overview.index.mcpServiceConfigurationFile",dm:"MCP\u670D\u52A1\u914D\u7F6E\u6587\u4EF6"})}),(0,e.jsx)("div",{className:Z["code-container"],children:(0,e.jsx)(fe.ZP,{className:Z["code-block"],language:"json",theme:p?"dark":"light",value:h.deploy_config,readOnly:!0})})]})]}):(0,e.jsx)(R.Z,{description:n.Z.get({id:"main.pages.MCP.components.Overview.index.noData",dm:"\u6682\u65E0\u6570\u636E"})})},Ze=ye,Ee={"tools-content":"tools-content___oVe1e"},Te=function(){var _=(0,$.s0)(),h=(0,$.UO)(),p=h.id,E=(0,x.useState)("mcp_overview"),T=M()(E,2),C=T[0],S=T[1],B=(0,x.useState)(null),g=M()(B,2),t=g[0],v=g[1],oe=(0,x.useState)(!1),Q=M()(oe,2),de=Q[0],z=Q[1];(0,x.useEffect)(function(){A()},[p]);var A=function(){var N=u()(s()().mark(function D(){var U;return s()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!p){I.next=7;break}return z(!0),I.next=4,(0,w.b4)({server_code:p,need_tools:!0});case 4:U=I.sent,v(U.data),z(!1);case 7:case"end":return I.stop()}},D)}));return function(){return N.apply(this,arguments)}}(),q=function(){t&&K.Z.warning({title:n.Z.get({id:"main.pages.MCP.Detail.confirmDeleteThisMcpService",dm:"\u786E\u8BA4\u5220\u9664\u6B64MCP\u670D\u52A1\u5417"}),children:n.Z.get({id:"main.pages.MCP.Detail.deleteWillNotBeRecoverableAlreadyAddedServicesMayFailPleaseProceedWithCaution",dm:"\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D\uFF0C\u5DF2\u7ECF\u6DFB\u52A0\u8BE5\u670D\u52A1\u7684\u667A\u80FD\u4F53\u53EF\u80FD\u4F1A\u5931\u6548\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\u3002"}),danger:!0,onOk:function(){(0,w.c8)(t.server_code).then(function(){G.Z.success(n.Z.get({id:"main.pages.MCP.Detail.deletionSuccessful",dm:"\u5220\u9664\u6210\u529F"})),_("/mcp")})}})},ue=function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{getPopupContainer:function(U){return U},menu:{items:[{onClick:function(){return q()},danger:!0,label:n.Z.get({id:"main.pages.MCP.Detail.delete",dm:"\u5220\u9664"}),key:"delete"}]},children:(0,e.jsx)(se.Z,{icon:"spark-more-line",bordered:!1})}),(0,e.jsx)(F.Z,{type:"primary",onClick:function(){return _("/mcp/edit/".concat(p))},children:n.Z.get({id:"main.pages.MCP.Detail.edit",dm:"\u7F16\u8F91"})})]})},ee=[{title:n.Z.get({id:"main.pages.MCP.Detail.mcpManagement",dm:"MCP\u7BA1\u7406"}),path:"/mcp"},{title:(t==null?void 0:t.name)||n.Z.get({id:"main.pages.MCP.Detail.mcpDetails",dm:"MCP\u8BE6\u60C5"})}],ce=function(){return(0,e.jsx)(e.Fragment,{children:t&&(0,e.jsx)(Ze,{detail:t})})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(f.Z,{breadcrumbLinks:t?ee:[],loading:de,tabs:[{label:n.Z.get({id:"main.pages.MCP.Detail.overview",dm:"\u6982\u89C8"}),key:"mcp_overview",children:ce()},{label:n.Z.get({id:"main.pages.MCP.Detail.tools",dm:"\u5DE5\u5177"}),key:"mcp_tools",disabled:(t==null?void 0:t.status)===J.YI.DISABLED,children:t?(0,e.jsx)("div",{className:Ee["tools-content"],children:(0,e.jsx)(De,{tools:(t==null?void 0:t.tools)||[],activated:(t==null?void 0:t.status)===J.YI.ENABLED,code:t==null?void 0:t.server_code})}):(0,e.jsx)(R.Z,{})},{label:(0,e.jsx)(Y.Z,{title:n.Z.get({id:"main.pages.MCP.Detail.comingSoon",dm:"\u656C\u8BF7\u671F\u5F85"}),children:n.Z.get({id:"main.pages.MCP.Detail.resources",dm:"\u8D44\u6E90"})}),key:"mcp_resource",disabled:!0},{label:(0,e.jsx)(Y.Z,{title:n.Z.get({id:"main.pages.MCP.Detail.comingSoon",dm:"\u656C\u8BF7\u671F\u5F85"}),children:n.Z.get({id:"main.pages.MCP.Detail.promptWords",dm:"\u63D0\u793A\u8BCD"})}),key:"mcp_prompt",disabled:!0}],right:ue(),activeTab:C,onTabChange:function(D){S(D)}})})},Se=Te},13341:function(pe,W,a){a.d(W,{BF:function(){return M},I9:function(){return x},Pk:function(){return se},b4:function(){return G},c8:function(){return J},gi:function(){return Y},if:function(){return n}});var k=a(12323),s=a.n(k),L=a(63260),u=a.n(L),j=a(46639);function M(i){return f.apply(this,arguments)}function f(){return f=u()(s()().mark(function i(c){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.W)({url:"/console/v1/mcp-servers",method:"POST",data:c});case 2:return l=r.sent,r.abrupt("return",l.data);case 4:case"end":return r.stop()}},i)})),f.apply(this,arguments)}function n(i){return w.apply(this,arguments)}function w(){return w=u()(s()().mark(function i(c){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.W)({url:"/console/v1/mcp-servers",method:"PUT",data:c});case 2:return l=r.sent,r.abrupt("return",l.data);case 4:case"end":return r.stop()}},i)})),w.apply(this,arguments)}function J(i){return K.apply(this,arguments)}function K(){return K=u()(s()().mark(function i(c){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.W)({url:"/console/v1/mcp-servers/".concat(c),method:"DELETE"});case 2:return l=r.sent,r.abrupt("return",l.data);case 4:case"end":return r.stop()}},i)})),K.apply(this,arguments)}function G(i){return V.apply(this,arguments)}function V(){return V=u()(s()().mark(function i(c){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.W)({url:"/console/v1/mcp-servers/".concat(c.server_code),method:"GET",params:c});case 2:return l=r.sent,r.abrupt("return",l.data);case 4:case"end":return r.stop()}},i)})),V.apply(this,arguments)}function se(i){return F.apply(this,arguments)}function F(){return F=u()(s()().mark(function i(c){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.W)({url:"/console/v1/mcp-servers",method:"GET",params:c});case 2:return l=r.sent,r.abrupt("return",l.data);case 4:case"end":return r.stop()}},i)})),F.apply(this,arguments)}function Y(i){return R.apply(this,arguments)}function R(){return R=u()(s()().mark(function i(c){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.W)({url:"/console/v1/mcp-servers/query-by-codes",method:"POST",data:c});case 2:return l=r.sent,r.abrupt("return",l.data);case 4:case"end":return r.stop()}},i)})),R.apply(this,arguments)}function x(i){return $.apply(this,arguments)}function $(){return $=u()(s()().mark(function i(c){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.W)({url:"/console/v1/mcp-servers/debug-tools",method:"POST",data:c});case 2:return l=r.sent,r.abrupt("return",l.data);case 4:case"end":return r.stop()}},i)})),$.apply(this,arguments)}},76042:function(pe,W,a){a.d(W,{YI:function(){return u},rR:function(){return M},w:function(){return j}});var k=a(87329),s=a.n(k),L=a(22453),u=function(f){return f[f.DISABLED=0]="DISABLED",f[f.ENABLED=1]="ENABLED",f[f.DELETED=3]="DELETED",f}({}),j=s()(s()(s()({},u.DISABLED,{color:"error",text:L.Z.get({id:"main.types.mcp.stopped",dm:"\u5DF2\u505C\u7528"})}),u.ENABLED,{color:"success",text:L.Z.get({id:"main.types.mcp.started",dm:"\u5DF2\u542F\u52A8"})}),u.DELETED,{color:"default",text:L.Z.get({id:"main.types.mcp.deleted",dm:"\u5DF2\u5220\u9664"})}),M=5}}]);
