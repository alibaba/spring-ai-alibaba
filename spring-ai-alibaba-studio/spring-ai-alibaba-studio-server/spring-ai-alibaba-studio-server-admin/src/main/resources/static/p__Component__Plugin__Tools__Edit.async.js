"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[5278],{56388:function(Re,ie,o){o.d(ie,{d:function(){return he}});var Te=o(42035),d=o.n(Te),Ee=o(22453),m=o(2784),B=o(28316),le=function(Q){var H=(0,m.useState)(null),ee=d()(H,2),X=ee[0],Y=ee[1];return(0,m.useEffect)(function(){var e=function(){var t=document.getElementById(Q);t?Y(t):console.warn(Ee.Z.get({id:"main.components.InnerLayout.utils.notFoundTargetElement",dm:"\u627E\u4E0D\u5230\u76EE\u6807\u5143\u7D20 #{var1}"},{var1:Q}))};e()},[Q]),function(e){return X?B.createPortal(e,X):null}},ge=function(){return le("InnerLayoutRight")},I=function(){return le("InnerLayoutBottom")},he=function(){var Q=ge(),H=I(),ee=function(Y){var e={backgroundColor:"var(--ag-ant-color-bg-base)",borderTop:"1px solid var(--ag-ant-color-border-secondary)",padding:"16px 24px",display:"flex",gap:8};return H(m.createElement("div",{style:e},Y))};return{rightPortal:Q,bottomPortal:ee}}},44214:function(Re,ie,o){o.r(ie),o.d(ie,{default:function(){return Ve}});var Te=o(12323),d=o.n(Te),Ee=o(13311),m=o.n(Ee),B=o(63260),le=o.n(B),ge=o(42035),I=o.n(ge),he=o(882),ue=o(56388),Q=o(87329),H=o.n(Q),ee=o(12524),X=o.n(ee),Y={content:"content___wT5AB","step-item":"step-item___XL8Dk",active:"active___m6itL"},e=o(52322);function Pe(s){var C=s.menus,a=s.handleMenuClick,R=s.activeMenuCode;return(0,e.jsx)("div",{className:Y.content,children:C.map(function(w,E){return(0,e.jsxs)("div",{onClick:function(){return a(E)},className:X()(Y["step-item"],H()({},Y.active,E===R)),children:[(0,e.jsx)("span",{}),w]},E)})})}var t=o(22453),se=o(69163),ne=o(58541),V=o(72624),ke=o(19612),Ie=o(2821),Oe=o(65741),x=o(91030),J=o(4513),q=o(51747),xe=o(81596),y=o(2784),we=o(44433),Se=o(49616),de=o.n(Se),te=o(78308),ve={addBtn:"addBtn___rdBGy",formArea:"formArea___xyoWK",formItem:"formItem___yWG5N",deleteBtn:"deleteBtn___EZWf2",label:"label___em46Y",title:"title___UfLjX",content:"content___KlnS2",tip:"tip___snfkf"},fe=5;function Be(s){var C=s.examples,a=C===void 0?[]:C,R=s.onChange,w=s.inputParams,E=(0,y.useState)(!0),M=I()(E,1),K=M[0],S=function(P,c){R(a.map(function(p,j){return j===c?m()(m()({},p),P):p}))},D=function(){a.length>=fe||R([].concat(de()(a),[{query:void 0,parameters:{}}]))},U=function(P){R(a.filter(function(c,p){return P!==p}))};return(0,e.jsx)(e.Fragment,{children:K&&(0,e.jsxs)(x.Z,{className:ve.content,vertical:!0,gap:8,children:[a.map(function(N,P){return(0,e.jsx)("div",{children:(0,e.jsxs)(x.Z,{gap:16,align:"center",className:ve.formArea,children:[(0,e.jsxs)(x.Z,{className:ve.formItem,style:{flex:1,width:100},vertical:!0,gap:8,children:[(0,e.jsxs)(x.Z,{gap:8,className:ve.label,children:[(0,e.jsx)("span",{style:{flex:1,width:"calc(50% - 98px)"},children:t.Z.get({id:"main.pages.Component.Plugin.components.ExampleConfigForm.index.userQuery",dm:"\u7528\u6237\u8F93\u5165Query"})}),(0,e.jsx)("span",{style:{width:180,flexShrink:0},children:t.Z.get({id:"main.pages.Component.Plugin.components.ExampleConfigForm.index.inputParameters",dm:"\u8F93\u5165\u53C2\u6570"})}),(0,e.jsx)(x.Z,{gap:8,style:{flex:1,width:"calc(50% - 98px)"},children:"Value"})]}),(0,e.jsxs)(x.Z,{align:"flex-start",gap:8,children:[(0,e.jsx)(J.Z,{onChange:function(p){return S({query:p.target.value},P)},value:N.query,placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.ExampleConfigForm.index.enterQuery",dm:"\u8BF7\u8F93\u5165query"}),style:{flexShrink:0,width:"calc(50% - 98px)"}}),(0,e.jsx)(x.Z,{style:{flex:1,width:100},vertical:!0,gap:8,children:w.map(function(c,p){var j,Z;return!!((j=c.key)!==null&&j!==void 0&&j.trim())&&(0,e.jsxs)(x.Z,{gap:8,children:[(0,e.jsx)(J.Z,{disabled:!0,style:{width:180,flexShrink:0},value:c.key},p),(0,e.jsx)(J.Z,{placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.ExampleConfigForm.index.enterExampleValue",dm:"\u8BF7\u8F93\u5165\u793A\u4F8B\u503C"}),onChange:function(W){return S({parameters:m()(m()({},N.parameters||{}),{},H()({},c.key,W.target.value))},P)},style:{flex:1,width:100},value:(Z=N.parameters)===null||Z===void 0?void 0:Z[c.key]},p)]},p)})})]})]}),(0,e.jsx)(xe.Z,{type:"vertical",style:{height:40}}),(0,e.jsx)(te.Z,{onClick:function(){return U(P)},icon:"spark-delete-line",shape:"circle"})]},P)},P)}),(0,e.jsx)("a",{onClick:D,className:X()(H()({},ve.disabled,a.length>=5)),children:(0,e.jsxs)(V.Z,{type:"link",size:"small",disabled:a.length>=fe,iconType:"spark-plus-line",children:[t.Z.get({id:"main.pages.Component.Plugin.components.ExampleConfigForm.index.addExample",dm:"\u589E\u52A0\u793A\u4F8B"}),"\uFF08",a.length||0,"/",fe,"\uFF09"]})})]})})}var ye={expandBtn:"expandBtn___Rc5o4",expand:"expand___BLU4_",top:"top___v1J4w"};function i(s){return(0,e.jsx)(te.Z,{className:X()(ye.expandBtn,H()({},ye.expand,s.expand)),onClick:function(){return s.setExpand(!s.expand)},icon:"bl-icon-right-line"})}function l(s){return _jsx(IconButton,{onClick:function(){return s.setExpand(!s.expand)},className:classNames(styles.expandBtn,styles.top,_defineProperty({},styles.expand,s.expand)),icon:"bl-icon-up-line",shape:"circle"})}var r={item:"item___oEK2f","error-tip":"error-tip___p4A9L",label:"label___O4OpW"},_=["Array<Object>","Array<String>","Array<Number>","Array<Boolean>","Object","String","Number","Boolean"].map(function(s){return{label:s,value:s}}),n={key:void 0,type:"String",desc:void 0,location:"Query",default_value:void 0,required:!0};function h(s){var C,a=s.paramItem,R=s.onChange,w=s.order,E=w===void 0?0:w,M=s.handleRemove,K=s.list,S=s.index,D=s.hasProperties,U=s.requestMethod,N=s.disableShowLocation,P=N===void 0?!1:N,c=(0,y.useState)(!0),p=I()(c,2),j=p[0],Z=p[1],$=(0,y.useState)(""),W=I()($,2),k=W[0],F=W[1],_e=(0,y.useState)(""),ae=I()(_e,2),pe=ae[0],Ce=ae[1],Ne=(0,y.useState)(0),Ze=I()(Ne,2),ce=Ze[0],b=Ze[1],u=(0,y.useMemo)(function(){return["Object","Array<Object>"].includes(a.type||"")},[a.type]),O=(0,y.useMemo)(function(){var f;return u&&!!((f=a.properties)!==null&&f!==void 0&&f.length)},[a,u]),T=function(g){R(m()(m()({},a),g))},re=function(g,z){var G;T({properties:(G=a.properties||[])===null||G===void 0?void 0:G.map(function(Ae,Me){return Me===z?m()(m()({},Ae),g):Ae})})},je=function(){T({properties:[].concat(de()(a.properties||[]),[n])})},be=function(g){var z;T({properties:(z=a.properties)===null||z===void 0?void 0:z.filter(function(Ae,Me){return Me!==g})});var G=setTimeout(function(){b(new Date().valueOf()),clearTimeout(G)},100)},L=function(){var g;if(!((g=a.key)!==null&&g!==void 0&&g.trim())){F(t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.parameterNameCannotBeEmpty",dm:"\u53C2\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"}));return}if(!/^[a-zA-Z_][a-zA-Z0-9_-]*$/.test(a.key)){F(t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.parameterNameOnlyLettersNumbersOrUnderscoresAndStartWithLetterOrUnderscore",dm:"\u53C2\u6570\u540D\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\u3001\u6570\u5B57\u6216\u4E0B\u5212\u7EBF\uFF0C\u5E76\u4E14\u4EE5\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\u5F00\u5934"}));return}if(K.some(function(z,G){return G===S?!1:z.key===a.key})){F(t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.parameterNameCannotBeDuplicate",dm:"\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u91CD\u590D"}));return}F("")},v=function(){var g;if(!((g=a.desc)!==null&&g!==void 0&&g.trim())){Ce(t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.parameterExplanationCannotBeEmpty",dm:"\u53C2\u6570\u89E3\u91CA\u4E0D\u80FD\u4E3A\u7A7A"}));return}Ce("")};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsxs)(x.Z,{className:r.item,gap:8,align:"flex-start",children:[O?(0,e.jsx)(i,{expand:j,setExpand:Z}):D&&(0,e.jsx)("div",{className:r.placeholder}),(0,e.jsxs)(x.Z,{style:{flex:1,width:100},vertical:!0,children:[(0,e.jsx)(J.Z,{status:k?"error":void 0,onBlur:L,onChange:function(g){T({key:g.target.value})},value:a.key,placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.enterParameterName",dm:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0"})}),k&&(0,e.jsx)("span",{className:r["error-tip"],children:k})]}),(0,e.jsxs)(x.Z,{style:{width:150},vertical:!0,children:[(0,e.jsx)(J.Z,{onChange:function(g){return T({desc:g.target.value})},value:a.desc,status:pe?"error":void 0,onBlur:v,placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.enterParameterExplanation",dm:"\u8BF7\u8F93\u5165\u53C2\u6570\u89E3\u91CA"})}),pe&&(0,e.jsx)("span",{className:r["error-tip"],children:pe})]}),(0,e.jsx)(q.Z,{onChange:function(g){return T({type:g})},options:_,value:a.type,style:{width:P?248:140},placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.selectType",dm:"\u9009\u62E9\u7C7B\u578B"})}),!P&&(0,e.jsx)(q.Z,{options:[].concat(de()(U==="GET"?[]:[{label:"Body",value:"Body"}]),[{label:"Path",value:"Path"},{label:"Query",value:"Query"},{label:"Header",value:"Header"}]),value:a.location,onChange:function(g){return T({location:g})},style:{width:100},placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.selectInputMethod",dm:"\u9009\u62E9\u4F20\u5165\u65B9\u6CD5"})}),(0,e.jsx)(q.Z,{style:{width:100},value:a.required?1:0,onChange:function(g){return T({required:g===1})},options:[{label:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.required",dm:"\u5FC5\u586B"}),value:1},{label:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.notRequired",dm:"\u975E\u5FC5\u586B"}),value:0}]}),(0,e.jsx)(q.Z,{style:{width:120},value:a.user_input?1:0,onChange:function(g){return T({user_input:g===1})},options:[{label:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.largeModelRecognition",dm:"\u5927\u6A21\u578B\u8BC6\u522B"}),value:0},{label:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.businessPassThrough",dm:"\u4E1A\u52A1\u900F\u4F20"}),value:1}]}),(0,e.jsxs)(x.Z,{gap:8,children:[u&&(0,e.jsx)(te.Z,{onClick:je,icon:"spark-plus-line",shape:"circle"}),(0,e.jsx)(te.Z,{onClick:M,icon:"spark-delete-line",bordered:!1,shape:"circle"})]})]})}),u&&j&&((C=a.properties)===null||C===void 0?void 0:C.map(function(f,g){return(0,e.jsx)(h,{index:g,order:E+1,list:a.properties||[],handleRemove:function(){return be(g)},onChange:function(G){return re(G,g)},paramItem:f,showLine:!0,requestMethod:U,disableShowLocation:!0},"".concat(ce,"_").concat(g))}))]})}function me(s){var C=s.params,a=s.onChange,R=s.requestMethod,w=(0,y.useState)(0),E=I()(w,2),M=E[0],K=E[1],S=function(c,p){a(C.map(function(j,Z){return Z===p?c:j}))},D=function(){a([].concat(de()(C),[n]))},U=function(c){a(C.filter(function(j,Z){return Z!==c}));var p=setTimeout(function(){K(new Date().valueOf()),clearTimeout(p)},100)},N=(0,y.useMemo)(function(){return C.some(function(P){var c;return!!((c=P.properties)!==null&&c!==void 0&&c.length)})},[C]);return(0,e.jsxs)(x.Z,{vertical:!0,gap:12,children:[(0,e.jsxs)(x.Z,{gap:8,className:r.label,children:[N&&(0,e.jsx)("div",{className:r.placeholder}),(0,e.jsx)("div",{className:r.label,style:{flex:1},children:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.parameterName",dm:"\u53C2\u6570\u540D\u79F0"})}),(0,e.jsx)("div",{className:r.label,style:{width:150},children:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.parameterDescription",dm:"\u53C2\u6570\u63CF\u8FF0"})}),(0,e.jsx)("div",{className:r.label,style:{width:140},children:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.type",dm:"\u7C7B\u578B"})}),(0,e.jsx)("div",{className:r.label,style:{width:100},children:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.inputMethod",dm:"\u4F20\u5165\u65B9\u6CD5"})}),(0,e.jsx)("div",{className:r.label,style:{width:100},children:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.isRequired",dm:"\u662F\u5426\u5FC5\u586B"})}),(0,e.jsx)("div",{className:r.label,style:{width:120},children:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.passingMethod",dm:"\u4F20\u53C2\u65B9\u5F0F"})}),(0,e.jsx)("div",{style:{width:36}})]}),C.map(function(P,c){return(0,e.jsx)(h,{requestMethod:R,hasProperties:N,handleRemove:function(){return U(c)},paramItem:P,list:C,index:c,onChange:function(j){return S(j,c)}},"".concat(M,"_").concat(c))}),(0,e.jsx)(V.Z,{className:"justify-start",iconType:"spark-plus-line",type:"link",size:"small",onClick:D,children:t.Z.get({id:"main.pages.Component.Plugin.components.InputParamsConfig.index.addInputParameter",dm:"\u589E\u52A0\u5165\u53C2"})})]})}var oe={label:"label___E82Ia","error-tip":"error-tip___ieI_i"},Ue=["Array<Object>","Array<String>","Array<Number>","Array<Boolean>","Object","String","Number","Boolean"].map(function(s){return{label:s,value:s}}),Le={key:void 0,type:"String",desc:void 0};function De(s){var C,a=s.paramItem,R=s.onChange,w=s.showLine,E=s.order,M=E===void 0?0:E,K=s.handleRemove,S=s.list,D=s.index,U=s.hasProperties,N=(0,y.useState)(""),P=I()(N,2),c=P[0],p=P[1],j=(0,y.useState)(!0),Z=I()(j,2),$=Z[0],W=Z[1],k=(0,y.useState)(""),F=I()(k,2),_e=F[0],ae=F[1],pe=(0,y.useState)(0),Ce=I()(pe,2),Ne=Ce[0],Ze=Ce[1],ce=(0,y.useMemo)(function(){return["Object","Array<Object>"].includes(a.type||"")},[a.type]),b=(0,y.useMemo)(function(){var L;return ce&&!!((L=a.properties)!==null&&L!==void 0&&L.length)},[a,ce]),u=function(v){R(m()(m()({},a),v))},O=function(v,f){var g;u({properties:(g=a.properties||[])===null||g===void 0?void 0:g.map(function(z,G){return G===f?m()(m()({},z),v):z})})},T=function(){u({properties:[].concat(de()(a.properties||[]),[Le])})},re=function(v){var f;u({properties:(f=a.properties)===null||f===void 0?void 0:f.filter(function(z,G){return G!==v})});var g=setTimeout(function(){Ze(new Date().valueOf()),clearTimeout(g)},100)},je=function(){var v;if(!((v=a.key)!==null&&v!==void 0&&v.trim())){ae(t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.parameterNameCannotBeEmpty",dm:"\u53C2\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"}));return}if(!/^[a-zA-Z_][a-zA-Z0-9_-]*$/.test(a.key)){ae(t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.parameterNameOnlyLettersNumbersOrUnderscoresAndStartWithLetterOrUnderscore",dm:"\u53C2\u6570\u540D\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\u3001\u6570\u5B57\u6216\u4E0B\u5212\u7EBF\uFF0C\u5E76\u4E14\u4EE5\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\u5F00\u5934"}));return}if(S.some(function(f,g){return g===D?!1:f.key===a.key})){ae(t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.parameterNameCannotBeDuplicate",dm:"\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u91CD\u590D"}));return}ae("")},be=function(){var v;if(!((v=a.desc)!==null&&v!==void 0&&v.trim())){p(t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.parameterExplanationCannotBeEmpty",dm:"\u53C2\u6570\u89E3\u91CA\u4E0D\u80FD\u4E3A\u7A7A"}));return}p("")};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsxs)(x.Z,{className:oe.item,style:w?{paddingLeft:(b?0:24)+12*M}:{},gap:8,align:"flex-start",children:[b?(0,e.jsx)(i,{expand:$,setExpand:W}):U&&(0,e.jsx)("div",{className:oe.placeholder}),(0,e.jsxs)(x.Z,{style:{flex:1,width:100},vertical:!0,children:[(0,e.jsx)(J.Z,{status:_e?"error":void 0,onBlur:je,onChange:function(v){u({key:v.target.value})},defaultValue:a.key,placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.enterParameterName",dm:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0"})}),_e&&(0,e.jsx)("span",{className:oe["error-tip"],children:_e})]}),(0,e.jsxs)(x.Z,{style:{width:217},vertical:!0,children:[(0,e.jsx)(J.Z,{onChange:function(v){return u({desc:v.target.value})},defaultValue:a.desc,style:{width:217},placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.enterParameterExplanation",dm:"\u8BF7\u8F93\u5165\u53C2\u6570\u89E3\u91CA"}),status:c?"error":void 0,onBlur:be}),c&&(0,e.jsx)("span",{className:oe["error-tip"],style:{width:409},children:c})]}),(0,e.jsx)(q.Z,{onChange:function(v){return u({type:v})},options:Ue,defaultValue:a.type,style:{width:140},placeholder:t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.selectType",dm:"\u9009\u62E9\u7C7B\u578B"})}),(0,e.jsxs)(x.Z,{gap:8,children:[ce&&(0,e.jsx)(te.Z,{onClick:T,icon:"spark-plus-line",shape:"circle"}),(0,e.jsx)(te.Z,{onClick:K,icon:"spark-delete-line",bordered:!1,shape:"circle"})]})]})}),ce&&$&&((C=a.properties)===null||C===void 0?void 0:C.map(function(L,v){return(0,e.jsx)(De,{order:M+1,index:v,list:a.properties||[],handleRemove:function(){return re(v)},onChange:function(g){return O(g,v)},paramItem:L,showLine:!0},"".concat(Ne,"_").concat(v))}))]})}function We(s){var C=s.params,a=C===void 0?[]:C,R=s.onChange,w=R===void 0?function(c){}:R,E=(0,y.useState)(0),M=I()(E,2),K=M[0],S=M[1],D=function(p,j){w(a.map(function(Z,$){return $===j?p:Z}))},U=function(){w([].concat(de()(a),[Le]))},N=function(p){w(a.filter(function(Z,$){return $!==p}));var j=setTimeout(function(){S(new Date().valueOf()),clearTimeout(j)},100)},P=(0,y.useMemo)(function(){return a.some(function(c){var p;return!!((p=c.properties)!==null&&p!==void 0&&p.length)})},[a]);return(0,e.jsxs)(x.Z,{vertical:!0,gap:8,children:[(0,e.jsxs)(x.Z,{gap:12,className:oe.label,children:[P&&(0,e.jsx)("div",{className:oe.placeholder}),(0,e.jsx)("div",{className:oe.label,style:{flex:1},children:t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.parameterName",dm:"\u53C2\u6570\u540D\u79F0"})}),(0,e.jsx)("div",{className:oe.label,style:{width:217},children:t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.parameterDescription",dm:"\u53C2\u6570\u63CF\u8FF0"})}),(0,e.jsx)("div",{className:oe.label,style:{width:140},children:t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.type",dm:"\u7C7B\u578B"})}),(0,e.jsx)("div",{style:{width:36}})]}),a.map(function(c,p){return(0,e.jsx)(De,{hasProperties:P,handleRemove:function(){return N(p)},paramItem:c,list:a,index:p,onChange:function(Z){return D(Z,p)}},"".concat(K,"_").concat(p))}),(0,e.jsx)(V.Z,{className:"justify-start",iconType:"spark-plus-line",type:"link",size:"small",onClick:U,children:t.Z.get({id:"main.pages.Component.Plugin.components.OutputParamsConfig.index.addOutputParameter",dm:"\u589E\u52A0\u51FA\u53C2"})})]})}var A=o(7876),$e=o(12901),Fe=o(95559),Ke=o(45753),ze=o(29961);function Ge(s){var C=(0,y.useState)(!1),a=I()(C,2),R=a[0],w=a[1],E=(0,y.useState)(""),M=I()(E,2),K=M[0],S=M[1],D=(0,y.useState)(""),U=I()(D,2),N=U[0],P=U[1],c=(0,y.useState)(""),p=I()(c,2),j=p[0],Z=p[1];(0,y.useEffect)(function(){if(R)try{var W=s.inputParams.reduce(function(k,F){return m()(m()({},k),{},H()({},F.key,""))},{});S(JSON.stringify(W))}catch(k){}else S("")},[R]);var $=[{key:"1",label:t.Z.get({id:"main.pages.Component.Plugin.Tools.Test.input",dm:"\u5165\u53C2"}),classNames:{header:A.Z.collapse},children:(0,e.jsxs)(x.Z,{gap:20,vertical:!0,children:[(0,e.jsx)($e.ZP,{onChange:function(k){P(k)},value:K,language:"json"}),(0,e.jsx)(V.Z,{type:"primary",className:"self-start mb-2",onClick:function(){var k=JSON.parse(N);(0,se.N$)(s.pluginId,s.toolId,k).then(function(F){Z(JSON.stringify(F))})},children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Test.startRunning",dm:"\u5F00\u59CB\u8FD0\u884C"})})]})},{key:"2",label:t.Z.get({id:"main.pages.Component.Plugin.Tools.Test.output",dm:"\u51FA\u53C2"}),classNames:{header:A.Z.collapse},children:(0,e.jsx)($e.ZP,{value:j,language:"json"})}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{iconType:"spark-circlePlay-line",onClick:function(){return w(!0)},children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Test.testTool",dm:"\u6D4B\u8BD5\u5DE5\u5177"})}),(0,e.jsx)(Fe.Z,{title:t.Z.get({id:"main.pages.Component.Plugin.Tools.Test.testTool",dm:"\u6D4B\u8BD5\u5DE5\u5177"}),width:480,open:R,onClose:function(){return w(!1)},children:(0,e.jsx)("div",{children:(0,e.jsx)(ze.Z,{items:$,defaultActiveKey:["1","2"],size:"small",bordered:!1,expandIcon:function(k){var F=k.isActive;return(0,e.jsx)(Ke.Z,{type:F?"spark-down-line":"spark-up-line"})}})})})]})}function Ve(){var s,C=(0,we.s0)(),a=ne.Z.useForm(),R=I()(a,1),w=R[0],E=(0,y.useRef)([]),M=(0,Ie.Z)({inputParams:[],outputParams:[],examples:[]}),K=I()(M,2),S=K[0],D=K[1],U=(0,y.useState)(0),N=I()(U,2),P=N[0],c=N[1],p=(0,we.UO)(),j=p.id,Z=j===void 0?"":j,$=p.toolId,W=(0,Oe.Z)(function(){return(0,se.s3)(Z)}),k=W.data;(0,Oe.Z)(function(){return(0,se.R)(Z,$||"")},{onSuccess:function(u){if(u!=null&&u.data){var O,T,re;w.setFieldsValue(u.data),D({inputParams:((O=u.data.config)===null||O===void 0?void 0:O.input_params)||[],outputParams:((T=u.data.config)===null||T===void 0?void 0:T.output_params)||[],examples:((re=u.data.config)===null||re===void 0?void 0:re.examples)||[]})}}});var F=(0,ue.d)(),_e=F.bottomPortal,ae=ne.Z.useWatch(["config","request_method"],w),pe=function(){var b=le()(d()().mark(function u(){var O,T,re,je,be;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,w.validateFields();case 2:return O=v.sent,T=S.inputParams,re=S.outputParams,je=S.examples,be=m()(m()({tool_id:$,plugin_id:Z},O),{},{config:m()(m()({},O.config),{},{input_params:T,output_params:re,examples:(je||[]).map(function(f){return m()(m()({},f),{},{path:O.config.path})})})}),v.abrupt("return",(0,se.mu)(be).then(function(f){return $||we.m8.replace("/component/plugin/".concat(Z,"/tool/").concat(f)),f}));case 6:case"end":return v.stop()}},u)}));return function(){return b.apply(this,arguments)}}(),Ce=function(u){var O;c(u),(O=E.current[u])===null||O===void 0||O.scrollIntoView({behavior:"smooth",block:"start"})},Ne=(0,e.jsx)(V.Z,{onClick:le()(d()().mark(function b(){return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:pe().then(function(){ke.Z.success(t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.successSave",dm:"\u4FDD\u5B58\u6210\u529F"}))});case 1:case"end":return O.stop()}},b)})),children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.save",dm:"\u4FDD\u5B58"})}),Ze=(0,e.jsx)(V.Z,{type:"primary",onClick:le()(d()().mark(function b(){var u;return d()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,pe();case 2:u=T.sent,(0,se.Jo)(Z,u).then(function(){ke.Z.success(t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.successPublish",dm:"\u53D1\u5E03\u6210\u529F"}))});case 4:case"end":return T.stop()}},b)})),children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.saveAndPublish",dm:"\u4FDD\u5B58\u5E76\u53D1\u5E03"})}),ce=(0,e.jsx)(V.Z,{onClick:function(){C("/component/plugin")},children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.cancel",dm:"\u53D6\u6D88"})});return(0,e.jsx)(he.Z,{breadcrumbLinks:[{title:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.componentManagement",dm:"\u7EC4\u4EF6\u7BA1\u7406"})},{title:k==null?void 0:k.data.name,path:"/component/plugin/".concat(Z,"/tools")},{title:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.editTool",dm:"\u7F16\u8F91\u5DE5\u5177"})}],simplifyBreadcrumb:!0,children:(0,e.jsx)("div",{className:A.Z.form,children:(0,e.jsxs)("div",{className:A.Z["form-content"],children:[(0,e.jsx)(ne.Z,{id:"content-scroll",form:w,labelCol:{span:14},wrapperCol:{span:14},layout:"vertical",colon:!1,children:(0,e.jsxs)(x.Z,{vertical:!0,children:[(0,e.jsxs)("div",{ref:function(u){E.current[0]=u},className:A.Z["form-area"],children:[(0,e.jsx)("div",{className:A.Z.title,children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.toolInfo",dm:"\u5DE5\u5177\u4FE1\u606F"})}),(0,e.jsx)(ne.Z.Item,{name:"name",rules:[{required:!0,message:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.enterToolName",dm:"\u8BF7\u8F93\u5165\u5DE5\u5177\u540D\u79F0"})}],label:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.toolName",dm:"\u5DE5\u5177\u540D\u79F0"}),children:(0,e.jsx)(J.Z,{placeholder:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.enterToolName",dm:"\u8BF7\u8F93\u5165\u5DE5\u5177\u540D\u79F0"}),showCount:!0,maxLength:128})}),(0,e.jsx)(ne.Z.Item,{name:"description",rules:[{required:!0,message:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.enterToolDescription",dm:"\u8BF7\u8F93\u5165\u5DE5\u5177\u63CF\u8FF0\uFF0C\u5E2E\u52A9\u7528\u6237\u66F4\u597D\u7684\u7406\u89E3\u5DE5\u5177\u529F\u80FD\u548C\u4F7F\u7528\u573A\u666F"})}],label:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.toolDescription",dm:"\u5DE5\u5177\u63CF\u8FF0"}),children:(0,e.jsx)(J.Z.TextArea,{autoSize:{minRows:4,maxRows:4},showCount:!0,maxLength:200,placeholder:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.enterToolDescription",dm:"\u8BF7\u8F93\u5165\u5DE5\u5177\u63CF\u8FF0\uFF0C\u5E2E\u52A9\u7528\u6237\u66F4\u597D\u7684\u7406\u89E3\u5DE5\u5177\u529F\u80FD\u548C\u4F7F\u7528\u573A\u666F"})})}),(0,e.jsx)(ne.Z.Item,{name:["config","path"],rules:[{required:!0,message:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.enterToolPath",dm:"\u8BF7\u8F93\u5165\u5DE5\u5177\u8DEF\u5F84"})}],label:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.toolPath",dm:"\u5DE5\u5177\u8DEF\u5F84"}),children:(0,e.jsx)(J.Z,{addonBefore:k==null||(s=k.data.config)===null||s===void 0?void 0:s.server})}),(0,e.jsx)(ne.Z.Item,{name:["config","request_method"],rules:[{required:!0,message:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.selectRequestMethod",dm:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"})}],label:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.requestMethod",dm:"\u8BF7\u6C42\u65B9\u6CD5"}),children:(0,e.jsx)(q.Z,{options:["GET","POST"].map(function(b){return{value:b,label:b}})})}),ae==="POST"&&(0,e.jsx)(ne.Z.Item,{name:["config","content_type"],rules:[{required:!0,message:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.selectSubmitMethod",dm:"\u8BF7\u9009\u62E9\u63D0\u4EA4\u65B9\u5F0F"})}],label:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.submitMethod",dm:"\u63D0\u4EA4\u65B9\u5F0F"}),style:{marginBottom:0},children:(0,e.jsx)(q.Z,{options:["application/json","application/x-www-form-urlencoded"].map(function(b){return{value:b,label:b}})})})]}),(0,e.jsx)(xe.Z,{}),(0,e.jsxs)("div",{ref:function(u){E.current[1]=u},className:A.Z["form-area"],children:[(0,e.jsx)("div",{className:X()(A.Z.title,A.Z.required),children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.configureInputParameters",dm:"\u914D\u7F6E\u8F93\u5165\u53C2\u6570"})}),(0,e.jsx)(me,{requestMethod:ae,params:S.inputParams,onChange:function(u){D({inputParams:u})}})]}),(0,e.jsx)(xe.Z,{}),(0,e.jsxs)("div",{ref:function(u){E.current[2]=u},className:A.Z["form-area"],children:[(0,e.jsx)("div",{className:X()(A.Z.title,A.Z.required),children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.configureOutputParameters",dm:"\u914D\u7F6E\u8F93\u51FA\u53C2\u6570"})}),(0,e.jsx)(We,{params:S.outputParams,onChange:function(u){D({outputParams:u})}})]}),(0,e.jsx)(xe.Z,{}),(0,e.jsxs)("div",{ref:function(u){E.current[3]=u},className:A.Z["form-area"],children:[(0,e.jsx)(x.Z,{justify:"space-between",align:"center",children:(0,e.jsx)("span",{className:A.Z.title,children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.advancedConfiguration",dm:"\u9AD8\u7EA7\u914D\u7F6E"})})}),(0,e.jsx)("div",{className:A.Z.tip,children:t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.addCallExamples",dm:"\uFF08\u53EF\u9009\uFF09\u4E3A\u5927\u6A21\u578B\u589E\u52A0\u8C03\u7528\u793A\u4F8B\uFF0C\u63D0\u5347\u5927\u6A21\u578B\u8C03\u7528\u63D2\u4EF6\u7684\u51C6\u786E\u6027"})}),(0,e.jsx)(Be,{inputParams:S.inputParams,onChange:function(u){return D({examples:u})},examples:S.examples})]}),_e((0,e.jsxs)(x.Z,{className:A.Z["bottom-bar"],align:"center",gap:12,children:[Ze,Ne,ce,(0,e.jsx)("div",{className:A.Z.divider}),(0,e.jsx)(Ge,{pluginId:Z,toolId:$,inputParams:S.inputParams})]}))]})}),(0,e.jsx)("div",{className:A.Z["scroll-control"],children:(0,e.jsx)(Pe,{activeMenuCode:P,handleMenuClick:Ce,menus:[t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.toolInfo",dm:"\u5DE5\u5177\u4FE1\u606F"}),t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.inputParameters",dm:"\u8F93\u5165\u53C2\u6570"}),t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.outputParameters",dm:"\u8F93\u51FA\u53C2\u6570"}),t.Z.get({id:"main.pages.Component.Plugin.Tools.Edit.advancedConfiguration",dm:"\u9AD8\u7EA7\u914D\u7F6E"})]})})]})})})}},69163:function(Re,ie,o){o.d(ie,{IH:function(){return J},JS:function(){return I},Jo:function(){return we},N$:function(){return de},R:function(){return xe},cy:function(){return t},gv:function(){return Be},hZ:function(){return le},iB:function(){return ve},iS:function(){return X},mu:function(){return Oe},rx:function(){return ue},s3:function(){return e}});var Te=o(12323),d=o.n(Te),Ee=o(63260),m=o.n(Ee),B=o(46639);function le(i){return ge.apply(this,arguments)}function ge(){return ge=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/plugins",method:"GET",params:l});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},i)})),ge.apply(this,arguments)}function I(i){return he.apply(this,arguments)}function he(){return he=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l),method:"DELETE"});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},i)})),he.apply(this,arguments)}function ue(i){return Q.apply(this,arguments)}function Q(){return Q=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/plugins",method:"POST",data:l});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},i)})),Q.apply(this,arguments)}function H(i){return ee.apply(this,arguments)}function ee(){return ee=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l.plugin_id),method:"PUT",data:l});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},i)})),ee.apply(this,arguments)}function X(i){return Y.apply(this,arguments)}function Y(){return Y=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!!l.plugin_id,!r){n.next=3;break}return n.abrupt("return",H(l));case 3:return n.abrupt("return",ue(l));case 4:case"end":return n.stop()}},i)})),Y.apply(this,arguments)}function e(i){return Pe.apply(this,arguments)}function Pe(){return Pe=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l),method:"GET"});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},i)})),Pe.apply(this,arguments)}function t(i){return se.apply(this,arguments)}function se(){return se=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l,"/tools"),method:"GET",params:{current:1,size:100}});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},i)})),se.apply(this,arguments)}function ne(i){return V.apply(this,arguments)}function V(){return V=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l.plugin_id,"/tools"),method:"POST",data:l});case 2:return r=n.sent,n.abrupt("return",r.data.data);case 4:case"end":return n.stop()}},i)})),V.apply(this,arguments)}function ke(i){return Ie.apply(this,arguments)}function Ie(){return Ie=m()(d()().mark(function i(l){return d()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l.plugin_id,"/tools/").concat(l.tool_id),method:"PUT",data:l});case 2:return _.abrupt("return",l.tool_id);case 3:case"end":return _.stop()}},i)})),Ie.apply(this,arguments)}function Oe(i){return x.apply(this,arguments)}function x(){return x=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!!l.tool_id,!r){n.next=3;break}return n.abrupt("return",ke(l));case 3:return n.abrupt("return",ne(l));case 4:case"end":return n.stop()}},i)})),x.apply(this,arguments)}function J(i,l){return q.apply(this,arguments)}function q(){return q=m()(d()().mark(function i(l,r){var _;return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l,"/tools/").concat(r),method:"DELETE"});case 2:return _=h.sent,h.abrupt("return",_.data);case 4:case"end":return h.stop()}},i)})),q.apply(this,arguments)}function xe(i,l){return y.apply(this,arguments)}function y(){return y=m()(d()().mark(function i(l,r){var _;return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(r){h.next=2;break}return h.abrupt("return",void 0);case 2:return h.next=4,(0,B.W)({url:"/console/v1/plugins/".concat(l,"/tools/").concat(r),method:"GET"});case 4:return _=h.sent,h.abrupt("return",_.data);case 6:case"end":return h.stop()}},i)})),y.apply(this,arguments)}function we(i,l){return Se.apply(this,arguments)}function Se(){return Se=m()(d()().mark(function i(l,r){var _;return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l,"/tools/").concat(r,"/publish"),method:"POST"});case 2:return _=h.sent,h.abrupt("return",_.data);case 4:case"end":return h.stop()}},i)})),Se.apply(this,arguments)}function de(i,l,r){return te.apply(this,arguments)}function te(){return te=m()(d()().mark(function i(l,r,_){var n;return d()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,B.W)({url:"/console/v1/plugins/".concat(l,"/tools/").concat(r,"/test"),method:"POST",data:{arguments:_}});case 2:return n=me.sent,me.abrupt("return",n.data);case 4:case"end":return me.stop()}},i)})),te.apply(this,arguments)}function ve(i,l){return fe.apply(this,arguments)}function fe(){return fe=m()(d()().mark(function i(l,r){var _;return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,B.W)({url:"/console/v1/tools/".concat(l,"/").concat(r?"enable":"disable"),method:"POST"});case 2:return _=h.sent,h.abrupt("return",_.data);case 4:case"end":return h.stop()}},i)})),fe.apply(this,arguments)}function Be(i){return ye.apply(this,arguments)}function ye(){return ye=m()(d()().mark(function i(l){var r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.W)({url:"/console/v1/tools/query-by-ids",method:"POST",data:{tool_ids:l}});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},i)})),ye.apply(this,arguments)}},7876:function(Re,ie){ie.Z={form:"form____aI1g","form-content":"form-content___tP6Tv","form-area":"form-area___D5QT3",title:"title___jTt66",required:"required___v7xXH",tip:"tip___Qgxq7",divider:"divider___JZptY",tool:"tool___laygN",image:"image___uUVr0",name:"name___pPqjC",desc:"desc____jvri",container:"container___ehy2t","content-header":"content-header___xN_Ni","tool-icon":"tool-icon___DUx94",field:"field___cIEwN",children:"children___zmBl0","scroll-control":"scroll-control___AyTUT",collapse:"collapse___B6vDk","bottom-bar":"bottom-bar___xOjw3"}}}]);
