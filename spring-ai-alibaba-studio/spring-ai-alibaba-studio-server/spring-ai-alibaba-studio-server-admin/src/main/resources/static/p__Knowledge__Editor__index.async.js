"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[4683],{78061:function(w,j,e){e.d(j,{Z:function(){return g}});var u=e(2784),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},C=y,O=e(80367);function m(){return m=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(t[d]=c[d])}return t},m.apply(this,arguments)}const f=(t,o)=>u.createElement(O.Z,m({},t,{ref:o,icon:C}));var g=u.forwardRef(f)},7325:function(w,j,e){e.d(j,{Z:function(){return g}});var u=e(2784),y={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},C=y,O=e(80367);function m(){return m=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(t[d]=c[d])}return t},m.apply(this,arguments)}const f=(t,o)=>u.createElement(O.Z,m({},t,{ref:o,icon:C}));var g=u.forwardRef(f)},44199:function(w,j,e){e.d(j,{Z:function(){return g}});var u=e(2784),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},C=y,O=e(80367);function m(){return m=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(t[d]=c[d])}return t},m.apply(this,arguments)}const f=(t,o)=>u.createElement(O.Z,m({},t,{ref:o,icon:C}));var g=u.forwardRef(f)},77261:function(w,j,e){e.d(j,{Z:function(){return g}});var u=e(2784),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},C=y,O=e(80367);function m(){return m=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(t[d]=c[d])}return t},m.apply(this,arguments)}const f=(t,o)=>u.createElement(O.Z,m({},t,{ref:o,icon:C}));var g=u.forwardRef(f)},19612:function(w,j,e){var u=e(78061),y=e(44199),C=e(7325),O=e(77261),m=e(88133),f=e(52322),_=["content"];function g(i){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},g(i)}function t(i,n){if(i==null)return{};var l=o(i,n),s,v;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(i);for(v=0;v<Z.length;v++)s=Z[v],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(l[s]=i[s])}return l}function o(i,n){if(i==null)return{};var l={},s=Object.keys(i),v,Z;for(Z=0;Z<s.length;Z++)v=s[Z],!(n.indexOf(v)>=0)&&(l[v]=i[v]);return l}function c(i,n){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);n&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(i,v).enumerable})),l.push.apply(l,s)}return l}function d(i){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?c(Object(l),!0).forEach(function(s){K(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):c(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function K(i,n,l){return n=R(n),n in i?Object.defineProperty(i,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[n]=l,i}function R(i){var n=S(i,"string");return g(n)=="symbol"?n:String(n)}function S(i,n){if(g(i)!="object"||!i)return i;var l=i[Symbol.toPrimitive];if(l!==void 0){var s=l.call(i,n||"default");if(g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}var D={success:{type:"success",icon:(0,f.jsx)(u.Z,{})},warning:{type:"warning",icon:(0,f.jsx)(y.Z,{})},error:{type:"error",icon:(0,f.jsx)(C.Z,{})},info:{type:"info",icon:(0,f.jsx)(O.Z,{})}},P=function(n,l){var s,v;typeof l=="string"?v={content:l}:v=d({},l);var Z=v,b=Z.content,r=t(Z,_);m.ZP.open(d({type:n,content:b,icon:n==="loading"||(s=D[n])===null||s===void 0?void 0:s.icon},r))};j.Z=d(d({},m.ZP),{},{success:function(n){return P("success",n)},warning:function(n){return P("warning",n)},error:function(n){return P("error",n)},info:function(n){return P("info",n)},loading:function(n){return P("loading",n)}})},92149:function(w,j,e){e.r(j),e.d(j,{default:function(){return z}});var u=e(74875),y=e.n(u),C=e(13311),O=e.n(C),m=e(42035),f=e.n(m),_=e(882),g=e(6731),t=e(22453),o=e(23985),c=e(76077),d=e(19612),K=e(45753),R=e(72624),S=e(58541),D=e(4513),P=e(73306),i=e(2821),n=e(65741),l=e(77423),s=e(2784),v=e(10289),Z=e(44433),b={container:"container___lTjUm",footer:"footer___SX4oP","footer-btn":"footer-btn___qwYcy","form-item-label":"form-item-label___ChtPK","info-icon":"info-icon___UWbqX","opt-item":"opt-item___BJaOd","opt-title":"opt-title___VNpPX"},r=e(52322),A=["top_k","similarity_threshold","rerank_provider","rerank_model","embedding_provider","embedding_model"];function z(){var W=(0,v.UO)(),B=W.kb_id,U=(0,s.useRef)(null),V=(0,i.Z)({name:"",description:"",embedding_value:"",embedding_model:"",embedding_provider:"",rerank_value:"",rerank_model:"",rerank_provider:"",similarity_threshold:.2,top_k:3}),T=f()(V,2),p=T[0],N=T[1];(0,n.Z)(function(){return(0,c.mB)(B||"")},{onSuccess:function(a){var h=a.index_config,x=a.search_config;N({name:a.name,description:a.description,embedding_value:h.embedding_model?"".concat(h.embedding_provider,"@@@").concat(h.embedding_model):"",embedding_model:h==null?void 0:h.embedding_model,embedding_provider:h==null?void 0:h.embedding_provider,rerank_value:x.rerank_model?"".concat(x.rerank_provider,"@@@").concat(x.rerank_model):"",rerank_model:x==null?void 0:x.rerank_model,rerank_provider:x==null?void 0:x.rerank_provider,similarity_threshold:x.similarity_threshold,top_k:x.top_k})}});var I=function(a){N(function(h){return O()(O()({},h),a)})},F=function(){L().then(function(){var a=p.top_k,h=p.similarity_threshold,x=p.rerank_provider,k=p.rerank_model,M=p.embedding_provider,X=p.embedding_model,H=y()(p,A),J=O()({kb_id:(B==null?void 0:B.toString())||"",search_config:{top_k:a,similarity_threshold:h,rerank_provider:x,rerank_model:k},index_config:{embedding_provider:M,embedding_model:X}},H);(0,c.Et)(J).then(function(){d.Z.success(t.Z.get({id:"main.pages.Knowledge.Editor.index.saveSuccess",dm:"\u4FDD\u5B58\u6210\u529F"})),Z.m8.push("/knowledge")})}).catch(function(a){d.Z.error(a.message)})},L=function(){return new Promise(function(a,h){var x,k,M;if(!((x=p.name)!==null&&x!==void 0&&x.trim())){h(t.Z.get({id:"main.pages.Knowledge.Create.index.pleaseEnterKnowledgeBaseName",dm:"\u8BF7\u5148\u586B\u5199\u77E5\u8BC6\u5E93\u540D\u79F0"}));return}if(!((k=p.embedding_value)!==null&&k!==void 0&&k.trim())){h(t.Z.get({id:"main.pages.Knowledge.Create.index.pleaseSelectEmbeddingModel",dm:"\u8BF7\u5148\u9009\u62E9Embedding\u6A21\u578B"}));return}if(!((M=p.rerank_value)!==null&&M!==void 0&&M.trim())){h(t.Z.get({id:"main.pages.Knowledge.Create.index.pleaseSelectRerankModel",dm:"\u8BF7\u5148\u9009\u62E9Rerank\u6A21\u578B"}));return}a(p)})},$=function(){l.Z.confirm({title:(0,r.jsx)("span",{className:b["confirm-title"],children:t.Z.get({id:"main.pages.Knowledge.Editor.index.confirmDiscardEditing",dm:"\u786E\u8BA4\u653E\u5F03\u7F16\u8F91\u77E5\u8BC6\u5E93\u5417"})}),icon:(0,r.jsx)(K.Z,{type:"spark-warningCircle-line",className:b["warning-icon"]}),content:(0,r.jsx)("span",{className:b["confirm-content"],children:t.Z.get({id:"main.pages.Knowledge.Editor.index.discardChangesDataNotSaved",dm:"\u653E\u5F03\u7F16\u8F91\u540E\u60A8\u521A\u521A\u586B\u5199\u7684\u6570\u636E\u5C06\u4E0D\u4F1A\u88AB\u4FDD\u5B58\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C"})}),okText:t.Z.get({id:"main.pages.Knowledge.Editor.index.confirmDiscard",dm:"\u786E\u8BA4\u653E\u5F03"}),cancelText:t.Z.get({id:"main.pages.Knowledge.Editor.index.continueEditing",dm:"\u7EE7\u7EED\u7F16\u8F91"}),onOk:function(){Z.m8.push("/knowledge")}})};return(0,r.jsx)(_.Z,{breadcrumbLinks:[{title:t.Z.get({id:"main.pages.Knowledge.Editor.index.knowledgeBase",dm:"\u77E5\u8BC6\u5E93"}),path:"/knowledge"},{title:t.Z.get({id:"main.pages.Knowledge.Editor.index.editKnowledgeBase",dm:"\u7F16\u8F91\u77E5\u8BC6\u5E93"})}],bottom:(0,r.jsx)("div",{className:b.footer,children:(0,r.jsxs)("div",{className:b["footer-btn"],children:[(0,r.jsx)(R.Z,{type:"primary",onClick:function(){L().then(function(){F()}).catch(function(a){return d.Z.warning(a)})},children:t.Z.get({id:"main.pages.Knowledge.Editor.index.save",dm:"\u4FDD\u5B58"})}),(0,r.jsx)(R.Z,{onClick:$,children:t.Z.get({id:"main.pages.Knowledge.Editor.index.cancel",dm:"\u53D6\u6D88"})})]})}),children:(0,r.jsx)("div",{className:b.container,children:(0,r.jsxs)(S.Z,{layout:"vertical",ref:U,children:[(0,r.jsx)(S.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.Editor.index.knowledgeBaseName",dm:"\u77E5\u8BC6\u5E93\u540D\u79F0"}),required:!0,children:(0,r.jsx)(D.Z,{placeholder:t.Z.get({id:"main.pages.Knowledge.Editor.index.enterKnowledgeBaseName",dm:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u540D\u79F0"}),value:p.name,onChange:function(a){I({name:a.target.value})}})}),(0,r.jsx)(S.Z.Item,{label:t.Z.get({id:"main.pages.Knowledge.Editor.index.knowledgeBaseDescription",dm:"\u77E5\u8BC6\u5E93\u63CF\u8FF0"}),children:(0,r.jsx)(D.Z.TextArea,{placeholder:t.Z.get({id:"main.pages.Knowledge.Editor.index.enterKnowledgeBaseDescription",dm:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u63CF\u8FF0"}),value:p.description,onChange:function(a){I({description:a.target.value})}})}),(0,r.jsx)(S.Z.Item,{label:(0,r.jsxs)("div",{className:b["form-item-label"],children:[(0,r.jsx)("span",{children:t.Z.get({id:"main.pages.Knowledge.Editor.index.embeddingModel",dm:"Embedding\u6A21\u578B"})}),(0,r.jsx)(P.Z,{title:t.Z.get({id:"main.pages.Knowledge.Editor.index.modelConvertTextToVector",dm:"\u7528\u4E8E\u5C06\u6587\u672C\u8F6C\u6362\u4E3A\u5411\u91CF\u8868\u793A\u7684\u6A21\u578B\uFF0C\u80FD\u628A\u6587\u672C\u4FE1\u606F\u6620\u5C04\u5230\u4F4E\u7EF4\u7A20\u5BC6\u5411\u91CF\u7A7A\u95F4\uFF0C\u4FBF\u4E8E\u8BA1\u7B97\u673A\u7406\u89E3\u6587\u672C\u8BED\u4E49\uFF0C\u652F\u6301\u540E\u7EED\u7684\u76F8\u4F3C\u6027\u8BA1\u7B97\u7B49\u64CD\u4F5C"}),children:(0,r.jsx)(K.Z,{type:"spark-info-line",className:b["info-icon"]})})]}),required:!0,children:(0,r.jsx)(o.Z,{value:p.embedding_value,modelType:"text_embedding",onChange:function(a){I({embedding_value:a,embedding_model:a.split("@@@")[1],embedding_provider:a.split("@@@")[0]})}})}),(0,r.jsx)(S.Z.Item,{label:(0,r.jsxs)("div",{className:b["form-item-label"],children:[(0,r.jsx)("span",{children:t.Z.get({id:"main.pages.Knowledge.Editor.index.rerankModel",dm:"Rerank\u6A21\u578B"})}),(0,r.jsx)(P.Z,{title:t.Z.get({id:"main.pages.Knowledge.Editor.index.rerankModelReorderResults",dm:"Rerank\u6A21\u578B\u5728\u68C0\u7D22\u51FA\u76F8\u5173\u7ED3\u679C\u540E\uFF0C\u5BF9\u7ED3\u679C\u8FDB\u884C\u91CD\u65B0\u6392\u5E8F\uFF0C\u901A\u8FC7\u66F4\u7CBE\u51C6\u7684\u7B97\u6CD5\u8C03\u6574\u7ED3\u679C\u987A\u5E8F\uFF0C\u4F7F\u76F8\u5173\u6027\u66F4\u9AD8\u7684\u5185\u5BB9\u6392\u5728\u524D\u5217\uFF0C\u63D0\u5347\u68C0\u7D22\u7ED3\u679C\u8D28\u91CF\u3002"}),children:(0,r.jsx)(K.Z,{type:"spark-info-line",className:b["info-icon"]})})]}),required:!0,children:(0,r.jsx)(o.Z,{value:p.rerank_value,modelType:"rerank",onChange:function(a){I({rerank_value:a,rerank_model:a.split("@@@")[1],rerank_provider:a.split("@@@")[0]})}})}),(0,r.jsx)(S.Z.Item,{label:(0,r.jsxs)("div",{className:b["form-item-label"],children:[(0,r.jsx)("span",{children:t.Z.get({id:"main.pages.Knowledge.Editor.index.similarityThreshold",dm:"\u76F8\u4F3C\u5EA6\u9608\u503C"})}),(0,r.jsx)(P.Z,{title:t.Z.get({id:"main.pages.Knowledge.Editor.index.thresholdMeasureSimilarity",dm:"\u7528\u4E8E\u8861\u91CF\u6587\u672C\u6216\u6570\u636E\u95F4\u76F8\u4F3C\u7A0B\u5EA6\u7684\u4E34\u754C\u503C,\u5F53\u8BA1\u7B97\u51FA\u7684\u6587\u672C\u76F8\u4F3C\u5EA6\u8FBE\u5230\u6216\u8D85\u8FC7\u8BE5\u503C\u65F6\uFF0C\u4F1A\u8FD4\u56DE\u8BE5\u6587\u672C \u3002"}),children:(0,r.jsx)(K.Z,{type:"spark-info-line",className:b["info-icon"]})})]}),children:(0,r.jsx)(g.Z,{min:.01,max:.99,step:.01,style:{width:480},value:p.similarity_threshold,onChange:function(a){I({similarity_threshold:a})}})}),(0,r.jsx)(S.Z.Item,{label:(0,r.jsxs)("div",{className:b["form-item-label"],children:[(0,r.jsx)("span",{children:"Topk"}),(0,r.jsx)(P.Z,{title:t.Z.get({id:"main.pages.Knowledge.Editor.index.topKReturnObjects",dm:"top-k\u4EE3\u8868\u91CD\u6392\u540E\u8FD4\u56DE\u7684\u7B26\u5408\u76F8\u4F3C\u5EA6\u8981\u6C42\u7684\u5BF9\u8C61\u4E2A\u6570"}),children:(0,r.jsx)(K.Z,{type:"spark-info-line",className:b["info-icon"]})})]}),children:(0,r.jsx)(g.Z,{min:1,max:10,step:1,style:{width:480},value:p.top_k,onChange:function(a){I({top_k:a})}})})]})})})}},2821:function(w,j,e){var u=e(22970),y=e(2784),C=e(78922),O=function(m){var f=(0,u.CR)((0,y.useState)(m),2),_=f[0],g=f[1],t=(0,y.useCallback)(function(o){g(function(c){var d=(0,C.mf)(o)?o(c):o;return d?(0,u.pi)((0,u.pi)({},c),d):c})},[]);return[_,t]};j.Z=O}}]);
