var Ve=Object.defineProperty;var Ue=(I,o,t)=>o in I?Ve(I,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):I[o]=t;var ge=(I,o,t)=>Ue(I,typeof o!="symbol"?o+"":o,t);import{_ as ce,I as E}from"./_plugin-vue_export-helper-C9LWA8Gp.js";import{d as re,c as r,o as i,e,t as s,f as he,r as B,x as ae,g as oe,h as be,i as k,u as l,b as U,q as A,w as j,v as z,F as H,j as X,p as Z,C as Ae,a as ie,z as te,T as Ce,D as Pe,E as Se,s as me,B as we,G as Be,k as Ne,H as De,I as Te}from"./index-DD6ifXSP.js";import{L as Fe}from"./index-CJEIDQCi.js";const Le={class:"switch"},Re=["checked"],Oe={class:"switch-label"},Ie=re({__name:"index",props:{enabled:{type:Boolean},label:{}},emits:["update:switchValue"],setup(I,{emit:o}){const t=o,_=$=>{const g=$.target.checked;t("update:switchValue",g)};return($,g)=>(i(),r("label",Le,[e("input",{type:"checkbox",checked:$.enabled,onChange:_},null,40,Re),g[0]||(g[0]=e("span",{class:"slider"},null,-1)),e("span",Oe,s($.label),1)]))}}),Ge=ce(Ie,[["__scopeId","data-v-7775bd2b"]]);class fe{static async getConfigsByGroup(o){try{const t=await fetch(`${this.BASE_URL}/group/${o}`);if(!t.ok)throw new Error(`Failed to get ${o} group configuration: ${t.status}`);return await t.json()}catch(t){throw console.error(`Failed to get ${o} group configuration:`,t),t}}static async batchUpdateConfigs(o){if(o.length===0)return{success:!0,message:"No configuration needs to be updated"};try{const t=await fetch(`${this.BASE_URL}/batch-update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok)throw new Error(`Batch update configuration failed: ${t.status}`);return{success:!0,message:"Configuration saved successfully"}}catch(t){return console.error("Batch update configuration failed:",t),{success:!1,message:t instanceof Error?t.message:"Update failed, please try again"}}}static async getConfigById(o){try{const t=await fetch(`${this.BASE_URL}/${o}`);if(!t.ok)throw new Error(`Failed to get configuration item: ${t.status}`);return await t.json()}catch(t){throw console.error(`Failed to get configuration item[${o}]:`,t),t}}static async updateConfig(o){try{const t=await fetch(`${this.BASE_URL}/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok)throw new Error(`Failed to update configuration item: ${t.status}`);return{success:!0,message:"Configuration updated successfully"}}catch(t){return console.error("Failed to update configuration item:",t),{success:!1,message:t instanceof Error?t.message:"Update failed, please try again"}}}}ge(fe,"BASE_URL","/api/config");const je={class:"config-panel"},qe={class:"config-header"},Ke={class:"header-left"},Je={class:"config-stats"},ze={class:"stat-item"},He={class:"stat-value"},Xe={key:0,class:"stat-item"},Ye={class:"stat-value modified"},Qe={class:"header-right"},We={class:"import-export-actions"},Ze={class:"action-btn",title:"导入配置"},eo={class:"search-box"},oo=["placeholder"],to={key:0,class:"loading-container"},so={key:1,class:"config-groups"},no={class:"group-header"},ao={class:"group-info"},lo={class:"group-icon"},io={class:"group-actions"},co=["onClick","disabled","title"],ro={class:"sub-groups"},uo=["onClick"],po={class:"sub-group-info"},go={class:"sub-group-title"},fo={class:"item-count"},mo={class:"config-items"},vo={key:0,class:"config-item-content vertical-layout"},ho={class:"config-item-info"},yo={class:"config-item-header"},_o={class:"config-label"},bo={class:"type-badge boolean"},Co={key:0,class:"modified-badge"},$o=["title"],wo={class:"config-control"},ko=["value","onChange"],So=["value"],To={key:1,class:"config-item-content vertical-layout"},Mo={class:"config-item-info"},Ao={class:"config-item-header"},xo={class:"config-label"},Eo={class:"type-badge select"},Vo={key:0,class:"modified-badge"},Uo=["title"],Po={class:"config-control"},Bo=["value","onChange"],No=["value"],Do={key:2,class:"config-item-content vertical-layout"},Fo={class:"config-item-info"},Lo={class:"config-item-header"},Ro={class:"config-label"},Oo={class:"type-badge textarea"},Io={key:0,class:"modified-badge"},Go=["title"],jo={class:"config-control"},qo=["value","onInput"],Ko={key:3,class:"config-item-content vertical-layout"},Jo={class:"config-item-info"},zo={class:"config-item-header"},Ho={class:"config-label"},Xo={class:"type-badge number"},Yo={key:0,class:"modified-badge"},Qo=["title"],Wo={key:0,class:"config-meta"},Zo={class:"range-info"},et={class:"config-control"},ot=["value","onInput","min","max"],tt={key:4,class:"config-item-content vertical-layout"},st={class:"config-item-info"},nt={class:"config-item-header"},at={class:"config-label"},lt={class:"type-badge string"},it={key:0,class:"modified-badge"},ct=["title"],rt={class:"config-control"},dt=["value","onInput"],ut={key:2,class:"empty-state"},pt=re({__name:"basicConfig",setup(I){const{t:o}=he(),t=B(!0),_=B(!1),$=B([]),g=B(new Map),m=B(new Set),v=ae({show:!1,text:"",type:"success"}),x=B(""),D={maxSteps:"智能体执行最大步数",resetAllAgents:"重置所有agent",maxMemory:"能记住的最大消息数",headlessBrowser:"是否使用无头浏览器模式",browserTimeout:o("config.basicConfig.browserTimeout"),browserDebug:"浏览器debug模式",autoOpenBrowser:"启动时自动打开浏览器",consoleInteractive:"启用控制台交互模式",systemName:"系统名称",language:"默认语言",maxThreads:"最大线程数",timeoutSeconds:o("config.basicConfig.requestTimeout")},S={manus:"智能体设置",browser:"浏览器设置",interaction:"交互设置",system:"系统设置",performance:"性能设置"},M={manus:"🤖",browser:"🌐",interaction:"🖥️",system:"⚙️",performance:"⚡"},q={agent:"智能体设置",browser:"浏览器设置",interaction:"交互设置",system:"系统设置",performance:"性能设置",general:"常规设置"},Q=oe(()=>$.value.some(c=>c.subGroups.some(h=>h.items.some(b=>g.value.get(b.id)!==b.configValue)))),se=c=>c==="true",F=c=>parseFloat(c)||0,p=c=>({maxSteps:1,browserTimeout:1,maxThreads:1,timeoutSeconds:5,maxMemory:1})[c]||1,O=c=>({maxSteps:100,browserTimeout:600,maxThreads:32,timeoutSeconds:300,maxMemory:1e3})[c]||1e4,ee=c=>typeof c=="string"?c:c.value,G=c=>typeof c=="string"?c:c.label,ue=(c,h)=>{if(typeof h=="boolean")return h.toString();if(typeof h=="string"){if(c.options&&c.options.length>0){const b=c.options.find(C=>(typeof C=="string"?C:C.label)===h||(typeof C=="string"?C:C.value)===h);if(b)return typeof b=="string"?b:b.value}return h}return String(h)},T=(c,h,b=!1)=>{let C;c.inputType==="BOOLEAN"||c.inputType==="CHECKBOX"?C=ue(c,h):C=String(h),c.configValue!==C&&(c.configValue=C,c._modified=!0,(b||c.inputType==="BOOLEAN"||c.inputType==="CHECKBOX"||c.inputType==="SELECT")&&a())};let n=null;const a=()=>{n&&clearTimeout(n),n=window.setTimeout(()=>{N()},500)},f=(c,h="success")=>{v.text=c,v.type=h,v.show=!0,setTimeout(()=>{v.show=!1},3e3)},L=async()=>{try{t.value=!0;const h=["manus","browser","interaction","system","performance"].map(async C=>{try{const d=await fe.getConfigsByGroup(C);if(d.length===0)return null;const V=d.map(K=>({...K,displayName:K.description??(D[K.configKey]||K.configKey),min:p(K.configKey),max:O(K.configKey)}));V.forEach(K=>{g.value.set(K.id,K.configValue)});const P=new Map;V.forEach(K=>{const ne=K.configSubGroup??"general";P.has(ne)||P.set(ne,[]),P.get(ne).push(K)});const Y=Array.from(P.entries()).map(([K,ne])=>({name:K,displayName:q[K]||K,items:ne}));return{name:C,displayName:S[C]||C,subGroups:Y}}catch(d){return console.warn(`加载配置组 ${C} 失败，跳过:`,d),null}}),b=await Promise.all(h);$.value=b.filter(C=>C!==null),console.log("配置加载完成:",$.value)}catch(c){console.error("加载配置失败:",c),f(o("config.basicConfig.loadConfigFailed"),"error")}finally{t.value=!1}},N=async()=>{if(!(_.value||!Q.value))try{_.value=!0;const c=[];if($.value.forEach(b=>{b.subGroups.forEach(C=>{const d=C.items.filter(V=>V._modified);c.push(...d)})}),c.length===0){f("没有需要保存的修改");return}const h=await fe.batchUpdateConfigs(c);h.success?(c.forEach(b=>{g.value.set(b.id,b.configValue),b._modified=!1}),f("配置保存成功")):f(h.message||"保存失败","error")}catch(c){console.error("保存配置失败:",c),f(o("config.basicConfig.saveFailed"),"error")}finally{_.value=!1}},J=async c=>{if(confirm(`确定要重置 "${S[c]||c}" 组的所有配置吗？`))try{_.value=!0;const b=$.value.find(V=>V.name===c);if(!b)return;const C=[];if(b.subGroups.forEach(V=>{V.items.forEach(P=>{const Y=W(P.configKey);Y!==P.configValue&&C.push({...P,configValue:Y})})}),C.length===0){f("该组配置已是默认值");return}const d=await fe.batchUpdateConfigs(C);d.success?(await L(),f(`成功重置 ${C.length} 项配置`)):f(d.message||"重置失败","error")}catch(b){console.error("重置组配置失败:",b),f(o("config.basicConfig.resetFailed"),"error")}finally{_.value=!1}},W=c=>({systemName:"JTaskPilot",language:"zh-CN",maxThreads:"8",timeoutSeconds:"60",autoOpenBrowser:"false",headlessBrowser:"true",maxMemory:"1000"})[c]||"",ye=(c,h)=>{const b=`${c}-${h}`;m.value.has(b)?m.value.delete(b):m.value.add(b)},pe=(c,h)=>m.value.has(`${c}-${h}`),w=oe(()=>{const c=$.value.reduce((b,C)=>b+C.subGroups.reduce((d,V)=>d+V.items.length,0),0),h=$.value.reduce((b,C)=>b+C.subGroups.reduce((d,V)=>d+V.items.filter(P=>g.value.get(P.id)!==P.configValue).length,0),0);return{total:c,modified:h}}),u=oe(()=>{if(!x.value.trim())return $.value;const c=x.value.toLowerCase();return $.value.map(h=>({...h,subGroups:h.subGroups.map(b=>({...b,items:b.items.filter(C=>C.displayName.toLowerCase().includes(c)||C.configKey.toLowerCase().includes(c)||C.description&&C.description.toLowerCase().includes(c))})).filter(b=>b.items.length>0)})).filter(h=>h.subGroups.length>0)}),R=()=>{try{const c={timestamp:new Date().toISOString(),version:"1.0",configs:$.value.reduce((d,V)=>(V.subGroups.forEach(P=>{P.items.forEach(Y=>{d[Y.configKey]=Y.configValue})}),d),{})},h=JSON.stringify(c,null,2),b=new Blob([h],{type:"application/json"}),C=document.createElement("a");C.href=URL.createObjectURL(b),C.download=`config-export-${new Date().toISOString().split("T")[0]}.json`,C.click(),f("配置导出成功")}catch(c){console.error("导出配置失败:",c),f("导出失败","error")}},y=c=>{var d;const h=c.target,b=(d=h.files)==null?void 0:d[0];if(!b)return;const C=new FileReader;C.onload=async V=>{var P;try{const Y=JSON.parse((P=V.target)==null?void 0:P.result);if(!Y.configs)throw new Error("无效的配置文件格式");if(!confirm("确定要导入配置吗？这将覆盖当前配置。"))return;_.value=!0;const ne=[];if($.value.forEach(xe=>{xe.subGroups.forEach(Ee=>{Ee.items.forEach($e=>{Object.prototype.hasOwnProperty.call(Y.configs,$e.configKey)&&ne.push({...$e,configValue:Y.configs[$e.configKey]})})})}),ne.length===0){f("没有找到可导入的配置项");return}const ke=await fe.batchUpdateConfigs(ne);ke.success?(await L(),f(`成功导入 ${ne.length} 项配置`)):f(ke.message||"导入失败","error")}catch(Y){console.error("导入配置失败:",Y),f(o("config.basicConfig.importFailed"),"error")}finally{_.value=!1,h.value=""}},C.readAsText(b)};return be(()=>{L()}),(c,h)=>(i(),r("div",je,[e("div",qe,[e("div",Ke,[e("h2",null,s(l(o)("config.basicConfig.title")),1),e("div",Je,[e("span",ze,[h[1]||(h[1]=e("span",{class:"stat-label"},"总配置项:",-1)),e("span",He,s(w.value.total),1)]),w.value.modified>0?(i(),r("span",Xe,[h[2]||(h[2]=e("span",{class:"stat-label"},"已修改:",-1)),e("span",Ye,s(w.value.modified),1)])):U("",!0)])]),e("div",Qe,[e("div",We,[e("button",{onClick:R,class:"action-btn",title:"导出配置"}," 📤 "),e("label",Ze,[h[3]||(h[3]=A(" 📥 ")),e("input",{type:"file",accept:".json",onChange:y,style:{display:"none"}},null,32)])]),e("div",eo,[j(e("input",{"onUpdate:modelValue":h[0]||(h[0]=b=>x.value=b),type:"text",placeholder:c.$t("config.search"),class:"search-input"},null,8,oo),[[z,x.value]]),h[4]||(h[4]=e("span",{class:"search-icon"},"🔍",-1))])])]),t.value?(i(),r("div",to,[h[5]||(h[5]=e("div",{class:"loading-spinner"},null,-1)),e("p",null,s(c.$t("config.loading")),1)])):u.value.length>0?(i(),r("div",so,[(i(!0),r(H,null,X(u.value,b=>(i(),r("div",{key:b.name,class:"config-group"},[e("div",no,[e("div",ao,[e("span",lo,s(M[b.name]||"⚙️"),1)]),e("div",io,[e("button",{onClick:C=>J(b.name),class:"reset-btn",disabled:_.value,title:c.$t("config.resetGroupConfirm")},s(c.$t("config.reset")),9,co)]),h[6]||(h[6]=e("div",{class:"group-divider"},null,-1))]),e("div",ro,[(i(!0),r(H,null,X(b.subGroups,C=>(i(),r("div",{key:C.name,class:"sub-group"},[e("div",{class:"sub-group-header",onClick:d=>ye(b.name,C.name)},[e("div",po,[h[7]||(h[7]=e("span",{class:"sub-group-icon"},"📁",-1)),e("h4",go,s(C.displayName),1),e("span",fo,"("+s(C.items.length)+")",1)]),e("span",{class:Z(["collapse-icon",{collapsed:pe(b.name,C.name)}])}," ▼ ",2)],8,uo),j(e("div",mo,[(i(!0),r(H,null,X(C.items,d=>(i(),r("div",{key:d.id,class:Z(["config-item",{modified:g.value.get(d.id)!==d.configValue}])},[d.inputType==="BOOLEAN"||d.inputType==="CHECKBOX"?(i(),r("div",vo,[e("div",ho,[e("div",yo,[e("label",_o,[A(s(d.description||d.displayName)+" ",1),e("span",bo,s(d.inputType==="CHECKBOX"?c.$t("config.types.checkbox"):c.$t("config.types.boolean")),1),g.value.get(d.id)!==d.configValue?(i(),r("span",Co,s(c.$t("config.modified")),1)):U("",!0)]),e("span",{class:"config-key",title:d.configKey},s(d.configKey),9,$o)])]),e("div",wo,[d.options&&d.options.length>0?(i(),r("select",{key:0,class:"config-input select-input",value:d.configValue,onChange:V=>{var P;return T(d,((P=V.target)==null?void 0:P.value)||"")}},[(i(!0),r(H,null,X(d.options,V=>(i(),r("option",{key:ee(V),value:ee(V)},s(G(V)),9,So))),128))],40,ko)):(i(),ie(Ge,{key:1,enabled:se(d.configValue),label:"","onUpdate:switchValue":V=>T(d,V)},null,8,["enabled","onUpdate:switchValue"]))])])):d.inputType==="SELECT"?(i(),r("div",To,[e("div",Mo,[e("div",Ao,[e("label",xo,[A(s(d.description||d.displayName)+" ",1),e("span",Eo,s(c.$t("config.types.select")),1),g.value.get(d.id)!==d.configValue?(i(),r("span",Vo,s(c.$t("config.modified")),1)):U("",!0)]),e("span",{class:"config-key",title:d.configKey},s(d.configKey),9,Uo)])]),e("div",Po,[e("select",{class:"config-input select-input",value:d.configValue,onChange:V=>{var P;return T(d,((P=V.target)==null?void 0:P.value)||"")}},[(i(!0),r(H,null,X(d.options||[],V=>(i(),r("option",{key:ee(V),value:ee(V)},s(G(V)),9,No))),128))],40,Bo)])])):d.inputType==="TEXTAREA"?(i(),r("div",Do,[e("div",Fo,[e("div",Lo,[e("label",Ro,[A(s(d.description||d.displayName)+" ",1),e("span",Oo,s(c.$t("config.types.textarea")),1),g.value.get(d.id)!==d.configValue?(i(),r("span",Io,s(c.$t("config.modified")),1)):U("",!0)]),e("span",{class:"config-key",title:d.configKey},s(d.configKey),9,Go)])]),e("div",jo,[e("textarea",{class:"config-input textarea-input",value:d.configValue,onInput:V=>{var P;return T(d,((P=V.target)==null?void 0:P.value)||"")},onBlur:a,rows:"3"},null,40,qo)])])):d.inputType==="NUMBER"?(i(),r("div",Ko,[e("div",Jo,[e("div",zo,[e("label",Ho,[A(s(d.description||d.displayName)+" ",1),e("span",Xo,s(c.$t("config.types.number")),1),g.value.get(d.id)!==d.configValue?(i(),r("span",Yo,s(c.$t("config.modified")),1)):U("",!0)]),e("span",{class:"config-key",title:d.configKey},s(d.configKey),9,Qo),d.min||d.max?(i(),r("div",Wo,[e("span",Zo,s(c.$t("config.range"))+": "+s(d.min||0)+" - "+s(d.max||"∞"),1)])):U("",!0)])]),e("div",et,[e("input",{type:"number",class:"config-input number-input",value:F(d.configValue),onInput:V=>{var P;return T(d,((P=V.target)==null?void 0:P.value)||"")},onBlur:a,min:d.min||1,max:d.max||1e4},null,40,ot)])])):(i(),r("div",tt,[e("div",st,[e("div",nt,[e("label",at,[A(s(d.description||d.displayName)+" ",1),e("span",lt,s(d.inputType==="TEXT"?c.$t("config.types.text"):c.$t("config.types.string")),1),g.value.get(d.id)!==d.configValue?(i(),r("span",it,s(c.$t("config.modified")),1)):U("",!0)]),e("span",{class:"config-key",title:d.configKey},s(d.configKey),9,ct)])]),e("div",rt,[e("input",{type:"text",class:"config-input text-input",value:d.configValue,onInput:V=>{var P;return T(d,((P=V.target)==null?void 0:P.value)||"")},onBlur:a},null,40,dt)])]))],2))),128))],512),[[Ae,!pe(b.name,C.name)]])]))),128))])]))),128))])):(i(),r("div",ut,[e("p",null,s(c.$t("config.notFound")),1)])),k(Ce,{name:"message-fade"},{default:te(()=>[v.show?(i(),r("div",{key:0,class:Z(["message-toast",v.type])},s(v.text),3)):U("",!0)]),_:1})]))}}),gt=ce(pt,[["__scopeId","data-v-a5b3ac06"]]),ft={class:"modal-header"},mt={class:"modal-content"},vt={class:"modal-footer"},ht=re({__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(I){const o=t=>{t.target===t.currentTarget&&(t.stopPropagation(),t.preventDefault())};return(t,_)=>(i(),ie(Pe,{to:"body"},[k(Ce,{name:"modal"},{default:te(()=>[I.modelValue?(i(),r("div",{key:0,class:"modal-overlay",onClick:o},[e("div",{class:"modal-container",onClick:_[3]||(_[3]=me(()=>{},["stop"]))},[e("div",ft,[e("h3",null,s(I.title),1),e("button",{class:"close-btn",onClick:_[0]||(_[0]=$=>t.$emit("update:modelValue",!1))},[k(l(E),{icon:"carbon:close"})])]),e("div",mt,[Se(t.$slots,"default",{},void 0,!0)]),e("div",vt,[Se(t.$slots,"footer",{},()=>[e("button",{class:"cancel-btn",onClick:_[1]||(_[1]=$=>t.$emit("update:modelValue",!1))},s(t.$t("common.cancel")),1),e("button",{class:"confirm-btn",onClick:_[2]||(_[2]=$=>t.$emit("confirm"))},s(t.$t("common.confirm")),1)],!0)])])])):U("",!0)]),_:3})]))}}),ve=ce(ht,[["__scopeId","data-v-dcd19f81"]]),yt={class:"tool-selection-content"},_t={class:"tool-controls"},bt={class:"search-container"},Ct={class:"sort-container"},$t={class:"tool-summary"},wt={class:"summary-text"},kt={key:0,class:"tool-groups"},St=["onClick"],Tt={class:"group-title-area"},Mt={class:"group-name"},At={class:"group-count"},xt={class:"group-enable-all"},Et=["checked","onChange","data-group"],Vt={class:"tool-info"},Ut={class:"tool-selection-name"},Pt={key:0,class:"tool-selection-desc"},Bt={class:"tool-actions"},Nt=["checked","onChange"],Dt={key:1,class:"empty-state"},Ft=re({__name:"index",props:{modelValue:{type:Boolean},tools:{},selectedToolIds:{}},emits:["update:modelValue","confirm"],setup(I,{emit:o}){const t=I,_=o,$=oe({get:()=>t.modelValue,set:n=>_("update:modelValue",n)}),g=B(""),m=B("group"),v=B(new Set),x=B([]),D=(n,a)=>{const f=document.querySelector(`input[data-group="${n}"]`);f&&(f.indeterminate=O(a))};we(()=>t.selectedToolIds,n=>{x.value=[...n]},{immediate:!0});const S=oe(()=>{let n=t.tools.filter(a=>a.key);if(g.value){const a=g.value.toLowerCase();n=n.filter(f=>{var L;return f.name.toLowerCase().includes(a)||f.description.toLowerCase().includes(a)||(((L=f.serviceGroup)==null?void 0:L.toLowerCase().includes(a))??!1)})}switch(m.value){case"name":n=[...n].sort((a,f)=>a.name.localeCompare(f.name));break;case"enabled":n=[...n].sort((a,f)=>{const L=x.value.includes(a.key),N=x.value.includes(f.key);return L&&!N?-1:!L&&N?1:a.name.localeCompare(f.name)});break;case"group":default:n=[...n].sort((a,f)=>{const L=a.serviceGroup??"未分组",N=f.serviceGroup??"未分组";return L!==N?L.localeCompare(N):a.name.localeCompare(f.name)});break}return n}),M=oe(()=>{const n=new Map;return S.value.forEach(a=>{const f=a.serviceGroup??"未分组";n.has(f)||n.set(f,[]),n.get(f).push(a)}),new Map([...n.entries()].sort())}),q=oe(()=>S.value.length);we([x,M],()=>{Ne(()=>{for(const[n,a]of M.value)D(n,a)})},{flush:"post",deep:!1});const Q=n=>x.value.includes(n),se=(n,a)=>{a.stopPropagation();const L=a.target.checked;if(!n){console.error("toolKey is undefined, cannot proceed");return}L?x.value.includes(n)||(x.value=[...x.value,n]):x.value=x.value.filter(N=>N!==n)},F=n=>n.filter(a=>x.value.includes(a.key)),p=n=>n.length>0&&n.every(a=>x.value.includes(a.key)),O=n=>{const a=F(n).length;return a>0&&a<n.length},ee=(n,a)=>{a.stopPropagation();const L=a.target.checked,N=n.map(J=>J.key);if(L){const J=[...x.value];N.forEach(W=>{J.includes(W)||J.push(W)}),x.value=J}else x.value=x.value.filter(J=>!N.includes(J))},G=n=>{v.value.has(n)?v.value.delete(n):v.value.add(n)},ue=()=>{_("confirm",[...x.value]),_("update:modelValue",!1)},T=()=>{x.value=[...t.selectedToolIds],_("update:modelValue",!1)};return we($,n=>{if(n){v.value.clear();const a=Array.from(M.value.keys());a.length>1&&a.slice(1).forEach(f=>{v.value.add(f)})}}),(n,a)=>(i(),ie(ve,{modelValue:$.value,"onUpdate:modelValue":[a[4]||(a[4]=f=>$.value=f),T],title:"选择工具",onConfirm:ue},{default:te(()=>[e("div",yt,[e("div",_t,[e("div",bt,[j(e("input",{"onUpdate:modelValue":a[0]||(a[0]=f=>g.value=f),type:"text",class:"search-input",placeholder:"搜索工具..."},null,512),[[z,g.value]])]),e("div",Ct,[j(e("select",{"onUpdate:modelValue":a[1]||(a[1]=f=>m.value=f),class:"sort-select"},a[5]||(a[5]=[e("option",{value:"group"},"按服务组排序",-1),e("option",{value:"name"},"按名称排序",-1),e("option",{value:"enabled"},"按启用状态排序",-1)]),512),[[Be,m.value]])])]),e("div",$t,[e("span",wt," 共 "+s(M.value.size)+" 个服务组，"+s(q.value)+" 个工具 (已选择 "+s(x.value.length)+" 个) ",1)]),M.value.size>0?(i(),r("div",kt,[(i(!0),r(H,null,X(M.value,([f,L])=>(i(),r("div",{key:f,class:"tool-group"},[e("div",{class:Z(["tool-group-header",{collapsed:v.value.has(f)}]),onClick:N=>G(f)},[e("div",Tt,[k(l(E),{icon:v.value.has(f)?"carbon:chevron-right":"carbon:chevron-down",class:"collapse-icon"},null,8,["icon"]),k(l(E),{icon:"carbon:folder",class:"group-icon"}),e("span",Mt,s(f),1),e("span",At," ("+s(F(L).length)+"/"+s(L.length)+") ",1)]),e("div",{class:"group-actions",onClick:a[2]||(a[2]=me(()=>{},["stop"]))},[e("label",xt,[e("input",{type:"checkbox",class:"group-enable-checkbox",checked:p(L),onChange:N=>ee(L,N),"data-group":f},null,40,Et),a[6]||(a[6]=e("span",{class:"enable-label"},"启用全部",-1))])])],10,St),e("div",{class:Z(["tool-group-content",{collapsed:v.value.has(f)}])},[(i(!0),r(H,null,X(L.filter(N=>N&&N.key),N=>(i(),r("div",{key:N.key,class:"tool-selection-item"},[e("div",Vt,[e("div",Ut,s(N.name),1),N.description?(i(),r("div",Pt,s(N.description),1)):U("",!0)]),e("div",Bt,[e("label",{class:"tool-enable-switch",onClick:a[3]||(a[3]=me(()=>{},["stop"]))},[e("input",{type:"checkbox",class:"tool-enable-checkbox",checked:Q(N.key),onChange:J=>se(N.key,J)},null,40,Nt),a[7]||(a[7]=e("span",{class:"tool-enable-slider"},null,-1))])])]))),128))],2)]))),128))])):(i(),r("div",Dt,[k(l(E),{icon:"carbon:tools",class:"empty-icon"}),a[8]||(a[8]=e("p",null,"没有找到工具",-1))]))])]),_:1},8,["modelValue"]))}}),Lt=ce(Ft,[["__scopeId","data-v-e40ba703"]]);class de{static async handleResponse(o){if(!o.ok)try{const t=await o.json();throw new Error(t.message||`API request failed: ${o.status}`)}catch{throw new Error(`API request failed: ${o.status} ${o.statusText}`)}return o}static async getAllAgents(){try{const o=await fetch(this.BASE_URL);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get Agent list:",o),o}}static async getAgentById(o){try{const t=await fetch(`${this.BASE_URL}/${o}`);return await(await this.handleResponse(t)).json()}catch(t){throw console.error(`Failed to get Agent[${o}] details:`,t),t}}static async createAgent(o){try{const t=await fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return await(await this.handleResponse(t)).json()}catch(t){throw console.error("Failed to create Agent:",t),t}}static async updateAgent(o,t){try{const _=await fetch(`${this.BASE_URL}/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(_)).json()}catch(_){throw console.error(`Failed to update Agent[${o}]:`,_),_}}static async deleteAgent(o){try{const t=await fetch(`${this.BASE_URL}/${o}`,{method:"DELETE"});if(t.status===400)throw new Error("Cannot delete default Agent");await this.handleResponse(t)}catch(t){throw console.error(`Failed to delete Agent[${o}]:`,t),t}}static async getAvailableTools(){try{const o=await fetch(`${this.BASE_URL}/tools`);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get available tools list:",o),o}}}ge(de,"BASE_URL","/api/agents");class le{static async handleResponse(o){if(!o.ok)try{const t=await o.json();throw new Error(t.message||`API request failed: ${o.status}`)}catch{throw new Error(`API request failed: ${o.status} ${o.statusText}`)}return o}static async getAllModels(){try{const o=await fetch(this.BASE_URL);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get Model list:",o),o}}static async getAllTypes(){try{const o=await fetch(`${this.BASE_URL}/types`);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get Model list:",o),o}}static async getModelById(o){try{const t=await fetch(`${this.BASE_URL}/${o}`);return await(await this.handleResponse(t)).json()}catch(t){throw console.error(`Failed to get Model[${o}] details:`,t),t}}static async createModel(o){try{const t=await fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return await(await this.handleResponse(t)).json()}catch(t){throw console.error("Failed to create Model:",t),t}}static async updateModel(o,t){try{const _=await fetch(`${this.BASE_URL}/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(_)).json()}catch(_){throw console.error(`Failed to update Model[${o}]:`,_),_}}static async deleteModel(o){try{const t=await fetch(`${this.BASE_URL}/${o}`,{method:"DELETE"});if(t.status===400)throw new Error("Cannot delete default Model");await this.handleResponse(t)}catch(t){throw console.error(`Failed to delete Model[${o}]:`,t),t}}}ge(le,"BASE_URL","/api/models");const Rt={class:"config-panel"},Ot={class:"panel-header"},It={class:"panel-actions"},Gt=["disabled"],jt={class:"agent-layout"},qt={class:"agent-list"},Kt={class:"list-header"},Jt={class:"agent-count"},zt={key:0,class:"agents-container"},Ht=["onClick"],Xt={class:"agent-card-header"},Yt={class:"agent-name"},Qt={class:"agent-desc"},Wt={key:0,class:"agent-model"},Zt={class:"model-tag"},es={class:"model-tag"},os={key:1,class:"agent-tools"},ts={key:0,class:"tool-more"},ss={key:1,class:"loading-state"},ns={key:2,class:"empty-state"},as={key:0,class:"agent-detail"},ls={class:"detail-header"},is={class:"detail-actions"},cs={class:"form-item"},rs=["placeholder"],ds={class:"form-item"},us=["placeholder"],ps={class:"form-item"},gs=["value","placeholder"],fs={class:"model-section"},ms={class:"form-item"},vs={class:"model-chooser"},hs=["title"],ys={key:0,class:"current-model"},_s={class:"model-type"},bs={class:"model-name"},Cs={key:1,class:"current-model"},$s={class:"current-model"},ws={class:"dropdown-header"},ks={class:"model-options"},Ss=["onClick"],Ts={class:"model-type"},Ms={class:"model-name"},As={class:"tools-section"},xs={class:"assigned-tools"},Es={class:"section-header"},Vs={class:"tools-grid"},Us={class:"tool-info"},Ps={class:"tool-name"},Bs={class:"tool-desc"},Ns={key:0,class:"no-tools"},Ds={key:1,class:"no-selection"},Fs={class:"modal-form"},Ls={class:"form-item"},Rs=["placeholder"],Os={class:"form-item"},Is=["placeholder"],Gs={class:"form-item"},js=["value","placeholder"],qs={class:"delete-confirm"},Ks={class:"warning-text"},Js=re({__name:"agentConfig",setup(I){const{t:o}=he(),t=B(!1),_=B(""),$=B(""),g=ae([]),m=B(null),v=ae([]),x=B(!1),D=B(!1),S=B(!1),M=B(!1),q=B(null),Q=ae([]),se=()=>{M.value=!M.value},F=w=>{q.value=w,M.value=!1},p=ae({name:"",description:"",nextStepPrompt:""}),O=w=>{const u=v.find(R=>R.key===w);return u?u.name:w},ee=w=>{const u=v.find(R=>R.key===w);return u?u.description:""},G=(w,u)=>{u==="success"?($.value=w,setTimeout(()=>{$.value=""},3e3)):(_.value=w,setTimeout(()=>{_.value=""},5e3))},ue=async()=>{t.value=!0;try{const[w,u,R]=await Promise.all([de.getAllAgents(),de.getAvailableTools(),le.getAllModels()]),y=w.map(c=>({...c,availableTools:c.availableTools,...R}));g.splice(0,g.length,...y),v.splice(0,v.length,...u),Q.splice(0,Q.length,...R),y.length>0&&await T(y[0])}catch(w){console.error("加载数据失败:",w),G(o("config.agentConfig.loadDataFailed")+": "+w.message,"error");const u=[{key:"search-web",name:"网络搜索",description:"在互联网上搜索信息",enabled:!0,serviceGroup:"搜索服务"},{key:"search-local",name:"本地搜索",description:"在本地文件中搜索内容",enabled:!0,serviceGroup:"搜索服务"},{key:"file-read",name:"读取文件",description:"读取本地或远程文件内容",enabled:!0,serviceGroup:"文件服务"},{key:"file-write",name:"写入文件",description:"创建或修改文件内容",enabled:!0,serviceGroup:"文件服务"},{key:"file-delete",name:"删除文件",description:"删除指定的文件",enabled:!1,serviceGroup:"文件服务"},{key:"calculator",name:"计算器",description:"执行数学计算",enabled:!0,serviceGroup:"计算服务"},{key:"code-execute",name:"代码执行",description:"执行Python或JavaScript代码",enabled:!0,serviceGroup:"计算服务"},{key:"weather",name:"天气查询",description:"获取指定地区的天气信息",enabled:!0,serviceGroup:"信息服务"},{key:"currency",name:"汇率查询",description:"查询货币汇率信息",enabled:!0,serviceGroup:"信息服务"},{key:"email",name:"发送邮件",description:"发送电子邮件",enabled:!1,serviceGroup:"通信服务"},{key:"sms",name:"发送短信",description:"发送短信消息",enabled:!1,serviceGroup:"通信服务"}],R=[{id:"demo-1",name:"通用助手",description:"一个能够处理各种任务的智能助手",nextStepPrompt:"You are a helpful assistant that can answer questions and help with various tasks. What would you like me to help you with next?",availableTools:["search-web","calculator","weather"]},{id:"demo-2",name:"数据分析师",description:"专门用于数据分析和可视化的Agent",nextStepPrompt:"You are a data analyst assistant specialized in analyzing data and creating visualizations. Please provide the data you would like me to analyze.",availableTools:["file-read","file-write","calculator","code-execute"]}];v.splice(0,v.length,...u),g.splice(0,g.length,...R),R.length>0&&(m.value=R[0])}finally{t.value=!1}},T=async w=>{try{const u=await de.getAgentById(w.id);m.value={...u,availableTools:u.availableTools},q.value=u.model}catch(u){console.error("加载Agent详情失败:",u),G(o("config.agentConfig.loadDetailsFailed")+": "+u.message,"error"),m.value={...w,availableTools:w.availableTools}}},n=()=>{p.name="",p.description="",p.nextStepPrompt="",x.value=!0},a=async()=>{var w;if(!p.name.trim()||!p.description.trim()){G(o("config.agentConfig.requiredFields"),"error");return}try{const u={name:p.name.trim(),description:p.description.trim(),nextStepPrompt:((w=p.nextStepPrompt)==null?void 0:w.trim())??"",availableTools:[]},R=await de.createAgent(u);g.push(R),m.value=R,x.value=!1,G(o("config.agentConfig.createSuccess"),"success")}catch(u){G(o("config.agentConfig.createFailed")+": "+u.message,"error")}},f=()=>{S.value=!0},L=w=>{m.value&&(m.value.availableTools=[...w])},N=async()=>{if(m.value){if(!m.value.name.trim()||!m.value.description.trim()){G(o("config.agentConfig.requiredFields"),"error");return}try{m.value.model=q.value;const w=await de.updateAgent(m.value.id,m.value),u=g.findIndex(R=>R.id===w.id);u!==-1&&(g[u]=w),m.value=w,m.value.model=q.value,G(o("config.agentConfig.saveSuccess"),"success")}catch(w){G(o("config.agentConfig.saveFailed")+": "+w.message,"error")}}},J=()=>{D.value=!0},W=async()=>{if(m.value)try{await de.deleteAgent(m.value.id);const w=g.findIndex(u=>u.id===m.value.id);w!==-1&&g.splice(w,1),m.value=g.length>0?g[0]:null,D.value=!1,G(o("config.agentConfig.deleteSuccess"),"success")}catch(w){G(o("config.agentConfig.deleteFailed")+": "+w.message,"error")}},ye=()=>{const w=document.createElement("input");w.type="file",w.accept=".json",w.onchange=u=>{var y;const R=(y=u.target.files)==null?void 0:y[0];if(R){const c=new FileReader;c.onload=async h=>{var b;try{const C=JSON.parse((b=h.target)==null?void 0:b.result);if(!C.name||!C.description)throw new Error(o("config.agentConfig.invalidFormat"));const{id:d,...V}=C,P=await de.createAgent(V);g.push(P),m.value=P,G(o("config.agentConfig.importSuccess"),"success")}catch(C){G(o("config.agentConfig.importFailed")+": "+C.message,"error")}},c.readAsText(R)}},w.click()},pe=()=>{if(m.value)try{const w=JSON.stringify(m.value,null,2),u=new Blob([w],{type:"application/json"}),R=URL.createObjectURL(u),y=document.createElement("a");y.href=R,y.download=`agent-${m.value.name}-${new Date().toISOString().split("T")[0]}.json`,y.click(),URL.revokeObjectURL(R),G(o("config.agentConfig.exportSuccess"),"success")}catch(w){G(o("config.agentConfig.exportFailed")+": "+w.message,"error")}};return be(()=>{ue()}),(w,u)=>{var R;return i(),r("div",Rt,[e("div",Ot,[e("h2",null,s(l(o)("config.agentConfig.title")),1),e("div",It,[e("button",{class:"action-btn",onClick:ye},[k(l(E),{icon:"carbon:upload"}),A(" "+s(l(o)("config.agentConfig.import")),1)]),e("button",{class:"action-btn",onClick:pe,disabled:!m.value},[k(l(E),{icon:"carbon:download"}),A(" "+s(l(o)("config.agentConfig.export")),1)],8,Gt)])]),e("div",jt,[e("div",qt,[e("div",Kt,[e("h3",null,s(l(o)("config.agentConfig.configuredAgents")),1),e("span",Jt,"("+s(g.length)+s(l(o)("config.agentConfig.agentCount"))+")",1)]),t.value?U("",!0):(i(),r("div",zt,[(i(!0),r(H,null,X(g,y=>{var c,h;return i(),r("div",{key:y.id,class:Z(["agent-card",{active:((c=m.value)==null?void 0:c.id)===y.id}]),onClick:b=>T(y)},[e("div",Xt,[e("span",Yt,s(y.name),1),k(l(E),{icon:"carbon:chevron-right"})]),e("p",Qt,s(y.description),1),y.model?(i(),r("div",Wt,[e("span",Zt,s(y.model.type),1),e("span",es,s(y.model.modelName),1)])):U("",!0),((h=y.availableTools)==null?void 0:h.length)>0?(i(),r("div",os,[(i(!0),r(H,null,X(y.availableTools.slice(0,3),b=>(i(),r("span",{key:b,class:"tool-tag"},s(O(b)),1))),128)),y.availableTools.length>3?(i(),r("span",ts," +"+s(y.availableTools.length-3),1)):U("",!0)])):U("",!0)],10,Ht)}),128))])),t.value?(i(),r("div",ss,[k(l(E),{icon:"carbon:loading",class:"loading-icon"}),A(" "+s(l(o)("common.loading")),1)])):U("",!0),!t.value&&g.length===0?(i(),r("div",ns,[k(l(E),{icon:"carbon:bot",class:"empty-icon"}),e("p",null,s(l(o)("config.agentConfig.noAgent")),1)])):U("",!0),e("button",{class:"add-btn",onClick:n},[k(l(E),{icon:"carbon:add"}),A(" "+s(l(o)("config.agentConfig.createNew")),1)])]),m.value?(i(),r("div",as,[e("div",ls,[e("h3",null,s(m.value.name),1),e("div",is,[e("button",{class:"action-btn primary",onClick:N},[k(l(E),{icon:"carbon:save"}),A(" "+s(l(o)("common.save")),1)]),e("button",{class:"action-btn danger",onClick:J},[k(l(E),{icon:"carbon:trash-can"}),A(" "+s(l(o)("common.delete")),1)])])]),e("div",cs,[e("label",null,[A(s(l(o)("config.agentConfig.agentName"))+" ",1),u[15]||(u[15]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=y=>m.value.name=y),placeholder:l(o)("config.agentConfig.agentNamePlaceholder"),required:""},null,8,rs),[[z,m.value.name]])]),e("div",ds,[e("label",null,[A(s(l(o)("config.agentConfig.description"))+" ",1),u[16]||(u[16]=e("span",{class:"required"},"*",-1))]),j(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=y=>m.value.description=y),rows:"3",placeholder:l(o)("config.agentConfig.descriptionPlaceholder"),required:""},null,8,us),[[z,m.value.description]])]),e("div",ps,[e("label",null,s(l(o)("config.agentConfig.nextStepPrompt")),1),e("textarea",{value:m.value.nextStepPrompt||"",onInput:u[2]||(u[2]=y=>m.value.nextStepPrompt=y.target.value),rows:"8",placeholder:l(o)("config.agentConfig.nextStepPromptPlaceholder")},null,40,gs)]),e("div",fs,[e("h4",null,s(l(o)("config.agentConfig.modelConfiguration")),1),e("div",ms,[e("div",vs,[e("button",{class:"model-btn",onClick:se,title:w.$t("model.switch")},[k(l(E),{icon:"carbon:build-run",width:"18"}),q.value?(i(),r("span",ys,[e("span",_s,s(q.value.type),1),u[17]||(u[17]=e("span",{class:"spacer"},null,-1)),e("span",bs,s(q.value.modelName),1)])):(i(),r("span",Cs,[e("span",$s,s(l(o)("config.agentConfig.modelConfigurationLabel")),1)])),k(l(E),{icon:M.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,hs),M.value?(i(),r("div",{key:0,class:"model-dropdown",onClick:u[4]||(u[4]=me(()=>{},["stop"]))},[e("div",ws,[e("span",null,s(l(o)("config.agentConfig.modelConfigurationLabel")),1),e("button",{class:"close-btn",onClick:u[3]||(u[3]=y=>M.value=!1)},[k(l(E),{icon:"carbon:close",width:"16"})])]),e("div",ks,[(i(!0),r(H,null,X(Q,y=>{var c,h;return i(),r("button",{key:y.id,class:Z(["model-option",{active:((c=q.value)==null?void 0:c.id)===y.id}]),onClick:b=>F(y)},[e("span",Ts,s(y.type),1),e("span",Ms,s(y.modelName),1),((h=q.value)==null?void 0:h.id)===y.id?(i(),ie(l(E),{key:0,icon:"carbon:checkmark",width:"16",class:"check-icon"})):U("",!0)],10,Ss)}),128))])])):U("",!0),M.value?(i(),r("div",{key:1,class:"backdrop",onClick:u[5]||(u[5]=y=>M.value=!1)})):U("",!0)])])]),e("div",As,[e("h4",null,s(l(o)("config.agentConfig.toolConfiguration")),1),e("div",xs,[e("div",Es,[e("span",null,s(l(o)("config.agentConfig.assignedTools"))+" ("+s((m.value.availableTools||[]).length)+")",1),v.length>0?(i(),r("button",{key:0,class:"action-btn small",onClick:f},[k(l(E),{icon:"carbon:add"}),A(" "+s(l(o)("config.agentConfig.addRemoveTools")),1)])):U("",!0)]),e("div",Vs,[(i(!0),r(H,null,X(m.value.availableTools||[],y=>(i(),r("div",{key:y,class:"tool-item assigned"},[e("div",Us,[e("span",Ps,s(O(y)),1),e("span",Bs,s(ee(y)),1)])]))),128)),m.value.availableTools.length===0?(i(),r("div",Ns,[k(l(E),{icon:"carbon:tool-box"}),e("span",null,s(l(o)("config.agentConfig.noAssignedTools")),1)])):U("",!0)])])])])):(i(),r("div",Ds,[k(l(E),{icon:"carbon:bot",class:"placeholder-icon"}),e("p",null,s(l(o)("config.agentConfig.selectAgentHint")),1)]))]),k(ve,{modelValue:x.value,"onUpdate:modelValue":u[9]||(u[9]=y=>x.value=y),title:l(o)("config.agentConfig.newAgent"),onConfirm:a},{default:te(()=>[e("div",Fs,[e("div",Ls,[e("label",null,[A(s(l(o)("config.agentConfig.agentName"))+" ",1),u[18]||(u[18]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":u[6]||(u[6]=y=>p.name=y),placeholder:l(o)("config.agentConfig.agentNamePlaceholder"),required:""},null,8,Rs),[[z,p.name]])]),e("div",Os,[e("label",null,[A(s(l(o)("config.agentConfig.description"))+" ",1),u[19]||(u[19]=e("span",{class:"required"},"*",-1))]),j(e("textarea",{"onUpdate:modelValue":u[7]||(u[7]=y=>p.description=y),rows:"3",placeholder:l(o)("config.agentConfig.descriptionPlaceholder"),required:""},null,8,Is),[[z,p.description]])]),e("div",Gs,[e("label",null,s(l(o)("config.agentConfig.nextStepPrompt")),1),e("textarea",{value:p.nextStepPrompt||"",onInput:u[8]||(u[8]=y=>p.nextStepPrompt=y.target.value),rows:"8",placeholder:l(o)("config.agentConfig.nextStepPromptPlaceholder")},null,40,js)])])]),_:1},8,["modelValue","title"]),k(Lt,{modelValue:S.value,"onUpdate:modelValue":u[10]||(u[10]=y=>S.value=y),tools:v,"selected-tool-ids":((R=m.value)==null?void 0:R.availableTools)||[],onConfirm:L},null,8,["modelValue","tools","selected-tool-ids"]),k(ve,{modelValue:D.value,"onUpdate:modelValue":u[12]||(u[12]=y=>D.value=y),title:l(o)("config.agentConfig.deleteConfirm")},{footer:te(()=>[e("button",{class:"cancel-btn",onClick:u[11]||(u[11]=y=>D.value=!1)},s(l(o)("common.cancel")),1),e("button",{class:"confirm-btn danger",onClick:W},s(l(o)("common.delete")),1)]),default:te(()=>{var y;return[e("div",qs,[k(l(E),{icon:"carbon:warning",class:"warning-icon"}),e("p",null,[A(s(l(o)("config.agentConfig.deleteConfirmText"))+" ",1),e("strong",null,s((y=m.value)==null?void 0:y.name),1),A(" "+s(l(o)("common.confirm"))+"？",1)]),e("p",Ks,s(l(o)("config.agentConfig.deleteWarning")),1)])]}),_:1},8,["modelValue","title"]),_.value?(i(),r("div",{key:0,class:"error-toast",onClick:u[13]||(u[13]=y=>_.value="")},[k(l(E),{icon:"carbon:error"}),A(" "+s(_.value),1)])):U("",!0),$.value?(i(),r("div",{key:1,class:"success-toast",onClick:u[14]||(u[14]=y=>$.value="")},[k(l(E),{icon:"carbon:checkmark"}),A(" "+s($.value),1)])):U("",!0)])}}}),zs=ce(Js,[["__scopeId","data-v-3773cfa2"]]),Hs={class:"custom-select"},Xs=["title"],Ys={key:0,class:"current-option"},Qs={class:"option-name"},Ws={key:1,class:"current-option"},Zs={class:"dropdown-header"},en={class:"select-options"},on=["onClick"],tn={class:"option-name"},sn=re({__name:"index",props:{modelValue:{},options:{},placeholder:{},dropdownTitle:{},icon:{}},emits:["update:modelValue"],setup(I,{emit:o}){const t=I,_=o,$=B(!1),g=oe(()=>t.options.find(D=>D.id===t.modelValue)),m=D=>D.id===t.modelValue,v=()=>{$.value=!$.value},x=D=>{_("update:modelValue",D.id),$.value=!1};return(D,S)=>(i(),r("div",Hs,[e("button",{class:"select-btn",onClick:v,title:D.placeholder},[k(l(E),{icon:t.icon||"carbon:select-01",width:"18"},null,8,["icon"]),g.value?(i(),r("span",Ys,[e("span",Qs,s(g.value.name),1)])):(i(),r("span",Ws,s(D.placeholder),1)),k(l(E),{icon:$.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,Xs),k(Ce,{name:"slideDown"},{default:te(()=>[j(e("div",{class:"select-dropdown",onClick:S[1]||(S[1]=me(()=>{},["stop"]))},[e("div",Zs,[e("span",null,s(D.dropdownTitle),1),e("button",{class:"close-btn",onClick:S[0]||(S[0]=M=>$.value=!1)},[k(l(E),{icon:"carbon:close",width:"16"})])]),e("div",en,[(i(!0),r(H,null,X(D.options,M=>(i(),r("button",{key:M.id,class:Z(["select-option",{active:m(M)}]),onClick:q=>x(M)},[e("span",tn,s(M.name),1),m(M)?(i(),ie(l(E),{key:0,icon:"carbon:checkmark",width:"16",class:"check-icon"})):U("",!0)],10,on))),128))])],512),[[Ae,$.value]])]),_:1}),$.value?(i(),r("div",{key:0,class:"backdrop",onClick:S[2]||(S[2]=M=>$.value=!1)})):U("",!0)]))}}),Me=ce(sn,[["__scopeId","data-v-8f02e93d"]]),nn={class:"config-panel"},an={class:"panel-header"},ln={class:"panel-actions"},cn=["disabled"],rn={class:"model-layout"},dn={class:"model-list"},un={class:"list-header"},pn={class:"model-count"},gn={key:0,class:"models-container"},fn=["onClick"],mn={class:"model-card-header"},vn={class:"model-name"},hn={class:"model-desc"},yn={key:0,class:"model-type"},_n={class:"model-tag"},bn={key:1,class:"loading-state"},Cn={key:2,class:"empty-state"},$n={key:0,class:"model-detail"},wn={class:"detail-header"},kn={class:"detail-actions"},Sn={class:"form-item"},Tn={class:"form-item"},Mn=["placeholder"],An={class:"form-item"},xn=["placeholder"],En={class:"form-item"},Vn=["placeholder"],Un={class:"form-item"},Pn=["placeholder"],Bn={key:1,class:"no-selection"},Nn={class:"modal-form"},Dn={class:"form-item"},Fn={class:"form-item"},Ln=["placeholder"],Rn={class:"form-item"},On=["placeholder"],In={class:"form-item"},Gn=["placeholder"],jn={class:"form-item"},qn=["placeholder"],Kn={class:"delete-confirm"},Jn={class:"warning-text"},zn=re({__name:"modelConfig",setup(I){const{t:o}=he(),t=B(!1),_=B(""),$=B(""),g=ae([]),m=ae([]),v=B(null),x=B(!1),D=B(!1),S=ae({baseUrl:"",apiKey:"",modelName:"",modelDescription:"",type:""}),M=(T,n)=>{n==="success"?($.value=T,setTimeout(()=>{$.value=""},3e3)):(_.value=T,setTimeout(()=>{_.value=""},5e3))},q=async()=>{t.value=!0;try{const[T,n]=await Promise.all([le.getAllModels(),le.getAllTypes()]),a=T.map(f=>({...f}));g.splice(0,g.length,...a),m.splice(0,g.length,...n),a.length>0&&await Q(a[0])}catch(T){console.error("加载数据失败:",T),M(o("config.modelConfig.loadDataFailed")+": "+T.message,"error")}finally{t.value=!1}},Q=async T=>{try{const n=await le.getModelById(T.id);v.value={...n}}catch(n){console.error("加载Model详情失败:",n),M(o("config.modelConfig.loadDetailsFailed")+": "+n.message,"error"),v.value={...T}}},se=()=>{S.baseUrl="",S.apiKey="",S.modelName="",S.modelDescription="",S.type="",x.value=!0},F=async()=>{var T,n;if(!((T=S.modelName)!=null&&T.trim())||!((n=S.modelDescription)!=null&&n.trim())){M(o("config.modelConfig.requiredFields"),"error");return}try{const a={baseUrl:S.baseUrl.trim(),apiKey:S.apiKey.trim(),modelName:S.modelName.trim(),modelDescription:S.modelDescription.trim(),type:S.type.trim()},f=await le.createModel(a);g.push(f),v.value=f,x.value=!1,M(o("config.modelConfig.createSuccess"),"success")}catch(a){M(o("config.modelConfig.createFailed")+": "+a.message,"error")}},p=async()=>{if(v.value){if(!v.value.modelName.trim()||!v.value.modelDescription.trim()){M(o("config.modelConfig.requiredFields"),"error");return}try{const T=await le.updateModel(v.value.id,v.value),n=g.findIndex(a=>a.id===T.id);n!==-1&&(g[n]=T),v.value=T,M(o("config.modelConfig.saveSuccess"),"success")}catch(T){M(o("config.modelConfig.saveFailed")+": "+T.message,"error")}}},O=()=>{D.value=!0},ee=async()=>{if(v.value)try{await le.deleteModel(v.value.id);const T=g.findIndex(n=>n.id===v.value.id);T!==-1&&g.splice(T,1),v.value=g.length>0?g[0]:null,D.value=!1,M(o("config.modelConfig.deleteSuccess"),"success")}catch(T){M(o("config.modelConfig.deleteFailed")+": "+T.message,"error")}},G=()=>{const T=document.createElement("input");T.type="file",T.accept=".json",T.onchange=n=>{var f;const a=(f=n.target.files)==null?void 0:f[0];if(a){const L=new FileReader;L.onload=async N=>{var J;try{const W=JSON.parse((J=N.target)==null?void 0:J.result);if(!W.modelName||!W.modelDescription)throw new Error(o("config.modelConfig.invalidFormat"));const{id:ye,...pe}=W,w=await le.createModel(pe);g.push(w),v.value=w,M(o("config.modelConfig.importSuccess"),"success")}catch(W){M(o("config.modelConfig.importFailed")+": "+W.message,"error")}},L.readAsText(a)}},T.click()},ue=()=>{if(v.value)try{const T=JSON.stringify(v.value,null,2),n=new Blob([T],{type:"application/json"}),a=URL.createObjectURL(n),f=document.createElement("a");f.href=a,f.download=`model-${v.value.modelName}-${new Date().toISOString().split("T")[0]}.json`,f.click(),URL.revokeObjectURL(a),M(o("config.modelConfig.exportSuccess"),"success")}catch(T){M(o("config.modelConfig.exportFailed")+": "+T.message,"error")}};return be(()=>{q()}),(T,n)=>(i(),r("div",nn,[e("div",an,[e("h2",null,s(l(o)("config.modelConfig.title")),1),e("div",ln,[e("button",{class:"action-btn",onClick:G},[k(l(E),{icon:"carbon:upload"}),A(" "+s(l(o)("config.modelConfig.import")),1)]),e("button",{class:"action-btn",onClick:ue,disabled:!v.value},[k(l(E),{icon:"carbon:download"}),A(" "+s(l(o)("config.modelConfig.export")),1)],8,cn)])]),e("div",rn,[e("div",dn,[e("div",un,[e("h3",null,s(l(o)("config.modelConfig.configuredModels")),1),e("span",pn,"("+s(g.length)+")",1)]),t.value?U("",!0):(i(),r("div",gn,[(i(!0),r(H,null,X(g,a=>{var f;return i(),r("div",{key:a.id,class:Z(["model-card",{active:((f=v.value)==null?void 0:f.id)===a.id}]),onClick:L=>Q(a)},[e("div",mn,[e("span",vn,s(a.modelName),1),k(l(E),{icon:"carbon:chevron-right"})]),e("p",hn,s(a.modelDescription),1),a.type?(i(),r("div",yn,[e("span",_n,s(a.type),1)])):U("",!0)],10,fn)}),128))])),t.value?(i(),r("div",bn,[k(l(E),{icon:"carbon:loading",class:"loading-icon"}),A(" "+s(l(o)("common.loading")),1)])):U("",!0),!t.value&&g.length===0?(i(),r("div",Cn,[k(l(E),{icon:"carbon:bot",class:"empty-icon"}),e("p",null,s(l(o)("config.modelConfig.noModel")),1)])):U("",!0),e("button",{class:"add-btn",onClick:se},[k(l(E),{icon:"carbon:add"}),A(" "+s(l(o)("config.modelConfig.createNew")),1)])]),v.value?(i(),r("div",$n,[e("div",wn,[e("h3",null,s(v.value.modelName),1),e("div",kn,[e("button",{class:"action-btn primary",onClick:p},[k(l(E),{icon:"carbon:save"}),A(" "+s(l(o)("common.save")),1)]),e("button",{class:"action-btn danger",onClick:O},[k(l(E),{icon:"carbon:trash-can"}),A(" "+s(l(o)("common.delete")),1)])])]),e("div",Sn,[e("label",null,[A(s(l(o)("config.modelConfig.type"))+" ",1),n[15]||(n[15]=e("span",{class:"required"},"*",-1))]),k(Me,{modelValue:v.value.type,"onUpdate:modelValue":n[0]||(n[0]=a=>v.value.type=a),options:m.map(a=>({id:a,name:a})),placeholder:l(o)("config.modelConfig.typePlaceholder"),"dropdown-title":l(o)("config.modelConfig.typePlaceholder"),icon:"carbon:types"},null,8,["modelValue","options","placeholder","dropdown-title"])]),e("div",Tn,[e("label",null,[A(s(l(o)("config.modelConfig.baseUrl"))+" ",1),n[16]||(n[16]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>v.value.baseUrl=a),placeholder:l(o)("config.modelConfig.baseUrlPlaceholder"),required:""},null,8,Mn),[[z,v.value.baseUrl]])]),e("div",An,[e("label",null,[A(s(l(o)("config.modelConfig.apiKey"))+" ",1),n[17]||(n[17]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=a=>v.value.apiKey=a),placeholder:l(o)("config.modelConfig.apiKeyPlaceholder"),required:""},null,8,xn),[[z,v.value.apiKey]])]),e("div",En,[e("label",null,[A(s(l(o)("config.modelConfig.modelName"))+" ",1),n[18]||(n[18]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=a=>v.value.modelName=a),placeholder:l(o)("config.modelConfig.modelNamePlaceholder"),required:""},null,8,Vn),[[z,v.value.modelName]])]),e("div",Un,[e("label",null,[A(s(l(o)("config.modelConfig.description"))+" ",1),n[19]||(n[19]=e("span",{class:"required"},"*",-1))]),j(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=a=>v.value.modelDescription=a),rows:"3",placeholder:l(o)("config.modelConfig.descriptionPlaceholder"),required:""},null,8,Pn),[[z,v.value.modelDescription]])])])):(i(),r("div",Bn,[k(l(E),{icon:"carbon:bot",class:"placeholder-icon"}),e("p",null,s(l(o)("config.modelConfig.selectModelHint")),1)]))]),k(ve,{modelValue:x.value,"onUpdate:modelValue":n[10]||(n[10]=a=>x.value=a),title:l(o)("config.modelConfig.newModel"),onConfirm:F},{default:te(()=>[e("div",Nn,[e("div",Dn,[e("label",null,[A(s(l(o)("config.modelConfig.type"))+" ",1),n[20]||(n[20]=e("span",{class:"required"},"*",-1))]),k(Me,{modelValue:S.type,"onUpdate:modelValue":n[5]||(n[5]=a=>S.type=a),options:m.map(a=>({id:a,name:a})),placeholder:l(o)("config.modelConfig.typePlaceholder"),"dropdown-title":l(o)("config.modelConfig.typePlaceholder"),icon:"carbon:types"},null,8,["modelValue","options","placeholder","dropdown-title"])]),e("div",Fn,[e("label",null,[A(s(l(o)("config.modelConfig.baseUrl"))+" ",1),n[21]||(n[21]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=a=>S.baseUrl=a),placeholder:l(o)("config.modelConfig.baseUrlPlaceholder"),required:""},null,8,Ln),[[z,S.baseUrl]])]),e("div",Rn,[e("label",null,[A(s(l(o)("config.modelConfig.apiKey"))+" ",1),n[22]||(n[22]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":n[7]||(n[7]=a=>S.apiKey=a),placeholder:l(o)("config.modelConfig.apiKeyPlaceholder"),required:""},null,8,On),[[z,S.apiKey]])]),e("div",In,[e("label",null,[A(s(l(o)("config.modelConfig.modelName"))+" ",1),n[23]||(n[23]=e("span",{class:"required"},"*",-1))]),j(e("input",{type:"text","onUpdate:modelValue":n[8]||(n[8]=a=>S.modelName=a),placeholder:l(o)("config.modelConfig.modelNamePlaceholder"),required:""},null,8,Gn),[[z,S.modelName]])]),e("div",jn,[e("label",null,[A(s(l(o)("config.modelConfig.description"))+" ",1),n[24]||(n[24]=e("span",{class:"required"},"*",-1))]),j(e("textarea",{"onUpdate:modelValue":n[9]||(n[9]=a=>S.modelDescription=a),rows:"3",placeholder:l(o)("config.modelConfig.descriptionPlaceholder"),required:""},null,8,qn),[[z,S.modelDescription]])])])]),_:1},8,["modelValue","title"]),k(ve,{modelValue:D.value,"onUpdate:modelValue":n[12]||(n[12]=a=>D.value=a),title:"删除确认"},{footer:te(()=>[e("button",{class:"cancel-btn",onClick:n[11]||(n[11]=a=>D.value=!1)},s(l(o)("common.cancel")),1),e("button",{class:"confirm-btn danger",onClick:ee},s(l(o)("common.delete")),1)]),default:te(()=>{var a;return[e("div",Kn,[k(l(E),{icon:"carbon:warning",class:"warning-icon"}),e("p",null,[A(s(l(o)("config.modelConfig.deleteConfirmText"))+" ",1),e("strong",null,s((a=v.value)==null?void 0:a.modelName),1),A(" "+s(l(o)("common.confirm"))+"？",1)]),e("p",Jn,s(l(o)("config.modelConfig.deleteWarning")),1)])]}),_:1},8,["modelValue"]),_.value?(i(),r("div",{key:0,class:"error-toast",onClick:n[13]||(n[13]=a=>_.value="")},[k(l(E),{icon:"carbon:error"}),A(" "+s(_.value),1)])):U("",!0),$.value?(i(),r("div",{key:1,class:"success-toast",onClick:n[14]||(n[14]=a=>$.value="")},[k(l(E),{icon:"carbon:checkmark"}),A(" "+s($.value),1)])):U("",!0)]))}}),Hn=ce(zn,[["__scopeId","data-v-f39b2080"]]);class _e{static async getAllMcpServers(){const o=await fetch(`${this.BASE_URL}/list`);if(!o.ok)throw new Error(`Failed to get MCP server list: ${o.status}`);return await o.json()}static async addMcpServer(o){try{const t=await fetch(`${this.BASE_URL}/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok)throw new Error(`Failed to add MCP server: ${t.status}`);return{success:!0,message:"Successfully added MCP server"}}catch(t){return console.error("Failed to add MCP server:",t),{success:!1,message:t instanceof Error?t.message:"Failed to add, please retry"}}}static async removeMcpServer(o){try{const t=await fetch(`${this.BASE_URL}/remove?id=${o}`);if(!t.ok)throw new Error(`Failed to delete MCP server: ${t.status}`);return{success:!0,message:"Successfully deleted MCP server"}}catch(t){return console.error(`Failed to delete MCP server[${o}]:`,t),{success:!1,message:t instanceof Error?t.message:"Failed to delete, please retry"}}}}ge(_e,"BASE_URL","/api/mcp");const Xn={class:"mcp-config-panel"},Yn={class:"mcp-header"},Qn={class:"header-left"},Wn={class:"mcp-stats"},Zn={class:"stat-item"},ea={class:"stat-value"},oa={class:"header-right"},ta={class:"search-box"},sa={key:0,class:"loading-container"},na={key:1,class:"mcp-layout"},aa={class:"mcp-table-container"},la={key:0,class:"empty-state"},ia={class:"empty-state-text"},ca={key:1,class:"mcp-table-wrapper"},ra={class:"mcp-table"},da={class:"mcp-id"},ua={class:"mcp-server-name"},pa={class:"server-name-content"},ga={class:"mcp-connection-type"},fa={class:"mcp-config"},ma=["title"],va={class:"mcp-actions"},ha=["onClick","disabled"],ya={class:"add-mcp-container"},_a={class:"mcp-form"},ba={class:"mcp-form-group"},Ca={class:"connection-type-options"},$a={class:"connection-type-option"},wa={class:"connection-type-option"},ka={class:"mcp-form-group"},Sa=["placeholder"],Ta={class:"mcp-form-actions"},Ma=["disabled"],Aa=["disabled"],xa=re({__name:"mcpConfig",setup(I){const{t:o}=he(),t=B(!1),_=B([]),$=B(""),g=ae({connectionType:"STUDIO",configJson:""}),m=ae({show:!1,text:"",type:"success"}),v=oe(()=>g.configJson.trim().length>0),x=oe(()=>{if(!$.value.trim())return _.value;const F=$.value.toLowerCase();return _.value.filter(p=>p.mcpServerName.toLowerCase().includes(F)||p.connectionType.toLowerCase().includes(F)||p.connectionConfig.toLowerCase().includes(F))}),D=F=>F?F.length>50?F.substring(0,50)+"...":F:"",S=(F,p="success")=>{m.text=F,m.type=p,m.show=!0,setTimeout(()=>{m.show=!1},3e3)},M=async()=>{try{t.value=!0,_.value=await _e.getAllMcpServers()}catch(F){console.error("加载MCP服务器列表失败:",F),S("加载MCP服务器列表失败","error")}finally{t.value=!1}},q=async()=>{if(!v.value){S(o("config.mcpConfig.configRequired"),"error");return}try{JSON.parse(g.configJson)}catch{S(o("config.mcpConfig.invalidJson"),"error");return}try{t.value=!0;const F={connectionType:g.connectionType,configJson:g.configJson},p=await _e.addMcpServer(F);p.success?(S("添加MCP服务器成功"),se(),await M()):S(p.message||o("config.mcpConfig.addFailed"),"error")}catch(F){console.error("添加MCP服务器失败:",F),S(o("config.mcpConfig.addFailed"),"error")}finally{t.value=!1}},Q=async F=>{if(confirm("确定要删除这个MCP服务器配置吗？此操作不可恢复。"))try{t.value=!0;const p=await _e.removeMcpServer(F);p.success?(S("删除MCP服务器成功"),await M()):S(p.message||o("config.mcpConfig.deleteFailed"),"error")}catch(p){console.error("删除MCP服务器失败:",p),S(o("config.mcpConfig.deleteFailed"),"error")}finally{t.value=!1}},se=()=>{g.connectionType="STUDIO",g.configJson=""};return be(()=>{M()}),(F,p)=>(i(),r("div",Xn,[e("div",Yn,[e("div",Qn,[p[5]||(p[5]=e("h2",null,"MCP配置",-1)),e("div",Wn,[e("span",Zn,[p[4]||(p[4]=e("span",{class:"stat-label"},"总服务器:",-1)),e("span",ea,s(_.value.length),1)])])]),e("div",oa,[e("div",ta,[j(e("input",{"onUpdate:modelValue":p[0]||(p[0]=O=>$.value=O),type:"text",placeholder:"搜索MCP服务器...",class:"search-input"},null,512),[[z,$.value]]),p[6]||(p[6]=e("span",{class:"search-icon"},"🔍",-1))])])]),t.value?(i(),r("div",sa,p[7]||(p[7]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"正在加载MCP服务器...",-1)]))):(i(),r("div",na,[e("div",aa,[p[11]||(p[11]=e("h3",{class:"section-title"},"已配置的MCP服务器",-1)),x.value.length===0?(i(),r("div",la,[p[8]||(p[8]=e("div",{class:"empty-state-icon"},"📂",-1)),e("div",ia,s($.value?"未找到匹配的MCP服务器":"暂无MCP服务器配置"),1)])):(i(),r("div",ca,[e("table",ra,[p[10]||(p[10]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"服务器名称"),e("th",null,"连接类型"),e("th",null,"连接配置"),e("th",null,"操作")])],-1)),e("tbody",null,[(i(!0),r(H,null,X(x.value,O=>(i(),r("tr",{key:O.id,class:"mcp-row"},[e("td",da,s(O.id),1),e("td",ua,[e("div",pa,[p[9]||(p[9]=e("span",{class:"server-icon"},"🔌",-1)),A(" "+s(O.mcpServerName),1)])]),e("td",ga,[e("span",{class:Z(["connection-type-badge",O.connectionType.toLowerCase()])},s(O.connectionType),3)]),e("td",fa,[e("div",{class:"config-preview",title:O.connectionConfig},s(D(O.connectionConfig)),9,ma)]),e("td",va,[e("button",{onClick:ee=>Q(O.id),class:"action-btn delete-btn",disabled:t.value}," 删除 ",8,ha)])]))),128))])])]))]),e("div",ya,[p[16]||(p[16]=e("div",{class:"add-mcp-header"},[e("h3",{class:"add-mcp-title"},"添加MCP服务器")],-1)),e("div",_a,[e("div",ba,[p[14]||(p[14]=e("label",{class:"form-label"},"连接类型：",-1)),e("div",Ca,[e("div",$a,[j(e("input",{type:"radio",id:"mcp-connection-type-studio","onUpdate:modelValue":p[1]||(p[1]=O=>g.connectionType=O),value:"STUDIO"},null,512),[[Te,g.connectionType]]),p[12]||(p[12]=e("label",{for:"mcp-connection-type-studio",class:"radio-label"},[e("span",{class:"radio-title"},"STUDIO"),e("span",{class:"connection-type-desc"},"本地mcp server，目前市面上主流的是这个")],-1))]),e("div",wa,[j(e("input",{type:"radio",id:"mcp-connection-type-sse","onUpdate:modelValue":p[2]||(p[2]=O=>g.connectionType=O),value:"SSE"},null,512),[[Te,g.connectionType]]),p[13]||(p[13]=e("label",{for:"mcp-connection-type-sse",class:"radio-label"},[e("span",{class:"radio-title"},"SSE"),e("span",{class:"connection-type-desc"},"通过http server等提供的，目前网络上比较少见")],-1))])])]),e("div",ka,[p[15]||(p[15]=e("label",{class:"form-label"},"mcp json配置：",-1)),j(e("textarea",{"onUpdate:modelValue":p[3]||(p[3]=O=>g.configJson=O),placeholder:l(o)("config.mcpConfig.configJsonPlaceholder"),class:"config-textarea",rows:"6"},null,8,Sa),[[z,g.configJson]])]),e("div",Ta,[e("button",{onClick:q,class:"action-btn add-btn",disabled:t.value},s(l(o)("common.add")),9,Ma),e("button",{onClick:se,class:"action-btn reset-btn",disabled:t.value},s(l(o)("common.reset")),9,Aa)])]),p[17]||(p[17]=De('<div class="mcp-form-instructions" data-v-d6163872><h4 data-v-d6163872>使用说明：</h4><ol data-v-d6163872><li data-v-d6163872>找到你要用的mcp server的配置json： <ul class="indented-list" data-v-d6163872><li data-v-d6163872><strong data-v-d6163872>本地(STDIO)</strong>：可以在<a href="https://mcp.so" target="_blank" rel="noopener" data-v-d6163872>mcp.so</a>上找到，需要你有Node.js环境并理解你要配置的json里面的每一个项，做对应调整比如配置ak</li><li data-v-d6163872><strong data-v-d6163872>远程服务(SSE)</strong>：<a href="https://mcp.higress.ai/" target="_blank" rel="noopener" data-v-d6163872>mcp.higress.ai/</a>上可以找到，有SSE和STREAMING两种，目前SSE协议更完备一些</li></ul></li><li data-v-d6163872>将json配置复制到上面的输入框，本地选STUDIO，远程选STREAMING或SSE，提交</li><li data-v-d6163872>这样mcp tools就注册成功了。</li><li data-v-d6163872>然后需要在Agent配置里面，新建一个agent，然后增加指定你刚才添加的mcp tools，这样可以极大减少冲突，增强tools被agent选择的准确性</li></ol></div>',1))])])),k(Ce,{name:"message-fade"},{default:te(()=>[m.show?(i(),r("div",{key:0,class:Z(["message-toast",m.type])},s(m.text),3)):U("",!0)]),_:1})]))}}),Ea=ce(xa,[["__scopeId","data-v-d6163872"]]),Va={class:"config-container"},Ua={class:"config-header"},Pa={class:"header-actions"},Ba={class:"config-content"},Na={class:"config-nav"},Da=["onClick"],Fa={class:"config-details"},La=re({__name:"index",setup(I){const{t:o}=he(),t=B("basic"),_=oe(()=>[{key:"basic",label:o("config.categories.basic"),icon:"carbon:settings"},{key:"agent",label:o("config.categories.agent"),icon:"carbon:bot"},{key:"model",label:o("config.categories.model"),icon:"carbon:build-image"},{key:"mcp",label:o("config.categories.mcp"),icon:"carbon:tool-box"}]);return($,g)=>(i(),r("div",Va,[e("div",Ua,[e("div",Pa,[e("button",{class:"action-btn",onClick:g[0]||(g[0]=m=>$.$router.push("/"))},[k(l(E),{icon:"carbon:arrow-left"}),A(" "+s($.$t("backHome")),1)]),k(Fe)])]),e("div",Ba,[e("nav",Na,[(i(!0),r(H,null,X(_.value,(m,v)=>(i(),r("div",{key:v,class:Z(["nav-item",{active:t.value===m.key}]),onClick:x=>t.value=m.key},[k(l(E),{icon:m.icon,width:"20"},null,8,["icon"]),e("span",null,s(m.label),1)],10,Da))),128))]),e("div",Fa,[t.value==="basic"?(i(),ie(gt,{key:0})):U("",!0),t.value==="agent"?(i(),ie(zs,{key:1})):U("",!0),t.value==="model"?(i(),ie(Hn,{key:2})):U("",!0),t.value==="mcp"?(i(),ie(Ea,{key:3})):U("",!0)])])]))}}),ja=ce(La,[["__scopeId","data-v-f7148c54"]]);export{ja as default};
