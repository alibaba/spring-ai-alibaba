var Te=Object.defineProperty;var Ae=(L,o,s)=>o in L?Te(L,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):L[o]=s;var pe=(L,o,s)=>Ae(L,typeof o!="symbol"?o+"":o,s);import{_ as ne,I as B}from"./_plugin-vue_export-helper--Gtw1tuw.js";import{d as ae,c as d,o as l,e,t as h,r as O,y as ie,m as J,f as ye,h as A,b as V,q as E,w as N,v as Y,F,i as K,p as Q,C as xe,a as re,A as oe,T as be,D as Ee,u as G,E as $e,s as he,x as fe,G as Ve,j as Me,g as Pe,H as ke}from"./index-Cz-2nPW1.js";const Ue={class:"switch"},Oe=["checked"],Be={class:"switch-label"},Ge=ae({__name:"index",props:{enabled:{type:Boolean},label:{}},emits:["update:switchValue"],setup(L,{emit:o}){const s=o,b=p=>{const i=p.target.checked;s("update:switchValue",i)};return(p,i)=>(l(),d("label",Ue,[e("input",{type:"checkbox",checked:p.enabled,onChange:b},null,40,Oe),i[0]||(i[0]=e("span",{class:"slider"},null,-1)),e("span",Be,h(p.label),1)]))}}),Le=ne(Ge,[["__scopeId","data-v-d484b4a3"]]);class ue{static async getConfigsByGroup(o){try{const s=await fetch(`${this.BASE_URL}/group/${o}`);if(!s.ok)throw new Error(`Failed to get ${o} group configuration: ${s.status}`);return await s.json()}catch(s){throw console.error(`Failed to get ${o} group configuration:`,s),s}}static async batchUpdateConfigs(o){if(!o||o.length===0)return{success:!0,message:"No configuration needs to be updated"};try{const s=await fetch(`${this.BASE_URL}/batch-update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Batch update configuration failed: ${s.status}`);return{success:!0,message:"Configuration saved successfully"}}catch(s){return console.error("Batch update configuration failed:",s),{success:!1,message:s instanceof Error?s.message:"Update failed, please try again"}}}static async getConfigById(o){try{const s=await fetch(`${this.BASE_URL}/${o}`);if(!s.ok)throw new Error(`Failed to get configuration item: ${s.status}`);return await s.json()}catch(s){throw console.error(`Failed to get configuration item[${o}]:`,s),s}}static async updateConfig(o){try{const s=await fetch(`${this.BASE_URL}/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Failed to update configuration item: ${s.status}`);return{success:!0,message:"Configuration updated successfully"}}catch(s){return console.error("Failed to update configuration item:",s),{success:!1,message:s instanceof Error?s.message:"Update failed, please try again"}}}}pe(ue,"BASE_URL","/api/config");const Ie={class:"config-panel"},Re={class:"config-header"},Ne={class:"header-left"},De={class:"config-stats"},je={class:"stat-item"},Fe={class:"stat-value"},Ke={key:0,class:"stat-item"},Je={class:"stat-value modified"},qe={class:"header-right"},ze={class:"import-export-actions"},Ye={class:"action-btn",title:"导入配置"},He={class:"search-box"},Xe={key:0,class:"loading-container"},Qe={key:1,class:"config-groups"},We={class:"group-header"},Ze={class:"group-info"},et={class:"group-icon"},tt={class:"group-actions"},st=["onClick","disabled"],ot={class:"sub-groups"},nt=["onClick"],at={class:"sub-group-info"},lt={class:"sub-group-title"},it={class:"item-count"},rt={class:"config-items"},ct={key:0,class:"config-item-content vertical-layout"},dt={class:"config-item-info"},ut={class:"config-item-header"},pt={class:"config-label"},vt={class:"type-badge boolean"},gt={key:0,class:"modified-badge"},ft=["title"],ht={class:"config-control"},mt=["value","onChange"],yt=["value"],bt={key:1,class:"config-item-content vertical-layout"},_t={class:"config-item-info"},wt={class:"config-item-header"},$t={class:"config-label"},kt={key:0,class:"modified-badge"},Ct=["title"],St={class:"config-control"},Tt=["value","onChange"],At=["value"],xt={key:2,class:"config-item-content vertical-layout"},Et={class:"config-item-info"},Vt={class:"config-item-header"},Mt={class:"config-label"},Pt={key:0,class:"modified-badge"},Ut=["title"],Ot={class:"config-control"},Bt=["value","onInput"],Gt={key:3,class:"config-item-content vertical-layout"},Lt={class:"config-item-info"},It={class:"config-item-header"},Rt={class:"config-label"},Nt={key:0,class:"modified-badge"},Dt=["title"],jt={key:0,class:"config-meta"},Ft={class:"range-info"},Kt={class:"config-control"},Jt=["value","onInput","min","max"],qt={key:4,class:"config-item-content vertical-layout"},zt={class:"config-item-info"},Yt={class:"config-item-header"},Ht={class:"config-label"},Xt={class:"type-badge string"},Qt={key:0,class:"modified-badge"},Wt=["title"],Zt={class:"config-control"},es=["value","onInput"],ts={key:2,class:"empty-state"},ss=ae({__name:"basicConfig",setup(L){const o=O(!0),s=O(!1),b=O([]),p=O(new Map),i=O(new Set),S=ie({show:!1,text:"",type:"success"}),M=O(""),C={maxSteps:"智能体执行最大步数",resetAllAgents:"重置所有agent",headlessBrowser:"是否使用无头浏览器模式",browserTimeout:"浏览器请求超时时间(秒)",browserDebug:"浏览器debug模式",autoOpenBrowser:"启动时自动打开浏览器",consoleInteractive:"启用控制台交互模式",systemName:"系统名称",language:"默认语言",maxThreads:"最大线程数",timeoutSeconds:"请求超时时间(秒)"},I={manus:"智能体设置",browser:"浏览器设置",interaction:"交互设置",system:"系统设置",performance:"性能设置"},x={manus:"🤖",browser:"🌐",interaction:"🖥️",system:"⚙️",performance:"⚡"},D={agent:"智能体设置",browser:"浏览器设置",interaction:"交互设置",system:"系统设置",performance:"性能设置",general:"常规设置"},ee=J(()=>b.value.some(c=>c.subGroups.some(r=>r.items.some(y=>p.value.get(y.id)!==y.configValue)))),U=c=>c==="true",T=c=>parseFloat(c)||0,v=c=>({maxSteps:1,browserTimeout:1,maxThreads:1,timeoutSeconds:5})[c]||1,P=c=>({maxSteps:100,browserTimeout:600,maxThreads:32,timeoutSeconds:300})[c]||1e4,H=c=>typeof c=="string"?c:c.value,le=c=>typeof c=="string"?c:c.label,ce=(c,r)=>{if(typeof r=="boolean")return r.toString();if(typeof r=="string"){if(c.options&&c.options.length>0){const y=c.options.find(m=>(typeof m=="string"?m:m.label)===r||(typeof m=="string"?m:m.value)===r);if(y)return typeof y=="string"?y:y.value}return r}return String(r)},q=(c,r,y=!1)=>{let m;c.inputType==="BOOLEAN"||c.inputType==="CHECKBOX"?m=ce(c,r):m=String(r),c.configValue!==m&&(c.configValue=m,c._modified=!0,(y||c.inputType==="BOOLEAN"||c.inputType==="CHECKBOX"||c.inputType==="SELECT")&&f())};let te=null;const f=()=>{te&&clearTimeout(te),te=window.setTimeout(()=>{u()},500)},a=(c,r="success")=>{S.text=c,S.type=r,S.show=!0,setTimeout(()=>{S.show=!1},3e3)},_=async()=>{try{o.value=!0;const r=["manus","browser","interaction","system","performance"].map(async m=>{try{const n=await ue.getConfigsByGroup(m);if(n.length===0)return null;const $=n.map(R=>({...R,displayName:R.description||C[R.configKey]||R.configKey,min:v(R.configKey),max:P(R.configKey)}));$.forEach(R=>{p.value.set(R.id,R.configValue)});const k=new Map;$.forEach(R=>{const z=R.configSubGroup||"general";k.has(z)||k.set(z,[]),k.get(z).push(R)});const j=Array.from(k.entries()).map(([R,z])=>({name:R,displayName:D[R]||R,items:z}));return{name:m,displayName:I[m]||m,subGroups:j}}catch(n){return console.warn(`加载配置组 ${m} 失败，跳过:`,n),null}}),y=await Promise.all(r);b.value=y.filter(m=>m!==null),console.log("配置加载完成:",b.value)}catch(c){console.error("加载配置失败:",c),a("加载配置失败，请刷新重试","error")}finally{o.value=!1}},u=async()=>{if(!(s.value||!ee.value))try{s.value=!0;const c=[];if(b.value.forEach(y=>{y.subGroups.forEach(m=>{const n=m.items.filter($=>$._modified);c.push(...n)})}),c.length===0){a("没有需要保存的修改");return}const r=await ue.batchUpdateConfigs(c);r.success?(c.forEach(y=>{p.value.set(y.id,y.configValue),y._modified=!1}),a("配置保存成功")):a(r.message||"保存失败","error")}catch(c){console.error("保存配置失败:",c),a("保存失败，请重试","error")}finally{s.value=!1}},t=async c=>{if(confirm(`确定要重置 "${I[c]||c}" 组的所有配置吗？`))try{s.value=!0;const y=b.value.find($=>$.name===c);if(!y)return;const m=[];if(y.subGroups.forEach($=>{$.items.forEach(k=>{const j=w(k.configKey);j!==k.configValue&&m.push({...k,configValue:j})})}),m.length===0){a("该组配置已是默认值");return}const n=await ue.batchUpdateConfigs(m);n.success?(await _(),a(`成功重置 ${m.length} 项配置`)):a(n.message||"重置失败","error")}catch(y){console.error("重置组配置失败:",y),a("重置失败，请重试","error")}finally{s.value=!1}},w=c=>({systemName:"JTaskPilot",language:"zh-CN",maxThreads:"8",timeoutSeconds:"60",autoOpenBrowser:"false",headlessBrowser:"true"})[c]||"",g=(c,r)=>{const y=`${c}-${r}`;i.value.has(y)?i.value.delete(y):i.value.add(y)},W=(c,r)=>i.value.has(`${c}-${r}`),X=J(()=>{const c=b.value.reduce((y,m)=>y+m.subGroups.reduce((n,$)=>n+$.items.length,0),0),r=b.value.reduce((y,m)=>y+m.subGroups.reduce((n,$)=>n+$.items.filter(k=>p.value.get(k.id)!==k.configValue).length,0),0);return{total:c,modified:r}}),de=J(()=>{if(!M.value.trim())return b.value;const c=M.value.toLowerCase();return b.value.map(r=>({...r,subGroups:r.subGroups.map(y=>({...y,items:y.items.filter(m=>m.displayName.toLowerCase().includes(c)||m.configKey.toLowerCase().includes(c)||m.description&&m.description.toLowerCase().includes(c))})).filter(y=>y.items.length>0)})).filter(r=>r.subGroups.length>0)}),se=()=>{try{const c={timestamp:new Date().toISOString(),version:"1.0",configs:b.value.reduce((n,$)=>($.subGroups.forEach(k=>{k.items.forEach(j=>{n[j.configKey]=j.configValue})}),n),{})},r=JSON.stringify(c,null,2),y=new Blob([r],{type:"application/json"}),m=document.createElement("a");m.href=URL.createObjectURL(y),m.download=`config-export-${new Date().toISOString().split("T")[0]}.json`,m.click(),a("配置导出成功")}catch(c){console.error("导出配置失败:",c),a("导出失败","error")}},_e=c=>{var n;const r=c.target,y=(n=r.files)==null?void 0:n[0];if(!y)return;const m=new FileReader;m.onload=async $=>{var k;try{const j=JSON.parse((k=$.target)==null?void 0:k.result);if(!j.configs)throw new Error("无效的配置文件格式");if(!confirm("确定要导入配置吗？这将覆盖当前配置。"))return;s.value=!0;const z=[];if(b.value.forEach(Ce=>{Ce.subGroups.forEach(Se=>{Se.items.forEach(ge=>{j.configs.hasOwnProperty(ge.configKey)&&z.push({...ge,configValue:j.configs[ge.configKey]})})})}),z.length===0){a("没有找到可导入的配置项");return}const we=await ue.batchUpdateConfigs(z);we.success?(await _(),a(`成功导入 ${z.length} 项配置`)):a(we.message||"导入失败","error")}catch(j){console.error("导入配置失败:",j),a("导入失败，请检查文件格式","error")}finally{s.value=!1,r.value=""}},m.readAsText(y)};return ye(()=>{_()}),(c,r)=>(l(),d("div",Ie,[e("div",Re,[e("div",Ne,[r[3]||(r[3]=e("h2",null,"基础配置",-1)),e("div",De,[e("span",je,[r[1]||(r[1]=e("span",{class:"stat-label"},"总配置项:",-1)),e("span",Fe,h(X.value.total),1)]),X.value.modified>0?(l(),d("span",Ke,[r[2]||(r[2]=e("span",{class:"stat-label"},"已修改:",-1)),e("span",Je,h(X.value.modified),1)])):V("",!0)])]),e("div",qe,[e("div",ze,[e("button",{onClick:se,class:"action-btn",title:"导出配置"}," 📤 "),e("label",Ye,[r[4]||(r[4]=E(" 📥 ")),e("input",{type:"file",accept:".json",onChange:_e,style:{display:"none"}},null,32)])]),e("div",He,[N(e("input",{"onUpdate:modelValue":r[0]||(r[0]=y=>M.value=y),type:"text",placeholder:"搜索配置项...",class:"search-input"},null,512),[[Y,M.value]]),r[5]||(r[5]=e("span",{class:"search-icon"},"🔍",-1))])])]),o.value?(l(),d("div",Xe,r[6]||(r[6]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"正在加载配置...",-1)]))):de.value.length>0?(l(),d("div",Qe,[(l(!0),d(F,null,K(de.value,y=>(l(),d("div",{key:y.name,class:"config-group"},[e("div",We,[e("div",Ze,[e("span",et,h(x[y.name]||"⚙️"),1)]),e("div",tt,[e("button",{onClick:m=>t(y.name),class:"reset-btn",disabled:s.value,title:"重置该组所有配置为默认值"}," 重置 ",8,st)]),r[7]||(r[7]=e("div",{class:"group-divider"},null,-1))]),e("div",ot,[(l(!0),d(F,null,K(y.subGroups,m=>(l(),d("div",{key:m.name,class:"sub-group"},[e("div",{class:"sub-group-header",onClick:n=>g(y.name,m.name)},[e("div",at,[r[8]||(r[8]=e("span",{class:"sub-group-icon"},"📁",-1)),e("h4",lt,h(m.displayName),1),e("span",it,"("+h(m.items.length)+")",1)]),e("span",{class:Q(["collapse-icon",{collapsed:W(y.name,m.name)}])}," ▼ ",2)],8,nt),N(e("div",rt,[(l(!0),d(F,null,K(m.items,n=>(l(),d("div",{key:n.id,class:Q(["config-item",{modified:p.value.get(n.id)!==n.configValue}])},[n.inputType==="BOOLEAN"||n.inputType==="CHECKBOX"?(l(),d("div",ct,[e("div",dt,[e("div",ut,[e("label",pt,[E(h(n.description||n.displayName)+" ",1),e("span",vt,h(n.inputType==="CHECKBOX"?"选择":"布尔"),1),p.value.get(n.id)!==n.configValue?(l(),d("span",gt,"已修改")):V("",!0)]),e("span",{class:"config-key",title:n.configKey},h(n.configKey),9,ft)])]),e("div",ht,[n.options&&n.options.length>0?(l(),d("select",{key:0,class:"config-input select-input",value:n.configValue,onChange:$=>{var k;return q(n,((k=$.target)==null?void 0:k.value)||"")}},[(l(!0),d(F,null,K(n.options,$=>(l(),d("option",{key:H($),value:H($)},h(le($)),9,yt))),128))],40,mt)):(l(),re(Le,{key:1,enabled:U(n.configValue),label:"","onUpdate:switchValue":$=>q(n,$)},null,8,["enabled","onUpdate:switchValue"]))])])):n.inputType==="SELECT"?(l(),d("div",bt,[e("div",_t,[e("div",wt,[e("label",$t,[E(h(n.description||n.displayName)+" ",1),r[9]||(r[9]=e("span",{class:"type-badge select"},"选择",-1)),p.value.get(n.id)!==n.configValue?(l(),d("span",kt,"已修改")):V("",!0)]),e("span",{class:"config-key",title:n.configKey},h(n.configKey),9,Ct)])]),e("div",St,[e("select",{class:"config-input select-input",value:n.configValue,onChange:$=>{var k;return q(n,((k=$.target)==null?void 0:k.value)||"")}},[(l(!0),d(F,null,K(n.options||[],$=>(l(),d("option",{key:H($),value:H($)},h(le($)),9,At))),128))],40,Tt)])])):n.inputType==="TEXTAREA"?(l(),d("div",xt,[e("div",Et,[e("div",Vt,[e("label",Mt,[E(h(n.description||n.displayName)+" ",1),r[10]||(r[10]=e("span",{class:"type-badge textarea"},"多行",-1)),p.value.get(n.id)!==n.configValue?(l(),d("span",Pt,"已修改")):V("",!0)]),e("span",{class:"config-key",title:n.configKey},h(n.configKey),9,Ut)])]),e("div",Ot,[e("textarea",{class:"config-input textarea-input",value:n.configValue,onInput:$=>{var k;return q(n,((k=$.target)==null?void 0:k.value)||"")},onBlur:f,rows:"3"},null,40,Bt)])])):n.inputType==="NUMBER"?(l(),d("div",Gt,[e("div",Lt,[e("div",It,[e("label",Rt,[E(h(n.description||n.displayName)+" ",1),r[11]||(r[11]=e("span",{class:"type-badge number"},"数值",-1)),p.value.get(n.id)!==n.configValue?(l(),d("span",Nt,"已修改")):V("",!0)]),e("span",{class:"config-key",title:n.configKey},h(n.configKey),9,Dt),n.min||n.max?(l(),d("div",jt,[e("span",Ft," 范围: "+h(n.min||0)+" - "+h(n.max||"∞"),1)])):V("",!0)])]),e("div",Kt,[e("input",{type:"number",class:"config-input number-input",value:T(n.configValue),onInput:$=>{var k;return q(n,((k=$.target)==null?void 0:k.value)||"")},onBlur:f,min:n.min||1,max:n.max||1e4},null,40,Jt)])])):(l(),d("div",qt,[e("div",zt,[e("div",Yt,[e("label",Ht,[E(h(n.description||n.displayName)+" ",1),e("span",Xt,h(n.inputType==="TEXT"?"文本":"字符串"),1),p.value.get(n.id)!==n.configValue?(l(),d("span",Qt,"已修改")):V("",!0)]),e("span",{class:"config-key",title:n.configKey},h(n.configKey),9,Wt)])]),e("div",Zt,[e("input",{type:"text",class:"config-input text-input",value:n.configValue,onInput:$=>{var k;return q(n,((k=$.target)==null?void 0:k.value)||"")},onBlur:f},null,40,es)])]))],2))),128))],512),[[xe,!W(y.name,m.name)]])]))),128))])]))),128))])):(l(),d("div",ts,r[12]||(r[12]=[e("p",null,"未找到配置项",-1)]))),A(be,{name:"message-fade"},{default:oe(()=>[S.show?(l(),d("div",{key:0,class:Q(["message-toast",S.type])},h(S.text),3)):V("",!0)]),_:1})]))}}),os=ne(ss,[["__scopeId","data-v-64ca12a9"]]),ns={class:"modal-header"},as={class:"modal-content"},ls={class:"modal-footer"},is=ae({__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(L){const o=s=>{s.target===s.currentTarget&&(s.stopPropagation(),s.preventDefault())};return(s,b)=>(l(),re(Ee,{to:"body"},[A(be,{name:"modal"},{default:oe(()=>[L.modelValue?(l(),d("div",{key:0,class:"modal-overlay",onClick:o},[e("div",{class:"modal-container",onClick:b[3]||(b[3]=he(()=>{},["stop"]))},[e("div",ns,[e("h3",null,h(L.title),1),e("button",{class:"close-btn",onClick:b[0]||(b[0]=p=>s.$emit("update:modelValue",!1))},[A(G(B),{icon:"carbon:close"})])]),e("div",as,[$e(s.$slots,"default",{},void 0,!0)]),e("div",ls,[$e(s.$slots,"footer",{},()=>[e("button",{class:"cancel-btn",onClick:b[1]||(b[1]=p=>s.$emit("update:modelValue",!1))},"取消"),e("button",{class:"confirm-btn",onClick:b[2]||(b[2]=p=>s.$emit("confirm"))},"确认")],!0)])])])):V("",!0)]),_:3})]))}}),me=ne(is,[["__scopeId","data-v-9e83cb7f"]]),rs={class:"tool-selection-content"},cs={class:"tool-controls"},ds={class:"search-container"},us={class:"sort-container"},ps={class:"tool-summary"},vs={class:"summary-text"},gs={key:0,class:"tool-groups"},fs=["onClick"],hs={class:"group-title-area"},ms={class:"group-name"},ys={class:"group-count"},bs={class:"group-enable-all"},_s=["checked","onChange","data-group"],ws={class:"tool-info"},$s={class:"tool-selection-name"},ks={key:0,class:"tool-selection-desc"},Cs={class:"tool-actions"},Ss=["checked","onChange"],Ts={key:1,class:"empty-state"},As=ae({__name:"index",props:{modelValue:{type:Boolean},tools:{},selectedToolIds:{}},emits:["update:modelValue","confirm"],setup(L,{emit:o}){const s=L,b=o,p=J({get:()=>s.modelValue,set:f=>b("update:modelValue",f)}),i=O(""),S=O("group"),M=O(new Set),C=O([]),I=(f,a)=>{const _=document.querySelector(`input[data-group="${f}"]`);_&&(_.indeterminate=H(a))};fe(()=>s.selectedToolIds,f=>{C.value=[...f]},{immediate:!0});const x=J(()=>{let f=s.tools.filter(a=>a&&a.key);if(i.value){const a=i.value.toLowerCase();f=f.filter(_=>_.name.toLowerCase().includes(a)||_.description.toLowerCase().includes(a)||_.serviceGroup&&_.serviceGroup.toLowerCase().includes(a))}switch(S.value){case"name":f=[...f].sort((a,_)=>a.name.localeCompare(_.name));break;case"enabled":f=[...f].sort((a,_)=>{const u=C.value.includes(a.key),t=C.value.includes(_.key);return u&&!t?-1:!u&&t?1:a.name.localeCompare(_.name)});break;case"group":default:f=[...f].sort((a,_)=>{const u=a.serviceGroup||"未分组",t=_.serviceGroup||"未分组";return u!==t?u.localeCompare(t):a.name.localeCompare(_.name)});break}return f}),D=J(()=>{const f=new Map;return x.value.forEach(a=>{const _=a.serviceGroup||"未分组";f.has(_)||f.set(_,[]),f.get(_).push(a)}),new Map([...f.entries()].sort())}),ee=J(()=>x.value.length);fe([C,D],()=>{Me(()=>{for(const[f,a]of D.value)I(f,a)})},{flush:"post",deep:!1});const U=f=>C.value.includes(f),T=(f,a)=>{a.stopPropagation();const u=a.target.checked;if(!f){console.error("toolKey is undefined, cannot proceed");return}u?C.value.includes(f)||(C.value=[...C.value,f]):C.value=C.value.filter(t=>t!==f)},v=f=>f.filter(a=>C.value.includes(a.key)),P=f=>f.length>0&&f.every(a=>C.value.includes(a.key)),H=f=>{const a=v(f).length;return a>0&&a<f.length},le=(f,a)=>{a.stopPropagation();const u=a.target.checked,t=f.map(w=>w.key);if(u){const w=[...C.value];t.forEach(g=>{w.includes(g)||w.push(g)}),C.value=w}else C.value=C.value.filter(w=>!t.includes(w))},ce=f=>{M.value.has(f)?M.value.delete(f):M.value.add(f)},q=()=>{b("confirm",[...C.value]),b("update:modelValue",!1)},te=()=>{C.value=[...s.selectedToolIds],b("update:modelValue",!1)};return fe(p,f=>{if(f){M.value.clear();const a=Array.from(D.value.keys());a.length>1&&a.slice(1).forEach(_=>{M.value.add(_)})}}),(f,a)=>(l(),re(me,{modelValue:p.value,"onUpdate:modelValue":[a[4]||(a[4]=_=>p.value=_),te],title:"选择工具",onConfirm:q},{default:oe(()=>[e("div",rs,[e("div",cs,[e("div",ds,[N(e("input",{"onUpdate:modelValue":a[0]||(a[0]=_=>i.value=_),type:"text",class:"search-input",placeholder:"搜索工具..."},null,512),[[Y,i.value]])]),e("div",us,[N(e("select",{"onUpdate:modelValue":a[1]||(a[1]=_=>S.value=_),class:"sort-select"},a[5]||(a[5]=[e("option",{value:"group"},"按服务组排序",-1),e("option",{value:"name"},"按名称排序",-1),e("option",{value:"enabled"},"按启用状态排序",-1)]),512),[[Ve,S.value]])])]),e("div",ps,[e("span",vs," 共 "+h(D.value.size)+" 个服务组，"+h(ee.value)+" 个工具 (已选择 "+h(C.value.length)+" 个) ",1)]),D.value.size>0?(l(),d("div",gs,[(l(!0),d(F,null,K(D.value,([_,u])=>(l(),d("div",{key:_,class:"tool-group"},[e("div",{class:Q(["tool-group-header",{collapsed:M.value.has(_)}]),onClick:t=>ce(_)},[e("div",hs,[A(G(B),{icon:M.value.has(_)?"carbon:chevron-right":"carbon:chevron-down",class:"collapse-icon"},null,8,["icon"]),A(G(B),{icon:"carbon:folder",class:"group-icon"}),e("span",ms,h(_),1),e("span",ys," ("+h(v(u).length)+"/"+h(u.length)+") ",1)]),e("div",{class:"group-actions",onClick:a[2]||(a[2]=he(()=>{},["stop"]))},[e("label",bs,[e("input",{type:"checkbox",class:"group-enable-checkbox",checked:P(u),onChange:t=>le(u,t),"data-group":_},null,40,_s),a[6]||(a[6]=e("span",{class:"enable-label"},"启用全部",-1))])])],10,fs),e("div",{class:Q(["tool-group-content",{collapsed:M.value.has(_)}])},[(l(!0),d(F,null,K(u.filter(t=>t&&t.key),t=>(l(),d("div",{key:t.key,class:"tool-selection-item"},[e("div",ws,[e("div",$s,h(t.name),1),t.description?(l(),d("div",ks,h(t.description),1)):V("",!0)]),e("div",Cs,[e("label",{class:"tool-enable-switch",onClick:a[3]||(a[3]=he(()=>{},["stop"]))},[e("input",{type:"checkbox",class:"tool-enable-checkbox",checked:U(t.key),onChange:w=>T(t.key,w)},null,40,Ss),a[7]||(a[7]=e("span",{class:"tool-enable-slider"},null,-1))])])]))),128))],2)]))),128))])):(l(),d("div",Ts,[A(G(B),{icon:"carbon:tools",class:"empty-icon"}),a[8]||(a[8]=e("p",null,"没有找到工具",-1))]))])]),_:1},8,["modelValue"]))}}),xs=ne(As,[["__scopeId","data-v-81d0fa5c"]]);class Z{static async handleResponse(o){if(!o.ok)try{const s=await o.json();throw new Error(s.message||`API request failed: ${o.status}`)}catch{throw new Error(`API request failed: ${o.status} ${o.statusText}`)}return o}static async getAllAgents(){try{const o=await fetch(this.BASE_URL);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get Agent list:",o),o}}static async getAgentById(o){try{const s=await fetch(`${this.BASE_URL}/${o}`);return await(await this.handleResponse(s)).json()}catch(s){throw console.error(`Failed to get Agent[${o}] details:`,s),s}}static async createAgent(o){try{const s=await fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return await(await this.handleResponse(s)).json()}catch(s){throw console.error("Failed to create Agent:",s),s}}static async updateAgent(o,s){try{const b=await fetch(`${this.BASE_URL}/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return await(await this.handleResponse(b)).json()}catch(b){throw console.error(`Failed to update Agent[${o}]:`,b),b}}static async deleteAgent(o){try{const s=await fetch(`${this.BASE_URL}/${o}`,{method:"DELETE"});if(s.status===400)throw new Error("Cannot delete default Agent");await this.handleResponse(s)}catch(s){throw console.error(`Failed to delete Agent[${o}]:`,s),s}}static async getAvailableTools(){try{const o=await fetch(`${this.BASE_URL}/tools`);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get available tools list:",o),o}}}pe(Z,"BASE_URL","/api/agents");const Es={class:"config-panel"},Vs={class:"panel-header"},Ms={class:"panel-actions"},Ps=["disabled"],Us={class:"agent-layout"},Os={class:"agent-list"},Bs={class:"list-header"},Gs={class:"agent-count"},Ls={key:0,class:"agents-container"},Is=["onClick"],Rs={class:"agent-card-header"},Ns={class:"agent-name"},Ds={class:"agent-desc"},js={key:0,class:"agent-tools"},Fs={key:0,class:"tool-more"},Ks={key:1,class:"loading-state"},Js={key:2,class:"empty-state"},qs={key:0,class:"agent-detail"},zs={class:"detail-header"},Ys={class:"detail-actions"},Hs={class:"form-item"},Xs={class:"form-item"},Qs={class:"form-item"},Ws={class:"tools-section"},Zs={class:"assigned-tools"},eo={class:"section-header"},to={class:"tools-grid"},so={class:"tool-info"},oo={class:"tool-name"},no={class:"tool-desc"},ao={key:0,class:"no-tools"},lo={key:1,class:"no-selection"},io={class:"modal-form"},ro={class:"form-item"},co={class:"form-item"},uo={class:"form-item"},po={class:"delete-confirm"},vo=ae({__name:"agentConfig",setup(L){const o=O(!1),s=O(""),b=O(""),p=ie([]),i=O(null),S=ie([]),M=O(!1),C=O(!1),I=O(!1),x=ie({name:"",description:"",nextStepPrompt:""});J(()=>!i.value||!i.value.availableTools||!Array.isArray(i.value.availableTools)?S:S.filter(u=>!i.value.availableTools.includes(u.key)));const D=u=>{const t=S.find(w=>w.key===u);return t?t.name:u},ee=u=>{const t=S.find(w=>w.key===u);return t?t.description:""},U=(u,t)=>{t==="success"?(b.value=u,setTimeout(()=>{b.value=""},3e3)):(s.value=u,setTimeout(()=>{s.value=""},5e3))},T=async()=>{o.value=!0;try{const[u,t]=await Promise.all([Z.getAllAgents(),Z.getAvailableTools()]),w=u.map(g=>({...g,availableTools:Array.isArray(g.availableTools)?g.availableTools:[]}));p.splice(0,p.length,...w),S.splice(0,S.length,...t),w.length>0&&await v(w[0])}catch(u){console.error("加载数据失败:",u),U("加载数据失败: "+u.message,"error");const t=[{key:"search-web",name:"网络搜索",description:"在互联网上搜索信息",enabled:!0,serviceGroup:"搜索服务"},{key:"search-local",name:"本地搜索",description:"在本地文件中搜索内容",enabled:!0,serviceGroup:"搜索服务"},{key:"file-read",name:"读取文件",description:"读取本地或远程文件内容",enabled:!0,serviceGroup:"文件服务"},{key:"file-write",name:"写入文件",description:"创建或修改文件内容",enabled:!0,serviceGroup:"文件服务"},{key:"file-delete",name:"删除文件",description:"删除指定的文件",enabled:!1,serviceGroup:"文件服务"},{key:"calculator",name:"计算器",description:"执行数学计算",enabled:!0,serviceGroup:"计算服务"},{key:"code-execute",name:"代码执行",description:"执行Python或JavaScript代码",enabled:!0,serviceGroup:"计算服务"},{key:"weather",name:"天气查询",description:"获取指定地区的天气信息",enabled:!0,serviceGroup:"信息服务"},{key:"currency",name:"汇率查询",description:"查询货币汇率信息",enabled:!0,serviceGroup:"信息服务"},{key:"email",name:"发送邮件",description:"发送电子邮件",enabled:!1,serviceGroup:"通信服务"},{key:"sms",name:"发送短信",description:"发送短信消息",enabled:!1,serviceGroup:"通信服务"}],w=[{id:"demo-1",name:"通用助手",description:"一个能够处理各种任务的智能助手",nextStepPrompt:"You are a helpful assistant that can answer questions and help with various tasks. What would you like me to help you with next?",availableTools:["search-web","calculator","weather"]},{id:"demo-2",name:"数据分析师",description:"专门用于数据分析和可视化的Agent",nextStepPrompt:"You are a data analyst assistant specialized in analyzing data and creating visualizations. Please provide the data you would like me to analyze.",availableTools:["file-read","file-write","calculator","code-execute"]}];S.splice(0,S.length,...t),p.splice(0,p.length,...w),w.length>0&&(i.value=w[0])}finally{o.value=!1}},v=async u=>{if(u)try{const t=await Z.getAgentById(u.id);i.value={...t,availableTools:Array.isArray(t.availableTools)?t.availableTools:[]}}catch(t){console.error("加载Agent详情失败:",t),U("加载Agent详情失败: "+t.message,"error"),i.value={...u,availableTools:Array.isArray(u.availableTools)?u.availableTools:[]}}},P=()=>{x.name="",x.description="",x.nextStepPrompt="",M.value=!0},H=async()=>{var u;if(!x.name.trim()||!x.description.trim()){U("请填写必要的字段","error");return}try{const t={name:x.name.trim(),description:x.description.trim(),nextStepPrompt:((u=x.nextStepPrompt)==null?void 0:u.trim())||"",availableTools:[]},w=await Z.createAgent(t);p.push(w),i.value=w,M.value=!1,U("Agent创建成功","success")}catch(t){U("创建Agent失败: "+t.message,"error")}},le=()=>{I.value=!0},ce=u=>{i.value&&(i.value.availableTools=[...u])},q=async()=>{if(i.value){if(!i.value.name.trim()||!i.value.description.trim()){U("请填写必要的字段","error");return}try{const u=await Z.updateAgent(i.value.id,i.value),t=p.findIndex(w=>w.id===u.id);t!==-1&&(p[t]=u),i.value=u,U("Agent保存成功","success")}catch(u){U("保存Agent失败: "+u.message,"error")}}},te=()=>{C.value=!0},f=async()=>{if(i.value)try{await Z.deleteAgent(i.value.id);const u=p.findIndex(t=>t.id===i.value.id);u!==-1&&p.splice(u,1),i.value=p.length>0?p[0]:null,C.value=!1,U("Agent删除成功","success")}catch(u){U("删除Agent失败: "+u.message,"error")}},a=()=>{const u=document.createElement("input");u.type="file",u.accept=".json",u.onchange=t=>{var g;const w=(g=t.target.files)==null?void 0:g[0];if(w){const W=new FileReader;W.onload=async X=>{var de;try{const se=JSON.parse((de=X.target)==null?void 0:de.result);if(!se.name||!se.description)throw new Error("Agent配置格式不正确：缺少必要字段");const{id:_e,...c}=se,r=await Z.createAgent(c);p.push(r),i.value=r,U("Agent导入成功","success")}catch(se){U("导入Agent失败: "+se.message,"error")}},W.readAsText(w)}},u.click()},_=()=>{if(i.value)try{const u=JSON.stringify(i.value,null,2),t=new Blob([u],{type:"application/json"}),w=URL.createObjectURL(t),g=document.createElement("a");g.href=w,g.download=`agent-${i.value.name}-${new Date().toISOString().split("T")[0]}.json`,g.click(),URL.revokeObjectURL(w),U("Agent导出成功","success")}catch(u){U("导出Agent失败: "+u.message,"error")}};return ye(()=>{T()}),(u,t)=>{var w;return l(),d("div",Es,[e("div",Vs,[t[14]||(t[14]=e("h2",null,"Agent配置",-1)),e("div",Ms,[e("button",{class:"action-btn",onClick:a},[A(G(B),{icon:"carbon:upload"}),t[12]||(t[12]=E(" 导入 "))]),e("button",{class:"action-btn",onClick:_,disabled:!i.value},[A(G(B),{icon:"carbon:download"}),t[13]||(t[13]=E(" 导出 "))],8,Ps)])]),e("div",Us,[e("div",Os,[e("div",Bs,[t[15]||(t[15]=e("h3",null,"已配置的Agent",-1)),e("span",Gs,"("+h(p.length)+")",1)]),o.value?V("",!0):(l(),d("div",Ls,[(l(!0),d(F,null,K(p,g=>{var W;return l(),d("div",{key:g.id,class:Q(["agent-card",{active:((W=i.value)==null?void 0:W.id)===g.id}]),onClick:X=>v(g)},[e("div",Rs,[e("span",Ns,h(g.name),1),A(G(B),{icon:"carbon:chevron-right"})]),e("p",Ds,h(g.description),1),g.availableTools&&Array.isArray(g.availableTools)&&g.availableTools.length>0?(l(),d("div",js,[(l(!0),d(F,null,K(g.availableTools.slice(0,3),X=>(l(),d("span",{key:X,class:"tool-tag"},h(D(X)),1))),128)),g.availableTools.length>3?(l(),d("span",Fs," +"+h(g.availableTools.length-3),1)):V("",!0)])):V("",!0)],10,Is)}),128))])),o.value?(l(),d("div",Ks,[A(G(B),{icon:"carbon:loading",class:"loading-icon"}),t[16]||(t[16]=E(" 加载中... "))])):V("",!0),!o.value&&p.length===0?(l(),d("div",Js,[A(G(B),{icon:"carbon:bot",class:"empty-icon"}),t[17]||(t[17]=e("p",null,"暂无Agent配置",-1))])):V("",!0),e("button",{class:"add-btn",onClick:P},[A(G(B),{icon:"carbon:add"}),t[18]||(t[18]=E(" 新建Agent "))])]),i.value?(l(),d("div",qs,[e("div",zs,[e("h3",null,h(i.value.name),1),e("div",Ys,[e("button",{class:"action-btn primary",onClick:q},[A(G(B),{icon:"carbon:save"}),t[19]||(t[19]=E(" 保存 "))]),e("button",{class:"action-btn danger",onClick:te},[A(G(B),{icon:"carbon:trash-can"}),t[20]||(t[20]=E(" 删除 "))])])]),e("div",Hs,[t[21]||(t[21]=e("label",null,[E("Agent名称 "),e("span",{class:"required"},"*")],-1)),N(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=g=>i.value.name=g),placeholder:"输入Agent名称",required:""},null,512),[[Y,i.value.name]])]),e("div",Xs,[t[22]||(t[22]=e("label",null,[E("描述 "),e("span",{class:"required"},"*")],-1)),N(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=g=>i.value.description=g),rows:"3",placeholder:"描述这个Agent的功能和用途",required:""},null,512),[[Y,i.value.description]])]),e("div",Qs,[t[23]||(t[23]=e("label",null,"Agent提示词（人设，要求，以及下一步动作的指导）",-1)),N(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=g=>i.value.nextStepPrompt=g),rows:"8",placeholder:"设置Agent的人设、要求以及下一步动作的指导..."},null,512),[[Y,i.value.nextStepPrompt]])]),e("div",Ws,[t[26]||(t[26]=e("h4",null,"工具配置",-1)),e("div",Zs,[e("div",eo,[e("span",null,"已分配工具 ("+h((i.value.availableTools||[]).length)+")",1),S.length>0?(l(),d("button",{key:0,class:"action-btn small",onClick:le},[A(G(B),{icon:"carbon:add"}),t[24]||(t[24]=E(" 添加/删除工具 "))])):V("",!0)]),e("div",to,[(l(!0),d(F,null,K(i.value.availableTools||[],g=>(l(),d("div",{key:g,class:"tool-item assigned"},[e("div",so,[e("span",oo,h(D(g)),1),e("span",no,h(ee(g)),1)])]))),128)),!i.value.availableTools||i.value.availableTools.length===0?(l(),d("div",ao,[A(G(B),{icon:"carbon:tool-box"}),t[25]||(t[25]=e("span",null,"暂无分配的工具",-1))])):V("",!0)])])])])):(l(),d("div",lo,[A(G(B),{icon:"carbon:bot",class:"placeholder-icon"}),t[27]||(t[27]=e("p",null,"请选择一个Agent进行配置",-1))]))]),A(me,{modelValue:M.value,"onUpdate:modelValue":t[6]||(t[6]=g=>M.value=g),title:"新建Agent",onConfirm:H},{default:oe(()=>[e("div",io,[e("div",ro,[t[28]||(t[28]=e("label",null,[E("Agent名称 "),e("span",{class:"required"},"*")],-1)),N(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=g=>x.name=g),placeholder:"输入Agent名称",required:""},null,512),[[Y,x.name]])]),e("div",co,[t[29]||(t[29]=e("label",null,[E("描述 "),e("span",{class:"required"},"*")],-1)),N(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=g=>x.description=g),rows:"3",placeholder:"描述这个Agent的功能和用途",required:""},null,512),[[Y,x.description]])]),e("div",uo,[t[30]||(t[30]=e("label",null,"Agent提示词（人设，要求，以及下一步动作的指导）",-1)),N(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=g=>x.nextStepPrompt=g),rows:"8",placeholder:"设置Agent的人设、要求以及下一步动作的指导..."},null,512),[[Y,x.nextStepPrompt]])])])]),_:1},8,["modelValue"]),A(xs,{modelValue:I.value,"onUpdate:modelValue":t[7]||(t[7]=g=>I.value=g),tools:S,"selected-tool-ids":((w=i.value)==null?void 0:w.availableTools)||[],onConfirm:ce},null,8,["modelValue","tools","selected-tool-ids"]),A(me,{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=g=>C.value=g),title:"删除确认"},{footer:oe(()=>[e("button",{class:"cancel-btn",onClick:t[8]||(t[8]=g=>C.value=!1)},"取消"),e("button",{class:"confirm-btn danger",onClick:f},"删除")]),default:oe(()=>{var g;return[e("div",po,[A(G(B),{icon:"carbon:warning",class:"warning-icon"}),e("p",null,[t[31]||(t[31]=E("确定要删除 ")),e("strong",null,h((g=i.value)==null?void 0:g.name),1),t[32]||(t[32]=E(" 吗？"))]),t[33]||(t[33]=e("p",{class:"warning-text"},"此操作不可恢复。",-1))])]}),_:1},8,["modelValue"]),s.value?(l(),d("div",{key:0,class:"error-toast",onClick:t[10]||(t[10]=g=>s.value="")},[A(G(B),{icon:"carbon:error"}),E(" "+h(s.value),1)])):V("",!0),b.value?(l(),d("div",{key:1,class:"success-toast",onClick:t[11]||(t[11]=g=>b.value="")},[A(G(B),{icon:"carbon:checkmark"}),E(" "+h(b.value),1)])):V("",!0)])}}}),go=ne(vo,[["__scopeId","data-v-95e61e65"]]);class ve{static async getAllMcpServers(){const o=await fetch(`${this.BASE_URL}/list`);if(!o.ok)throw new Error(`Failed to get MCP server list: ${o.status}`);return await o.json()}static async addMcpServer(o){try{const s=await fetch(`${this.BASE_URL}/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Failed to add MCP server: ${s.status}`);return{success:!0,message:"Successfully added MCP server"}}catch(s){return console.error("Failed to add MCP server:",s),{success:!1,message:s instanceof Error?s.message:"Failed to add, please retry"}}}static async removeMcpServer(o){try{const s=await fetch(`${this.BASE_URL}/remove?id=${o}`);if(!s.ok)throw new Error(`Failed to delete MCP server: ${s.status}`);return{success:!0,message:"Successfully deleted MCP server"}}catch(s){return console.error(`Failed to delete MCP server[${o}]:`,s),{success:!1,message:s instanceof Error?s.message:"Failed to delete, please retry"}}}}pe(ve,"BASE_URL","/api/mcp");const fo={class:"mcp-config-panel"},ho={class:"mcp-header"},mo={class:"header-left"},yo={class:"mcp-stats"},bo={class:"stat-item"},_o={class:"stat-value"},wo={class:"header-right"},$o={class:"search-box"},ko={key:0,class:"loading-container"},Co={key:1,class:"mcp-layout"},So={class:"mcp-table-container"},To={key:0,class:"empty-state"},Ao={class:"empty-state-text"},xo={key:1,class:"mcp-table-wrapper"},Eo={class:"mcp-table"},Vo={class:"mcp-id"},Mo={class:"mcp-server-name"},Po={class:"server-name-content"},Uo={class:"mcp-connection-type"},Oo={class:"mcp-config"},Bo=["title"],Go={class:"mcp-actions"},Lo=["onClick","disabled"],Io={class:"add-mcp-container"},Ro={class:"mcp-form"},No={class:"mcp-form-group"},Do={class:"connection-type-options"},jo={class:"connection-type-option"},Fo={class:"connection-type-option"},Ko={class:"mcp-form-group"},Jo={class:"mcp-form-actions"},qo=["disabled"],zo=["disabled"],Yo=ae({__name:"mcpConfig",setup(L){const o=O(!1),s=O([]),b=O(""),p=ie({connectionType:"STUDIO",configJson:""}),i=ie({show:!1,text:"",type:"success"});J(()=>p.connectionType==="STUDIO"?`请输入MCP服务器配置JSON。

        例如：
        {
        "mcpServers": {
            "github": {
            "command": "npx",
            "args": [
                "-y",
                "@modelcontextprotocol/server-github"
            ],
            "env": {
                "GITHUB_PERSONAL_ACCESS_TOKEN": "<YOUR_TOKEN>"
            }
            }
        }
        }`:`请输入SSE MCP服务器配置JSON。

例如：
{
  "mcpServers": {
    "remote-server": {
      "url": "https://example.com/mcp",
      "headers": {
        "Authorization": "Bearer <YOUR_TOKEN>"
      }
    }
  }
}`);const S=J(()=>p.configJson.trim().length>0),M=J(()=>{if(!b.value.trim())return s.value;const T=b.value.toLowerCase();return s.value.filter(v=>v.mcpServerName.toLowerCase().includes(T)||v.connectionType.toLowerCase().includes(T)||v.connectionConfig.toLowerCase().includes(T))}),C=T=>T?T.length>50?T.substring(0,50)+"...":T:"",I=(T,v="success")=>{i.text=T,i.type=v,i.show=!0,setTimeout(()=>{i.show=!1},3e3)},x=async()=>{try{o.value=!0,s.value=await ve.getAllMcpServers()}catch(T){console.error("加载MCP服务器列表失败:",T),I("加载MCP服务器列表失败","error")}finally{o.value=!1}},D=async()=>{if(!S.value){I("请输入MCP服务器配置","error");return}try{JSON.parse(p.configJson)}catch{I("配置JSON格式不正确，请检查语法","error");return}try{o.value=!0;const T={connectionType:p.connectionType,configJson:p.configJson},v=await ve.addMcpServer(T);v.success?(I("添加MCP服务器成功"),U(),await x()):I(v.message||"添加MCP服务器失败","error")}catch(T){console.error("添加MCP服务器失败:",T),I("添加MCP服务器失败，请重试","error")}finally{o.value=!1}},ee=async T=>{if(confirm("确定要删除这个MCP服务器配置吗？此操作不可恢复。"))try{o.value=!0;const v=await ve.removeMcpServer(T);v.success?(I("删除MCP服务器成功"),await x()):I(v.message||"删除MCP服务器失败","error")}catch(v){console.error("删除MCP服务器失败:",v),I("删除MCP服务器失败，请重试","error")}finally{o.value=!1}},U=()=>{p.connectionType="STUDIO",p.configJson=""};return ye(()=>{x()}),(T,v)=>(l(),d("div",fo,[e("div",ho,[e("div",mo,[v[5]||(v[5]=e("h2",null,"MCP配置",-1)),e("div",yo,[e("span",bo,[v[4]||(v[4]=e("span",{class:"stat-label"},"总服务器:",-1)),e("span",_o,h(s.value.length),1)])])]),e("div",wo,[e("div",$o,[N(e("input",{"onUpdate:modelValue":v[0]||(v[0]=P=>b.value=P),type:"text",placeholder:"搜索MCP服务器...",class:"search-input"},null,512),[[Y,b.value]]),v[6]||(v[6]=e("span",{class:"search-icon"},"🔍",-1))])])]),o.value?(l(),d("div",ko,v[7]||(v[7]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"正在加载MCP服务器...",-1)]))):(l(),d("div",Co,[e("div",So,[v[11]||(v[11]=e("h3",{class:"section-title"},"已配置的MCP服务器",-1)),M.value.length===0?(l(),d("div",To,[v[8]||(v[8]=e("div",{class:"empty-state-icon"},"📂",-1)),e("div",Ao,h(b.value?"未找到匹配的MCP服务器":"暂无MCP服务器配置"),1)])):(l(),d("div",xo,[e("table",Eo,[v[10]||(v[10]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"服务器名称"),e("th",null,"连接类型"),e("th",null,"连接配置"),e("th",null,"操作")])],-1)),e("tbody",null,[(l(!0),d(F,null,K(M.value,P=>(l(),d("tr",{key:P.id,class:"mcp-row"},[e("td",Vo,h(P.id),1),e("td",Mo,[e("div",Po,[v[9]||(v[9]=e("span",{class:"server-icon"},"🔌",-1)),E(" "+h(P.mcpServerName),1)])]),e("td",Uo,[e("span",{class:Q(["connection-type-badge",P.connectionType.toLowerCase()])},h(P.connectionType),3)]),e("td",Oo,[e("div",{class:"config-preview",title:P.connectionConfig},h(C(P.connectionConfig)),9,Bo)]),e("td",Go,[e("button",{onClick:H=>ee(P.id),class:"action-btn delete-btn",disabled:o.value}," 删除 ",8,Lo)])]))),128))])])]))]),e("div",Io,[v[16]||(v[16]=e("div",{class:"add-mcp-header"},[e("h3",{class:"add-mcp-title"},"添加MCP服务器")],-1)),e("div",Ro,[e("div",No,[v[14]||(v[14]=e("label",{class:"form-label"},"连接类型：",-1)),e("div",Do,[e("div",jo,[N(e("input",{type:"radio",id:"mcp-connection-type-studio","onUpdate:modelValue":v[1]||(v[1]=P=>p.connectionType=P),value:"STUDIO"},null,512),[[ke,p.connectionType]]),v[12]||(v[12]=e("label",{for:"mcp-connection-type-studio",class:"radio-label"},[e("span",{class:"radio-title"},"STUDIO"),e("span",{class:"connection-type-desc"},"本地mcp server，目前市面上主流的是这个")],-1))]),e("div",Fo,[N(e("input",{type:"radio",id:"mcp-connection-type-sse","onUpdate:modelValue":v[2]||(v[2]=P=>p.connectionType=P),value:"SSE"},null,512),[[ke,p.connectionType]]),v[13]||(v[13]=e("label",{for:"mcp-connection-type-sse",class:"radio-label"},[e("span",{class:"radio-title"},"SSE"),e("span",{class:"connection-type-desc"},"通过http server等提供的，目前网络上比较少见")],-1))])])]),e("div",Ko,[v[15]||(v[15]=e("label",{class:"form-label"},"mcp json配置：",-1)),N(e("textarea",{"onUpdate:modelValue":v[3]||(v[3]=P=>p.configJson=P),placeholder:"请输入MCP服务器的配置(JSON格式)...",class:"config-textarea",rows:"6"},null,512),[[Y,p.configJson]])]),e("div",Jo,[e("button",{onClick:D,class:"action-btn add-btn",disabled:o.value}," 添加 ",8,qo),e("button",{onClick:U,class:"action-btn reset-btn",disabled:o.value}," 重置 ",8,zo)])]),v[17]||(v[17]=Pe('<div class="mcp-form-instructions" data-v-e67db080><h4 data-v-e67db080>使用说明：</h4><ol data-v-e67db080><li data-v-e67db080>找到你要用的mcp server的配置json： <ul class="indented-list" data-v-e67db080><li data-v-e67db080><strong data-v-e67db080>本地(STDIO)</strong>：可以在<a href="https://mcp.so" target="_blank" rel="noopener" data-v-e67db080>mcp.so</a>上找到，需要你有Node.js环境并理解你要配置的json里面的每一个项，做对应调整比如配置ak</li><li data-v-e67db080><strong data-v-e67db080>远程服务(SSE)</strong>：<a href="https://mcp.higress.ai/" target="_blank" rel="noopener" data-v-e67db080>mcp.higress.ai/</a>上可以找到，有SSE和STREAMING两种，目前SSE协议更完备一些</li></ul></li><li data-v-e67db080>将json配置复制到上面的输入框，本地选STUDIO，远程选STREAMING或SSE，提交</li><li data-v-e67db080>这样mcp tools就注册成功了。</li><li data-v-e67db080>然后需要在Agent配置里面，新建一个agent，然后增加指定你刚才添加的mcp tools，这样可以极大减少冲突，增强tools被agent选择的准确性</li></ol></div>',1))])])),A(be,{name:"message-fade"},{default:oe(()=>[i.show?(l(),d("div",{key:0,class:Q(["message-toast",i.type])},h(i.text),3)):V("",!0)]),_:1})]))}}),Ho=ne(Yo,[["__scopeId","data-v-e67db080"]]),Xo={class:"config-container"},Qo={class:"config-header"},Wo={class:"header-actions"},Zo={class:"config-content"},en={class:"config-nav"},tn=["onClick"],sn={class:"config-details"},on=ae({__name:"index",setup(L){const o=O("basic"),s=[{key:"basic",label:"基础配置",icon:"carbon:settings"},{key:"agent",label:"Agent配置",icon:"carbon:bot"},{key:"mcp",label:"Tools/MCP配置",icon:"carbon:tool-box"}];return(b,p)=>(l(),d("div",Xo,[e("div",Qo,[e("div",Wo,[e("button",{class:"action-btn",onClick:p[0]||(p[0]=i=>b.$router.push("/"))},[A(G(B),{icon:"carbon:arrow-left"}),p[1]||(p[1]=E(" 返回主页 "))])])]),e("div",Zo,[e("nav",en,[(l(),d(F,null,K(s,(i,S)=>e("div",{key:S,class:Q(["nav-item",{active:o.value===i.key}]),onClick:M=>o.value=i.key},[A(G(B),{icon:i.icon,width:"20"},null,8,["icon"]),e("span",null,h(i.label),1)],10,tn)),64))]),e("div",sn,[o.value==="basic"?(l(),re(os,{key:0})):V("",!0),o.value==="agent"?(l(),re(go,{key:1})):V("",!0),o.value==="mcp"?(l(),re(Ho,{key:2})):V("",!0)])])]))}}),rn=ne(on,[["__scopeId","data-v-bad7e81b"]]);export{rn as default};
