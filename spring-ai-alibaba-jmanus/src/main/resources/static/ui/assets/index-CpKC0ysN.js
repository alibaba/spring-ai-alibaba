var Ee=Object.defineProperty;var xe=(L,n,s)=>n in L?Ee(L,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):L[n]=s;var pe=(L,n,s)=>xe(L,typeof n!="symbol"?n+"":n,s);import{_ as oe,I as O}from"./_plugin-vue_export-helper-1kW34Chy.js";import{d as ne,c as d,o as i,e,t as r,f as be,r as B,y as re,g as J,h as _e,i as T,b as M,q as V,w as N,v as H,F,j as K,p as Y,D as Ve,a as ce,A as se,T as $e,E as Me,u as G,G as Ce,s as me,x as he,H as Ue,k as Pe,B as Be,I as Se}from"./index-Be4G_uzU.js";import{L as Oe}from"./index-Ctm853_U.js";const Ge={class:"switch"},Le=["checked"],Ie={class:"switch-label"},Re=ne({__name:"index",props:{enabled:{type:Boolean},label:{}},emits:["update:switchValue"],setup(L,{emit:n}){const s=n,_=u=>{const l=u.target.checked;s("update:switchValue",l)};return(u,l)=>(i(),d("label",Ge,[e("input",{type:"checkbox",checked:u.enabled,onChange:_},null,40,Le),l[0]||(l[0]=e("span",{class:"slider"},null,-1)),e("span",Ie,r(u.label),1)]))}}),Ne=oe(Re,[["__scopeId","data-v-d484b4a3"]]);class ue{static async getConfigsByGroup(n){try{const s=await fetch(`${this.BASE_URL}/group/${n}`);if(!s.ok)throw new Error(`Failed to get ${n} group configuration: ${s.status}`);return await s.json()}catch(s){throw console.error(`Failed to get ${n} group configuration:`,s),s}}static async batchUpdateConfigs(n){if(!n||n.length===0)return{success:!0,message:"No configuration needs to be updated"};try{const s=await fetch(`${this.BASE_URL}/batch-update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok)throw new Error(`Batch update configuration failed: ${s.status}`);return{success:!0,message:"Configuration saved successfully"}}catch(s){return console.error("Batch update configuration failed:",s),{success:!1,message:s instanceof Error?s.message:"Update failed, please try again"}}}static async getConfigById(n){try{const s=await fetch(`${this.BASE_URL}/${n}`);if(!s.ok)throw new Error(`Failed to get configuration item: ${s.status}`);return await s.json()}catch(s){throw console.error(`Failed to get configuration item[${n}]:`,s),s}}static async updateConfig(n){try{const s=await fetch(`${this.BASE_URL}/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok)throw new Error(`Failed to update configuration item: ${s.status}`);return{success:!0,message:"Configuration updated successfully"}}catch(s){return console.error("Failed to update configuration item:",s),{success:!1,message:s instanceof Error?s.message:"Update failed, please try again"}}}}pe(ue,"BASE_URL","/api/config");const De={class:"config-panel"},je={class:"config-header"},Fe={class:"header-left"},Ke={class:"config-stats"},Je={class:"stat-item"},qe={class:"stat-value"},ze={key:0,class:"stat-item"},He={class:"stat-value modified"},Ye={class:"header-right"},Xe={class:"import-export-actions"},Qe={class:"action-btn",title:"ÂØºÂÖ•ÈÖçÁΩÆ"},We={class:"search-box"},Ze=["placeholder"],et={key:0,class:"loading-container"},tt={key:1,class:"config-groups"},st={class:"group-header"},ot={class:"group-info"},nt={class:"group-icon"},at={class:"group-actions"},lt=["onClick","disabled","title"],it={class:"sub-groups"},rt=["onClick"],ct={class:"sub-group-info"},dt={class:"sub-group-title"},ut={class:"item-count"},pt={class:"config-items"},gt={key:0,class:"config-item-content vertical-layout"},ft={class:"config-item-info"},vt={class:"config-item-header"},ht={class:"config-label"},mt={class:"type-badge boolean"},yt={key:0,class:"modified-badge"},bt=["title"],_t={class:"config-control"},$t=["value","onChange"],wt=["value"],kt={key:1,class:"config-item-content vertical-layout"},Ct={class:"config-item-info"},St={class:"config-item-header"},Tt={class:"config-label"},At={class:"type-badge select"},Et={key:0,class:"modified-badge"},xt=["title"],Vt={class:"config-control"},Mt=["value","onChange"],Ut=["value"],Pt={key:2,class:"config-item-content vertical-layout"},Bt={class:"config-item-info"},Ot={class:"config-item-header"},Gt={class:"config-label"},Lt={class:"type-badge textarea"},It={key:0,class:"modified-badge"},Rt=["title"],Nt={class:"config-control"},Dt=["value","onInput"],jt={key:3,class:"config-item-content vertical-layout"},Ft={class:"config-item-info"},Kt={class:"config-item-header"},Jt={class:"config-label"},qt={class:"type-badge number"},zt={key:0,class:"modified-badge"},Ht=["title"],Yt={key:0,class:"config-meta"},Xt={class:"range-info"},Qt={class:"config-control"},Wt=["value","onInput","min","max"],Zt={key:4,class:"config-item-content vertical-layout"},es={class:"config-item-info"},ts={class:"config-item-header"},ss={class:"config-label"},os={class:"type-badge string"},ns={key:0,class:"modified-badge"},as=["title"],ls={class:"config-control"},is=["value","onInput"],rs={key:2,class:"empty-state"},cs=ne({__name:"basicConfig",setup(L){const{t:n}=be(),s=B(!0),_=B(!1),u=B([]),l=B(new Map),S=B(new Set),A=re({show:!1,text:"",type:"success"}),k=B(""),I={maxSteps:"Êô∫ËÉΩ‰ΩìÊâßË°åÊúÄÂ§ßÊ≠•Êï∞",resetAllAgents:"ÈáçÁΩÆÊâÄÊúâagent",headlessBrowser:"ÊòØÂê¶‰ΩøÁî®Êó†Â§¥ÊµèËßàÂô®Ê®°Âºè",browserTimeout:"ÊµèËßàÂô®ËØ∑Ê±ÇË∂ÖÊó∂Êó∂Èó¥(Áßí)",browserDebug:"ÊµèËßàÂô®debugÊ®°Âºè",autoOpenBrowser:"ÂêØÂä®Êó∂Ëá™Âä®ÊâìÂºÄÊµèËßàÂô®",consoleInteractive:"ÂêØÁî®ÊéßÂà∂Âè∞‰∫§‰∫íÊ®°Âºè",systemName:"Á≥ªÁªüÂêçÁß∞",language:"ÈªòËÆ§ËØ≠Ë®Ä",maxThreads:"ÊúÄÂ§ßÁ∫øÁ®ãÊï∞",timeoutSeconds:"ËØ∑Ê±ÇË∂ÖÊó∂Êó∂Èó¥(Áßí)"},x={manus:"Êô∫ËÉΩ‰ΩìËÆæÁΩÆ",browser:"ÊµèËßàÂô®ËÆæÁΩÆ",interaction:"‰∫§‰∫íËÆæÁΩÆ",system:"Á≥ªÁªüËÆæÁΩÆ",performance:"ÊÄßËÉΩËÆæÁΩÆ"},D={manus:"ü§ñ",browser:"üåê",interaction:"üñ•Ô∏è",system:"‚öôÔ∏è",performance:"‚ö°"},ee={agent:"Êô∫ËÉΩ‰ΩìËÆæÁΩÆ",browser:"ÊµèËßàÂô®ËÆæÁΩÆ",interaction:"‰∫§‰∫íËÆæÁΩÆ",system:"Á≥ªÁªüËÆæÁΩÆ",performance:"ÊÄßËÉΩËÆæÁΩÆ",general:"Â∏∏ËßÑËÆæÁΩÆ"},P=J(()=>u.value.some(o=>o.subGroups.some(f=>f.items.some(b=>l.value.get(b.id)!==b.configValue)))),E=o=>o==="true",g=o=>parseFloat(o)||0,U=o=>({maxSteps:1,browserTimeout:1,maxThreads:1,timeoutSeconds:5})[o]||1,ae=o=>({maxSteps:100,browserTimeout:600,maxThreads:32,timeoutSeconds:300})[o]||1e4,X=o=>typeof o=="string"?o:o.value,le=o=>typeof o=="string"?o:o.label,de=(o,f)=>{if(typeof f=="boolean")return f.toString();if(typeof f=="string"){if(o.options&&o.options.length>0){const b=o.options.find(y=>(typeof y=="string"?y:y.label)===f||(typeof y=="string"?y:y.value)===f);if(b)return typeof b=="string"?b:b.value}return f}return String(f)},q=(o,f,b=!1)=>{let y;o.inputType==="BOOLEAN"||o.inputType==="CHECKBOX"?y=de(o,f):y=String(f),o.configValue!==y&&(o.configValue=y,o._modified=!0,(b||o.inputType==="BOOLEAN"||o.inputType==="CHECKBOX"||o.inputType==="SELECT")&&p())};let m=null;const p=()=>{m&&clearTimeout(m),m=window.setTimeout(()=>{t()},500)},v=(o,f="success")=>{A.text=o,A.type=f,A.show=!0,setTimeout(()=>{A.show=!1},3e3)},c=async()=>{try{s.value=!0;const f=["manus","browser","interaction","system","performance"].map(async y=>{try{const a=await ue.getConfigsByGroup(y);if(a.length===0)return null;const w=a.map(R=>({...R,displayName:R.description||I[R.configKey]||R.configKey,min:U(R.configKey),max:ae(R.configKey)}));w.forEach(R=>{l.value.set(R.id,R.configValue)});const C=new Map;w.forEach(R=>{const z=R.configSubGroup||"general";C.has(z)||C.set(z,[]),C.get(z).push(R)});const j=Array.from(C.entries()).map(([R,z])=>({name:R,displayName:ee[R]||R,items:z}));return{name:y,displayName:x[y]||y,subGroups:j}}catch(a){return console.warn(`Âä†ËΩΩÈÖçÁΩÆÁªÑ ${y} Â§±Ë¥•ÔºåË∑≥Ëøá:`,a),null}}),b=await Promise.all(f);u.value=b.filter(y=>y!==null),console.log("ÈÖçÁΩÆÂä†ËΩΩÂÆåÊàê:",u.value)}catch(o){console.error("Âä†ËΩΩÈÖçÁΩÆÂ§±Ë¥•:",o),v("Âä†ËΩΩÈÖçÁΩÆÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞ÈáçËØï","error")}finally{s.value=!1}},t=async()=>{if(!(_.value||!P.value))try{_.value=!0;const o=[];if(u.value.forEach(b=>{b.subGroups.forEach(y=>{const a=y.items.filter(w=>w._modified);o.push(...a)})}),o.length===0){v("Ê≤°ÊúâÈúÄË¶Å‰øùÂ≠òÁöÑ‰øÆÊîπ");return}const f=await ue.batchUpdateConfigs(o);f.success?(o.forEach(b=>{l.value.set(b.id,b.configValue),b._modified=!1}),v("ÈÖçÁΩÆ‰øùÂ≠òÊàêÂäü")):v(f.message||"‰øùÂ≠òÂ§±Ë¥•","error")}catch(o){console.error("‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•:",o),v("‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑ÈáçËØï","error")}finally{_.value=!1}},$=async o=>{if(confirm(`Á°ÆÂÆöË¶ÅÈáçÁΩÆ "${x[o]||o}" ÁªÑÁöÑÊâÄÊúâÈÖçÁΩÆÂêóÔºü`))try{_.value=!0;const b=u.value.find(w=>w.name===o);if(!b)return;const y=[];if(b.subGroups.forEach(w=>{w.items.forEach(C=>{const j=h(C.configKey);j!==C.configValue&&y.push({...C,configValue:j})})}),y.length===0){v("ËØ•ÁªÑÈÖçÁΩÆÂ∑≤ÊòØÈªòËÆ§ÂÄº");return}const a=await ue.batchUpdateConfigs(y);a.success?(await c(),v(`ÊàêÂäüÈáçÁΩÆ ${y.length} È°πÈÖçÁΩÆ`)):v(a.message||"ÈáçÁΩÆÂ§±Ë¥•","error")}catch(b){console.error("ÈáçÁΩÆÁªÑÈÖçÁΩÆÂ§±Ë¥•:",b),v("ÈáçÁΩÆÂ§±Ë¥•ÔºåËØ∑ÈáçËØï","error")}finally{_.value=!1}},h=o=>({systemName:"JTaskPilot",language:"zh-CN",maxThreads:"8",timeoutSeconds:"60",autoOpenBrowser:"false",headlessBrowser:"true"})[o]||"",te=(o,f)=>{const b=`${o}-${f}`;S.value.has(b)?S.value.delete(b):S.value.add(b)},Q=(o,f)=>S.value.has(`${o}-${f}`),ie=J(()=>{const o=u.value.reduce((b,y)=>b+y.subGroups.reduce((a,w)=>a+w.items.length,0),0),f=u.value.reduce((b,y)=>b+y.subGroups.reduce((a,w)=>a+w.items.filter(C=>l.value.get(C.id)!==C.configValue).length,0),0);return{total:o,modified:f}}),W=J(()=>{if(!k.value.trim())return u.value;const o=k.value.toLowerCase();return u.value.map(f=>({...f,subGroups:f.subGroups.map(b=>({...b,items:b.items.filter(y=>y.displayName.toLowerCase().includes(o)||y.configKey.toLowerCase().includes(o)||y.description&&y.description.toLowerCase().includes(o))})).filter(b=>b.items.length>0)})).filter(f=>f.subGroups.length>0)}),we=()=>{try{const o={timestamp:new Date().toISOString(),version:"1.0",configs:u.value.reduce((a,w)=>(w.subGroups.forEach(C=>{C.items.forEach(j=>{a[j.configKey]=j.configValue})}),a),{})},f=JSON.stringify(o,null,2),b=new Blob([f],{type:"application/json"}),y=document.createElement("a");y.href=URL.createObjectURL(b),y.download=`config-export-${new Date().toISOString().split("T")[0]}.json`,y.click(),v("ÈÖçÁΩÆÂØºÂá∫ÊàêÂäü")}catch(o){console.error("ÂØºÂá∫ÈÖçÁΩÆÂ§±Ë¥•:",o),v("ÂØºÂá∫Â§±Ë¥•","error")}},fe=o=>{var a;const f=o.target,b=(a=f.files)==null?void 0:a[0];if(!b)return;const y=new FileReader;y.onload=async w=>{var C;try{const j=JSON.parse((C=w.target)==null?void 0:C.result);if(!j.configs)throw new Error("Êó†ÊïàÁöÑÈÖçÁΩÆÊñá‰ª∂Ê†ºÂºè");if(!confirm("Á°ÆÂÆöË¶ÅÂØºÂÖ•ÈÖçÁΩÆÂêóÔºüËøôÂ∞ÜË¶ÜÁõñÂΩìÂâçÈÖçÁΩÆ„ÄÇ"))return;_.value=!0;const z=[];if(u.value.forEach(Te=>{Te.subGroups.forEach(Ae=>{Ae.items.forEach(ve=>{j.configs.hasOwnProperty(ve.configKey)&&z.push({...ve,configValue:j.configs[ve.configKey]})})})}),z.length===0){v("Ê≤°ÊúâÊâæÂà∞ÂèØÂØºÂÖ•ÁöÑÈÖçÁΩÆÈ°π");return}const ke=await ue.batchUpdateConfigs(z);ke.success?(await c(),v(`ÊàêÂäüÂØºÂÖ• ${z.length} È°πÈÖçÁΩÆ`)):v(ke.message||"ÂØºÂÖ•Â§±Ë¥•","error")}catch(j){console.error("ÂØºÂÖ•ÈÖçÁΩÆÂ§±Ë¥•:",j),v("ÂØºÂÖ•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Êñá‰ª∂Ê†ºÂºè","error")}finally{_.value=!1,f.value=""}},y.readAsText(b)};return _e(()=>{c()}),(o,f)=>(i(),d("div",De,[e("div",je,[e("div",Fe,[f[3]||(f[3]=e("h2",null,"Âü∫Á°ÄÈÖçÁΩÆ",-1)),e("div",Ke,[e("span",Je,[f[1]||(f[1]=e("span",{class:"stat-label"},"ÊÄªÈÖçÁΩÆÈ°π:",-1)),e("span",qe,r(ie.value.total),1)]),ie.value.modified>0?(i(),d("span",ze,[f[2]||(f[2]=e("span",{class:"stat-label"},"Â∑≤‰øÆÊîπ:",-1)),e("span",He,r(ie.value.modified),1)])):M("",!0)])]),e("div",Ye,[e("div",Xe,[e("button",{onClick:we,class:"action-btn",title:"ÂØºÂá∫ÈÖçÁΩÆ"}," üì§ "),e("label",Qe,[f[4]||(f[4]=V(" üì• ")),e("input",{type:"file",accept:".json",onChange:fe,style:{display:"none"}},null,32)])]),e("div",We,[N(e("input",{"onUpdate:modelValue":f[0]||(f[0]=b=>k.value=b),type:"text",placeholder:o.$t("config.search"),class:"search-input"},null,8,Ze),[[H,k.value]]),f[5]||(f[5]=e("span",{class:"search-icon"},"üîç",-1))])])]),s.value?(i(),d("div",et,[f[6]||(f[6]=e("div",{class:"loading-spinner"},null,-1)),e("p",null,r(o.$t("config.loading")),1)])):W.value.length>0?(i(),d("div",tt,[(i(!0),d(F,null,K(W.value,b=>(i(),d("div",{key:b.name,class:"config-group"},[e("div",st,[e("div",ot,[e("span",nt,r(D[b.name]||"‚öôÔ∏è"),1)]),e("div",at,[e("button",{onClick:y=>$(b.name),class:"reset-btn",disabled:_.value,title:o.$t("config.resetGroupConfirm")},r(o.$t("config.reset")),9,lt)]),f[7]||(f[7]=e("div",{class:"group-divider"},null,-1))]),e("div",it,[(i(!0),d(F,null,K(b.subGroups,y=>(i(),d("div",{key:y.name,class:"sub-group"},[e("div",{class:"sub-group-header",onClick:a=>te(b.name,y.name)},[e("div",ct,[f[8]||(f[8]=e("span",{class:"sub-group-icon"},"üìÅ",-1)),e("h4",dt,r(y.displayName),1),e("span",ut,"("+r(y.items.length)+")",1)]),e("span",{class:Y(["collapse-icon",{collapsed:Q(b.name,y.name)}])}," ‚ñº ",2)],8,rt),N(e("div",pt,[(i(!0),d(F,null,K(y.items,a=>(i(),d("div",{key:a.id,class:Y(["config-item",{modified:l.value.get(a.id)!==a.configValue}])},[a.inputType==="BOOLEAN"||a.inputType==="CHECKBOX"?(i(),d("div",gt,[e("div",ft,[e("div",vt,[e("label",ht,[V(r(a.description||a.displayName)+" ",1),e("span",mt,r(a.inputType==="CHECKBOX"?o.$t("config.types.checkbox"):o.$t("config.types.boolean")),1),l.value.get(a.id)!==a.configValue?(i(),d("span",yt,r(o.$t("config.modified")),1)):M("",!0)]),e("span",{class:"config-key",title:a.configKey},r(a.configKey),9,bt)])]),e("div",_t,[a.options&&a.options.length>0?(i(),d("select",{key:0,class:"config-input select-input",value:a.configValue,onChange:w=>{var C;return q(a,((C=w.target)==null?void 0:C.value)||"")}},[(i(!0),d(F,null,K(a.options,w=>(i(),d("option",{key:X(w),value:X(w)},r(le(w)),9,wt))),128))],40,$t)):(i(),ce(Ne,{key:1,enabled:E(a.configValue),label:"","onUpdate:switchValue":w=>q(a,w)},null,8,["enabled","onUpdate:switchValue"]))])])):a.inputType==="SELECT"?(i(),d("div",kt,[e("div",Ct,[e("div",St,[e("label",Tt,[V(r(a.description||a.displayName)+" ",1),e("span",At,r(o.$t("config.types.select")),1),l.value.get(a.id)!==a.configValue?(i(),d("span",Et,r(o.$t("config.modified")),1)):M("",!0)]),e("span",{class:"config-key",title:a.configKey},r(a.configKey),9,xt)])]),e("div",Vt,[e("select",{class:"config-input select-input",value:a.configValue,onChange:w=>{var C;return q(a,((C=w.target)==null?void 0:C.value)||"")}},[(i(!0),d(F,null,K(a.options||[],w=>(i(),d("option",{key:X(w),value:X(w)},r(le(w)),9,Ut))),128))],40,Mt)])])):a.inputType==="TEXTAREA"?(i(),d("div",Pt,[e("div",Bt,[e("div",Ot,[e("label",Gt,[V(r(a.description||a.displayName)+" ",1),e("span",Lt,r(o.$t("config.types.textarea")),1),l.value.get(a.id)!==a.configValue?(i(),d("span",It,r(o.$t("config.modified")),1)):M("",!0)]),e("span",{class:"config-key",title:a.configKey},r(a.configKey),9,Rt)])]),e("div",Nt,[e("textarea",{class:"config-input textarea-input",value:a.configValue,onInput:w=>{var C;return q(a,((C=w.target)==null?void 0:C.value)||"")},onBlur:p,rows:"3"},null,40,Dt)])])):a.inputType==="NUMBER"?(i(),d("div",jt,[e("div",Ft,[e("div",Kt,[e("label",Jt,[V(r(a.description||a.displayName)+" ",1),e("span",qt,r(o.$t("config.types.number")),1),l.value.get(a.id)!==a.configValue?(i(),d("span",zt,r(o.$t("config.modified")),1)):M("",!0)]),e("span",{class:"config-key",title:a.configKey},r(a.configKey),9,Ht),a.min||a.max?(i(),d("div",Yt,[e("span",Xt,r(o.$t("config.range"))+": "+r(a.min||0)+" - "+r(a.max||"‚àû"),1)])):M("",!0)])]),e("div",Qt,[e("input",{type:"number",class:"config-input number-input",value:g(a.configValue),onInput:w=>{var C;return q(a,((C=w.target)==null?void 0:C.value)||"")},onBlur:p,min:a.min||1,max:a.max||1e4},null,40,Wt)])])):(i(),d("div",Zt,[e("div",es,[e("div",ts,[e("label",ss,[V(r(a.description||a.displayName)+" ",1),e("span",os,r(a.inputType==="TEXT"?o.$t("config.types.text"):o.$t("config.types.string")),1),l.value.get(a.id)!==a.configValue?(i(),d("span",ns,r(o.$t("config.modified")),1)):M("",!0)]),e("span",{class:"config-key",title:a.configKey},r(a.configKey),9,as)])]),e("div",ls,[e("input",{type:"text",class:"config-input text-input",value:a.configValue,onInput:w=>{var C;return q(a,((C=w.target)==null?void 0:C.value)||"")},onBlur:p},null,40,is)])]))],2))),128))],512),[[Ve,!Q(b.name,y.name)]])]))),128))])]))),128))])):(i(),d("div",rs,[e("p",null,r(o.$t("config.notFound")),1)])),T($e,{name:"message-fade"},{default:se(()=>[A.show?(i(),d("div",{key:0,class:Y(["message-toast",A.type])},r(A.text),3)):M("",!0)]),_:1})]))}}),ds=oe(cs,[["__scopeId","data-v-1e1fd46a"]]),us={class:"modal-header"},ps={class:"modal-content"},gs={class:"modal-footer"},fs=ne({__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(L){const{t:n}=be(),s=_=>{_.target===_.currentTarget&&(_.stopPropagation(),_.preventDefault())};return(_,u)=>(i(),ce(Me,{to:"body"},[T($e,{name:"modal"},{default:se(()=>[L.modelValue?(i(),d("div",{key:0,class:"modal-overlay",onClick:s},[e("div",{class:"modal-container",onClick:u[3]||(u[3]=me(()=>{},["stop"]))},[e("div",us,[e("h3",null,r(L.title),1),e("button",{class:"close-btn",onClick:u[0]||(u[0]=l=>_.$emit("update:modelValue",!1))},[T(G(O),{icon:"carbon:close"})])]),e("div",ps,[Ce(_.$slots,"default",{},void 0,!0)]),e("div",gs,[Ce(_.$slots,"footer",{},()=>[e("button",{class:"cancel-btn",onClick:u[1]||(u[1]=l=>_.$emit("update:modelValue",!1))},r(_.$t("common.cancel")),1),e("button",{class:"confirm-btn",onClick:u[2]||(u[2]=l=>_.$emit("confirm"))},r(_.$t("common.confirm")),1)],!0)])])])):M("",!0)]),_:3})]))}}),ye=oe(fs,[["__scopeId","data-v-b5281b82"]]),vs={class:"tool-selection-content"},hs={class:"tool-controls"},ms={class:"search-container"},ys={class:"sort-container"},bs={class:"tool-summary"},_s={class:"summary-text"},$s={key:0,class:"tool-groups"},ws=["onClick"],ks={class:"group-title-area"},Cs={class:"group-name"},Ss={class:"group-count"},Ts={class:"group-enable-all"},As=["checked","onChange","data-group"],Es={class:"tool-info"},xs={class:"tool-selection-name"},Vs={key:0,class:"tool-selection-desc"},Ms={class:"tool-actions"},Us=["checked","onChange"],Ps={key:1,class:"empty-state"},Bs=ne({__name:"index",props:{modelValue:{type:Boolean},tools:{},selectedToolIds:{}},emits:["update:modelValue","confirm"],setup(L,{emit:n}){const s=L,_=n,u=J({get:()=>s.modelValue,set:m=>_("update:modelValue",m)}),l=B(""),S=B("group"),A=B(new Set),k=B([]),I=(m,p)=>{const v=document.querySelector(`input[data-group="${m}"]`);v&&(v.indeterminate=ae(p))};he(()=>s.selectedToolIds,m=>{k.value=[...m]},{immediate:!0});const x=J(()=>{let m=s.tools.filter(p=>p&&p.key);if(l.value){const p=l.value.toLowerCase();m=m.filter(v=>v.name.toLowerCase().includes(p)||v.description.toLowerCase().includes(p)||v.serviceGroup&&v.serviceGroup.toLowerCase().includes(p))}switch(S.value){case"name":m=[...m].sort((p,v)=>p.name.localeCompare(v.name));break;case"enabled":m=[...m].sort((p,v)=>{const c=k.value.includes(p.key),t=k.value.includes(v.key);return c&&!t?-1:!c&&t?1:p.name.localeCompare(v.name)});break;case"group":default:m=[...m].sort((p,v)=>{const c=p.serviceGroup||"Êú™ÂàÜÁªÑ",t=v.serviceGroup||"Êú™ÂàÜÁªÑ";return c!==t?c.localeCompare(t):p.name.localeCompare(v.name)});break}return m}),D=J(()=>{const m=new Map;return x.value.forEach(p=>{const v=p.serviceGroup||"Êú™ÂàÜÁªÑ";m.has(v)||m.set(v,[]),m.get(v).push(p)}),new Map([...m.entries()].sort())}),ee=J(()=>x.value.length);he([k,D],()=>{Pe(()=>{for(const[m,p]of D.value)I(m,p)})},{flush:"post",deep:!1});const P=m=>k.value.includes(m),E=(m,p)=>{p.stopPropagation();const c=p.target.checked;if(!m){console.error("toolKey is undefined, cannot proceed");return}c?k.value.includes(m)||(k.value=[...k.value,m]):k.value=k.value.filter(t=>t!==m)},g=m=>m.filter(p=>k.value.includes(p.key)),U=m=>m.length>0&&m.every(p=>k.value.includes(p.key)),ae=m=>{const p=g(m).length;return p>0&&p<m.length},X=(m,p)=>{p.stopPropagation();const c=p.target.checked,t=m.map($=>$.key);if(c){const $=[...k.value];t.forEach(h=>{$.includes(h)||$.push(h)}),k.value=$}else k.value=k.value.filter($=>!t.includes($))},le=m=>{A.value.has(m)?A.value.delete(m):A.value.add(m)},de=()=>{_("confirm",[...k.value]),_("update:modelValue",!1)},q=()=>{k.value=[...s.selectedToolIds],_("update:modelValue",!1)};return he(u,m=>{if(m){A.value.clear();const p=Array.from(D.value.keys());p.length>1&&p.slice(1).forEach(v=>{A.value.add(v)})}}),(m,p)=>(i(),ce(ye,{modelValue:u.value,"onUpdate:modelValue":[p[4]||(p[4]=v=>u.value=v),q],title:"ÈÄâÊã©Â∑•ÂÖ∑",onConfirm:de},{default:se(()=>[e("div",vs,[e("div",hs,[e("div",ms,[N(e("input",{"onUpdate:modelValue":p[0]||(p[0]=v=>l.value=v),type:"text",class:"search-input",placeholder:"ÊêúÁ¥¢Â∑•ÂÖ∑..."},null,512),[[H,l.value]])]),e("div",ys,[N(e("select",{"onUpdate:modelValue":p[1]||(p[1]=v=>S.value=v),class:"sort-select"},p[5]||(p[5]=[e("option",{value:"group"},"ÊåâÊúçÂä°ÁªÑÊéíÂ∫è",-1),e("option",{value:"name"},"ÊåâÂêçÁß∞ÊéíÂ∫è",-1),e("option",{value:"enabled"},"ÊåâÂêØÁî®Áä∂ÊÄÅÊéíÂ∫è",-1)]),512),[[Ue,S.value]])])]),e("div",bs,[e("span",_s," ÂÖ± "+r(D.value.size)+" ‰∏™ÊúçÂä°ÁªÑÔºå"+r(ee.value)+" ‰∏™Â∑•ÂÖ∑ (Â∑≤ÈÄâÊã© "+r(k.value.length)+" ‰∏™) ",1)]),D.value.size>0?(i(),d("div",$s,[(i(!0),d(F,null,K(D.value,([v,c])=>(i(),d("div",{key:v,class:"tool-group"},[e("div",{class:Y(["tool-group-header",{collapsed:A.value.has(v)}]),onClick:t=>le(v)},[e("div",ks,[T(G(O),{icon:A.value.has(v)?"carbon:chevron-right":"carbon:chevron-down",class:"collapse-icon"},null,8,["icon"]),T(G(O),{icon:"carbon:folder",class:"group-icon"}),e("span",Cs,r(v),1),e("span",Ss," ("+r(g(c).length)+"/"+r(c.length)+") ",1)]),e("div",{class:"group-actions",onClick:p[2]||(p[2]=me(()=>{},["stop"]))},[e("label",Ts,[e("input",{type:"checkbox",class:"group-enable-checkbox",checked:U(c),onChange:t=>X(c,t),"data-group":v},null,40,As),p[6]||(p[6]=e("span",{class:"enable-label"},"ÂêØÁî®ÂÖ®ÈÉ®",-1))])])],10,ws),e("div",{class:Y(["tool-group-content",{collapsed:A.value.has(v)}])},[(i(!0),d(F,null,K(c.filter(t=>t&&t.key),t=>(i(),d("div",{key:t.key,class:"tool-selection-item"},[e("div",Es,[e("div",xs,r(t.name),1),t.description?(i(),d("div",Vs,r(t.description),1)):M("",!0)]),e("div",Ms,[e("label",{class:"tool-enable-switch",onClick:p[3]||(p[3]=me(()=>{},["stop"]))},[e("input",{type:"checkbox",class:"tool-enable-checkbox",checked:P(t.key),onChange:$=>E(t.key,$)},null,40,Us),p[7]||(p[7]=e("span",{class:"tool-enable-slider"},null,-1))])])]))),128))],2)]))),128))])):(i(),d("div",Ps,[T(G(O),{icon:"carbon:tools",class:"empty-icon"}),p[8]||(p[8]=e("p",null,"Ê≤°ÊúâÊâæÂà∞Â∑•ÂÖ∑",-1))]))])]),_:1},8,["modelValue"]))}}),Os=oe(Bs,[["__scopeId","data-v-81d0fa5c"]]);class Z{static async handleResponse(n){if(!n.ok)try{const s=await n.json();throw new Error(s.message||`API request failed: ${n.status}`)}catch{throw new Error(`API request failed: ${n.status} ${n.statusText}`)}return n}static async getAllAgents(){try{const n=await fetch(this.BASE_URL);return await(await this.handleResponse(n)).json()}catch(n){throw console.error("Failed to get Agent list:",n),n}}static async getAgentById(n){try{const s=await fetch(`${this.BASE_URL}/${n}`);return await(await this.handleResponse(s)).json()}catch(s){throw console.error(`Failed to get Agent[${n}] details:`,s),s}}static async createAgent(n){try{const s=await fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await(await this.handleResponse(s)).json()}catch(s){throw console.error("Failed to create Agent:",s),s}}static async updateAgent(n,s){try{const _=await fetch(`${this.BASE_URL}/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return await(await this.handleResponse(_)).json()}catch(_){throw console.error(`Failed to update Agent[${n}]:`,_),_}}static async deleteAgent(n){try{const s=await fetch(`${this.BASE_URL}/${n}`,{method:"DELETE"});if(s.status===400)throw new Error("Cannot delete default Agent");await this.handleResponse(s)}catch(s){throw console.error(`Failed to delete Agent[${n}]:`,s),s}}static async getAvailableTools(){try{const n=await fetch(`${this.BASE_URL}/tools`);return await(await this.handleResponse(n)).json()}catch(n){throw console.error("Failed to get available tools list:",n),n}}}pe(Z,"BASE_URL","/api/agents");const Gs={class:"config-panel"},Ls={class:"panel-header"},Is={class:"panel-actions"},Rs=["disabled"],Ns={class:"agent-layout"},Ds={class:"agent-list"},js={class:"list-header"},Fs={class:"agent-count"},Ks={key:0,class:"agents-container"},Js=["onClick"],qs={class:"agent-card-header"},zs={class:"agent-name"},Hs={class:"agent-desc"},Ys={key:0,class:"agent-tools"},Xs={key:0,class:"tool-more"},Qs={key:1,class:"loading-state"},Ws={key:2,class:"empty-state"},Zs={key:0,class:"agent-detail"},eo={class:"detail-header"},to={class:"detail-actions"},so={class:"form-item"},oo={class:"form-item"},no={class:"form-item"},ao={class:"tools-section"},lo={class:"assigned-tools"},io={class:"section-header"},ro={class:"tools-grid"},co={class:"tool-info"},uo={class:"tool-name"},po={class:"tool-desc"},go={key:0,class:"no-tools"},fo={key:1,class:"no-selection"},vo={class:"modal-form"},ho={class:"form-item"},mo={class:"form-item"},yo={class:"form-item"},bo={class:"delete-confirm"},_o=ne({__name:"agentConfig",setup(L){const n=B(!1),s=B(""),_=B(""),u=re([]),l=B(null),S=re([]),A=B(!1),k=B(!1),I=B(!1),x=re({name:"",description:"",nextStepPrompt:""});J(()=>!l.value||!l.value.availableTools||!Array.isArray(l.value.availableTools)?S:S.filter(c=>!l.value.availableTools.includes(c.key)));const D=c=>{const t=S.find($=>$.key===c);return t?t.name:c},ee=c=>{const t=S.find($=>$.key===c);return t?t.description:""},P=(c,t)=>{t==="success"?(_.value=c,setTimeout(()=>{_.value=""},3e3)):(s.value=c,setTimeout(()=>{s.value=""},5e3))},E=async()=>{n.value=!0;try{const[c,t]=await Promise.all([Z.getAllAgents(),Z.getAvailableTools()]),$=c.map(h=>({...h,availableTools:Array.isArray(h.availableTools)?h.availableTools:[]}));u.splice(0,u.length,...$),S.splice(0,S.length,...t),$.length>0&&await g($[0])}catch(c){console.error("Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•:",c),P("Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•: "+c.message,"error");const t=[{key:"search-web",name:"ÁΩëÁªúÊêúÁ¥¢",description:"Âú®‰∫íËÅîÁΩë‰∏äÊêúÁ¥¢‰ø°ÊÅØ",enabled:!0,serviceGroup:"ÊêúÁ¥¢ÊúçÂä°"},{key:"search-local",name:"Êú¨Âú∞ÊêúÁ¥¢",description:"Âú®Êú¨Âú∞Êñá‰ª∂‰∏≠ÊêúÁ¥¢ÂÜÖÂÆπ",enabled:!0,serviceGroup:"ÊêúÁ¥¢ÊúçÂä°"},{key:"file-read",name:"ËØªÂèñÊñá‰ª∂",description:"ËØªÂèñÊú¨Âú∞ÊàñËøúÁ®ãÊñá‰ª∂ÂÜÖÂÆπ",enabled:!0,serviceGroup:"Êñá‰ª∂ÊúçÂä°"},{key:"file-write",name:"ÂÜôÂÖ•Êñá‰ª∂",description:"ÂàõÂª∫Êàñ‰øÆÊîπÊñá‰ª∂ÂÜÖÂÆπ",enabled:!0,serviceGroup:"Êñá‰ª∂ÊúçÂä°"},{key:"file-delete",name:"Âà†Èô§Êñá‰ª∂",description:"Âà†Èô§ÊåáÂÆöÁöÑÊñá‰ª∂",enabled:!1,serviceGroup:"Êñá‰ª∂ÊúçÂä°"},{key:"calculator",name:"ËÆ°ÁÆóÂô®",description:"ÊâßË°åÊï∞Â≠¶ËÆ°ÁÆó",enabled:!0,serviceGroup:"ËÆ°ÁÆóÊúçÂä°"},{key:"code-execute",name:"‰ª£Á†ÅÊâßË°å",description:"ÊâßË°åPythonÊàñJavaScript‰ª£Á†Å",enabled:!0,serviceGroup:"ËÆ°ÁÆóÊúçÂä°"},{key:"weather",name:"Â§©Ê∞îÊü•ËØ¢",description:"Ëé∑ÂèñÊåáÂÆöÂú∞Âå∫ÁöÑÂ§©Ê∞î‰ø°ÊÅØ",enabled:!0,serviceGroup:"‰ø°ÊÅØÊúçÂä°"},{key:"currency",name:"Ê±áÁéáÊü•ËØ¢",description:"Êü•ËØ¢Ë¥ßÂ∏ÅÊ±áÁéá‰ø°ÊÅØ",enabled:!0,serviceGroup:"‰ø°ÊÅØÊúçÂä°"},{key:"email",name:"ÂèëÈÄÅÈÇÆ‰ª∂",description:"ÂèëÈÄÅÁîµÂ≠êÈÇÆ‰ª∂",enabled:!1,serviceGroup:"ÈÄö‰ø°ÊúçÂä°"},{key:"sms",name:"ÂèëÈÄÅÁü≠‰ø°",description:"ÂèëÈÄÅÁü≠‰ø°Ê∂àÊÅØ",enabled:!1,serviceGroup:"ÈÄö‰ø°ÊúçÂä°"}],$=[{id:"demo-1",name:"ÈÄöÁî®Âä©Êâã",description:"‰∏Ä‰∏™ËÉΩÂ§üÂ§ÑÁêÜÂêÑÁßç‰ªªÂä°ÁöÑÊô∫ËÉΩÂä©Êâã",nextStepPrompt:"You are a helpful assistant that can answer questions and help with various tasks. What would you like me to help you with next?",availableTools:["search-web","calculator","weather"]},{id:"demo-2",name:"Êï∞ÊçÆÂàÜÊûêÂ∏à",description:"‰∏ìÈó®Áî®‰∫éÊï∞ÊçÆÂàÜÊûêÂíåÂèØËßÜÂåñÁöÑAgent",nextStepPrompt:"You are a data analyst assistant specialized in analyzing data and creating visualizations. Please provide the data you would like me to analyze.",availableTools:["file-read","file-write","calculator","code-execute"]}];S.splice(0,S.length,...t),u.splice(0,u.length,...$),$.length>0&&(l.value=$[0])}finally{n.value=!1}},g=async c=>{if(c)try{const t=await Z.getAgentById(c.id);l.value={...t,availableTools:Array.isArray(t.availableTools)?t.availableTools:[]}}catch(t){console.error("Âä†ËΩΩAgentËØ¶ÊÉÖÂ§±Ë¥•:",t),P("Âä†ËΩΩAgentËØ¶ÊÉÖÂ§±Ë¥•: "+t.message,"error"),l.value={...c,availableTools:Array.isArray(c.availableTools)?c.availableTools:[]}}},U=()=>{x.name="",x.description="",x.nextStepPrompt="",A.value=!0},ae=async()=>{var c;if(!x.name.trim()||!x.description.trim()){P("ËØ∑Â°´ÂÜôÂøÖË¶ÅÁöÑÂ≠óÊÆµ","error");return}try{const t={name:x.name.trim(),description:x.description.trim(),nextStepPrompt:((c=x.nextStepPrompt)==null?void 0:c.trim())||"",availableTools:[]},$=await Z.createAgent(t);u.push($),l.value=$,A.value=!1,P("AgentÂàõÂª∫ÊàêÂäü","success")}catch(t){P("ÂàõÂª∫AgentÂ§±Ë¥•: "+t.message,"error")}},X=()=>{I.value=!0},le=c=>{l.value&&(l.value.availableTools=[...c])},de=async()=>{if(l.value){if(!l.value.name.trim()||!l.value.description.trim()){P("ËØ∑Â°´ÂÜôÂøÖË¶ÅÁöÑÂ≠óÊÆµ","error");return}try{const c=await Z.updateAgent(l.value.id,l.value),t=u.findIndex($=>$.id===c.id);t!==-1&&(u[t]=c),l.value=c,P("Agent‰øùÂ≠òÊàêÂäü","success")}catch(c){P("‰øùÂ≠òAgentÂ§±Ë¥•: "+c.message,"error")}}},q=()=>{k.value=!0},m=async()=>{if(l.value)try{await Z.deleteAgent(l.value.id);const c=u.findIndex(t=>t.id===l.value.id);c!==-1&&u.splice(c,1),l.value=u.length>0?u[0]:null,k.value=!1,P("AgentÂà†Èô§ÊàêÂäü","success")}catch(c){P("Âà†Èô§AgentÂ§±Ë¥•: "+c.message,"error")}},p=()=>{const c=document.createElement("input");c.type="file",c.accept=".json",c.onchange=t=>{var h;const $=(h=t.target.files)==null?void 0:h[0];if($){const te=new FileReader;te.onload=async Q=>{var ie;try{const W=JSON.parse((ie=Q.target)==null?void 0:ie.result);if(!W.name||!W.description)throw new Error("AgentÈÖçÁΩÆÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºöÁº∫Â∞ëÂøÖË¶ÅÂ≠óÊÆµ");const{id:we,...fe}=W,o=await Z.createAgent(fe);u.push(o),l.value=o,P("AgentÂØºÂÖ•ÊàêÂäü","success")}catch(W){P("ÂØºÂÖ•AgentÂ§±Ë¥•: "+W.message,"error")}},te.readAsText($)}},c.click()},v=()=>{if(l.value)try{const c=JSON.stringify(l.value,null,2),t=new Blob([c],{type:"application/json"}),$=URL.createObjectURL(t),h=document.createElement("a");h.href=$,h.download=`agent-${l.value.name}-${new Date().toISOString().split("T")[0]}.json`,h.click(),URL.revokeObjectURL($),P("AgentÂØºÂá∫ÊàêÂäü","success")}catch(c){P("ÂØºÂá∫AgentÂ§±Ë¥•: "+c.message,"error")}};return _e(()=>{E()}),(c,t)=>{var $;return i(),d("div",Gs,[e("div",Ls,[t[14]||(t[14]=e("h2",null,"AgentÈÖçÁΩÆ",-1)),e("div",Is,[e("button",{class:"action-btn",onClick:p},[T(G(O),{icon:"carbon:upload"}),t[12]||(t[12]=V(" ÂØºÂÖ• "))]),e("button",{class:"action-btn",onClick:v,disabled:!l.value},[T(G(O),{icon:"carbon:download"}),t[13]||(t[13]=V(" ÂØºÂá∫ "))],8,Rs)])]),e("div",Ns,[e("div",Ds,[e("div",js,[t[15]||(t[15]=e("h3",null,"Â∑≤ÈÖçÁΩÆÁöÑAgent",-1)),e("span",Fs,"("+r(u.length)+")",1)]),n.value?M("",!0):(i(),d("div",Ks,[(i(!0),d(F,null,K(u,h=>{var te;return i(),d("div",{key:h.id,class:Y(["agent-card",{active:((te=l.value)==null?void 0:te.id)===h.id}]),onClick:Q=>g(h)},[e("div",qs,[e("span",zs,r(h.name),1),T(G(O),{icon:"carbon:chevron-right"})]),e("p",Hs,r(h.description),1),h.availableTools&&Array.isArray(h.availableTools)&&h.availableTools.length>0?(i(),d("div",Ys,[(i(!0),d(F,null,K(h.availableTools.slice(0,3),Q=>(i(),d("span",{key:Q,class:"tool-tag"},r(D(Q)),1))),128)),h.availableTools.length>3?(i(),d("span",Xs," +"+r(h.availableTools.length-3),1)):M("",!0)])):M("",!0)],10,Js)}),128))])),n.value?(i(),d("div",Qs,[T(G(O),{icon:"carbon:loading",class:"loading-icon"}),t[16]||(t[16]=V(" Âä†ËΩΩ‰∏≠... "))])):M("",!0),!n.value&&u.length===0?(i(),d("div",Ws,[T(G(O),{icon:"carbon:bot",class:"empty-icon"}),t[17]||(t[17]=e("p",null,"ÊöÇÊó†AgentÈÖçÁΩÆ",-1))])):M("",!0),e("button",{class:"add-btn",onClick:U},[T(G(O),{icon:"carbon:add"}),t[18]||(t[18]=V(" Êñ∞Âª∫Agent "))])]),l.value?(i(),d("div",Zs,[e("div",eo,[e("h3",null,r(l.value.name),1),e("div",to,[e("button",{class:"action-btn primary",onClick:de},[T(G(O),{icon:"carbon:save"}),t[19]||(t[19]=V(" ‰øùÂ≠ò "))]),e("button",{class:"action-btn danger",onClick:q},[T(G(O),{icon:"carbon:trash-can"}),t[20]||(t[20]=V(" Âà†Èô§ "))])])]),e("div",so,[t[21]||(t[21]=e("label",null,[V("AgentÂêçÁß∞ "),e("span",{class:"required"},"*")],-1)),N(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=h=>l.value.name=h),placeholder:"ËæìÂÖ•AgentÂêçÁß∞",required:""},null,512),[[H,l.value.name]])]),e("div",oo,[t[22]||(t[22]=e("label",null,[V("ÊèèËø∞ "),e("span",{class:"required"},"*")],-1)),N(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=h=>l.value.description=h),rows:"3",placeholder:"ÊèèËø∞Ëøô‰∏™AgentÁöÑÂäüËÉΩÂíåÁî®ÈÄî",required:""},null,512),[[H,l.value.description]])]),e("div",no,[t[23]||(t[23]=e("label",null,"AgentÊèêÁ§∫ËØçÔºà‰∫∫ËÆæÔºåË¶ÅÊ±ÇÔºå‰ª•Âèä‰∏ã‰∏ÄÊ≠•Âä®‰ΩúÁöÑÊåáÂØºÔºâ",-1)),N(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=h=>l.value.nextStepPrompt=h),rows:"8",placeholder:"ËÆæÁΩÆAgentÁöÑ‰∫∫ËÆæ„ÄÅË¶ÅÊ±Ç‰ª•Âèä‰∏ã‰∏ÄÊ≠•Âä®‰ΩúÁöÑÊåáÂØº..."},null,512),[[H,l.value.nextStepPrompt]])]),e("div",ao,[t[26]||(t[26]=e("h4",null,"Â∑•ÂÖ∑ÈÖçÁΩÆ",-1)),e("div",lo,[e("div",io,[e("span",null,"Â∑≤ÂàÜÈÖçÂ∑•ÂÖ∑ ("+r((l.value.availableTools||[]).length)+")",1),S.length>0?(i(),d("button",{key:0,class:"action-btn small",onClick:X},[T(G(O),{icon:"carbon:add"}),t[24]||(t[24]=V(" Ê∑ªÂä†/Âà†Èô§Â∑•ÂÖ∑ "))])):M("",!0)]),e("div",ro,[(i(!0),d(F,null,K(l.value.availableTools||[],h=>(i(),d("div",{key:h,class:"tool-item assigned"},[e("div",co,[e("span",uo,r(D(h)),1),e("span",po,r(ee(h)),1)])]))),128)),!l.value.availableTools||l.value.availableTools.length===0?(i(),d("div",go,[T(G(O),{icon:"carbon:tool-box"}),t[25]||(t[25]=e("span",null,"ÊöÇÊó†ÂàÜÈÖçÁöÑÂ∑•ÂÖ∑",-1))])):M("",!0)])])])])):(i(),d("div",fo,[T(G(O),{icon:"carbon:bot",class:"placeholder-icon"}),t[27]||(t[27]=e("p",null,"ËØ∑ÈÄâÊã©‰∏Ä‰∏™AgentËøõË°åÈÖçÁΩÆ",-1))]))]),T(ye,{modelValue:A.value,"onUpdate:modelValue":t[6]||(t[6]=h=>A.value=h),title:"Êñ∞Âª∫Agent",onConfirm:ae},{default:se(()=>[e("div",vo,[e("div",ho,[t[28]||(t[28]=e("label",null,[V("AgentÂêçÁß∞ "),e("span",{class:"required"},"*")],-1)),N(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=h=>x.name=h),placeholder:"ËæìÂÖ•AgentÂêçÁß∞",required:""},null,512),[[H,x.name]])]),e("div",mo,[t[29]||(t[29]=e("label",null,[V("ÊèèËø∞ "),e("span",{class:"required"},"*")],-1)),N(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=h=>x.description=h),rows:"3",placeholder:"ÊèèËø∞Ëøô‰∏™AgentÁöÑÂäüËÉΩÂíåÁî®ÈÄî",required:""},null,512),[[H,x.description]])]),e("div",yo,[t[30]||(t[30]=e("label",null,"AgentÊèêÁ§∫ËØçÔºà‰∫∫ËÆæÔºåË¶ÅÊ±ÇÔºå‰ª•Âèä‰∏ã‰∏ÄÊ≠•Âä®‰ΩúÁöÑÊåáÂØºÔºâ",-1)),N(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=h=>x.nextStepPrompt=h),rows:"8",placeholder:"ËÆæÁΩÆAgentÁöÑ‰∫∫ËÆæ„ÄÅË¶ÅÊ±Ç‰ª•Âèä‰∏ã‰∏ÄÊ≠•Âä®‰ΩúÁöÑÊåáÂØº..."},null,512),[[H,x.nextStepPrompt]])])])]),_:1},8,["modelValue"]),T(Os,{modelValue:I.value,"onUpdate:modelValue":t[7]||(t[7]=h=>I.value=h),tools:S,"selected-tool-ids":(($=l.value)==null?void 0:$.availableTools)||[],onConfirm:le},null,8,["modelValue","tools","selected-tool-ids"]),T(ye,{modelValue:k.value,"onUpdate:modelValue":t[9]||(t[9]=h=>k.value=h),title:"Âà†Èô§Á°ÆËÆ§"},{footer:se(()=>[e("button",{class:"cancel-btn",onClick:t[8]||(t[8]=h=>k.value=!1)},"ÂèñÊ∂à"),e("button",{class:"confirm-btn danger",onClick:m},"Âà†Èô§")]),default:se(()=>{var h;return[e("div",bo,[T(G(O),{icon:"carbon:warning",class:"warning-icon"}),e("p",null,[t[31]||(t[31]=V("Á°ÆÂÆöË¶ÅÂà†Èô§ ")),e("strong",null,r((h=l.value)==null?void 0:h.name),1),t[32]||(t[32]=V(" ÂêóÔºü"))]),t[33]||(t[33]=e("p",{class:"warning-text"},"Ê≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§ç„ÄÇ",-1))])]}),_:1},8,["modelValue"]),s.value?(i(),d("div",{key:0,class:"error-toast",onClick:t[10]||(t[10]=h=>s.value="")},[T(G(O),{icon:"carbon:error"}),V(" "+r(s.value),1)])):M("",!0),_.value?(i(),d("div",{key:1,class:"success-toast",onClick:t[11]||(t[11]=h=>_.value="")},[T(G(O),{icon:"carbon:checkmark"}),V(" "+r(_.value),1)])):M("",!0)])}}}),$o=oe(_o,[["__scopeId","data-v-95e61e65"]]);class ge{static async getAllMcpServers(){const n=await fetch(`${this.BASE_URL}/list`);if(!n.ok)throw new Error(`Failed to get MCP server list: ${n.status}`);return await n.json()}static async addMcpServer(n){try{const s=await fetch(`${this.BASE_URL}/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok)throw new Error(`Failed to add MCP server: ${s.status}`);return{success:!0,message:"Successfully added MCP server"}}catch(s){return console.error("Failed to add MCP server:",s),{success:!1,message:s instanceof Error?s.message:"Failed to add, please retry"}}}static async removeMcpServer(n){try{const s=await fetch(`${this.BASE_URL}/remove?id=${n}`);if(!s.ok)throw new Error(`Failed to delete MCP server: ${s.status}`);return{success:!0,message:"Successfully deleted MCP server"}}catch(s){return console.error(`Failed to delete MCP server[${n}]:`,s),{success:!1,message:s instanceof Error?s.message:"Failed to delete, please retry"}}}}pe(ge,"BASE_URL","/api/mcp");const wo={class:"mcp-config-panel"},ko={class:"mcp-header"},Co={class:"header-left"},So={class:"mcp-stats"},To={class:"stat-item"},Ao={class:"stat-value"},Eo={class:"header-right"},xo={class:"search-box"},Vo={key:0,class:"loading-container"},Mo={key:1,class:"mcp-layout"},Uo={class:"mcp-table-container"},Po={key:0,class:"empty-state"},Bo={class:"empty-state-text"},Oo={key:1,class:"mcp-table-wrapper"},Go={class:"mcp-table"},Lo={class:"mcp-id"},Io={class:"mcp-server-name"},Ro={class:"server-name-content"},No={class:"mcp-connection-type"},Do={class:"mcp-config"},jo=["title"],Fo={class:"mcp-actions"},Ko=["onClick","disabled"],Jo={class:"add-mcp-container"},qo={class:"mcp-form"},zo={class:"mcp-form-group"},Ho={class:"connection-type-options"},Yo={class:"connection-type-option"},Xo={class:"connection-type-option"},Qo={class:"mcp-form-group"},Wo={class:"mcp-form-actions"},Zo=["disabled"],en=["disabled"],tn=ne({__name:"mcpConfig",setup(L){const n=B(!1),s=B([]),_=B(""),u=re({connectionType:"STUDIO",configJson:""}),l=re({show:!1,text:"",type:"success"});J(()=>u.connectionType==="STUDIO"?`ËØ∑ËæìÂÖ•MCPÊúçÂä°Âô®ÈÖçÁΩÆJSON„ÄÇ

        ‰æãÂ¶ÇÔºö
        {
        "mcpServers": {
            "github": {
            "command": "npx",
            "args": [
                "-y",
                "@modelcontextprotocol/server-github"
            ],
            "env": {
                "GITHUB_PERSONAL_ACCESS_TOKEN": "<YOUR_TOKEN>"
            }
            }
        }
        }`:`ËØ∑ËæìÂÖ•SSE MCPÊúçÂä°Âô®ÈÖçÁΩÆJSON„ÄÇ

‰æãÂ¶ÇÔºö
{
  "mcpServers": {
    "remote-server": {
      "url": "https://example.com/mcp",
      "headers": {
        "Authorization": "Bearer <YOUR_TOKEN>"
      }
    }
  }
}`);const S=J(()=>u.configJson.trim().length>0),A=J(()=>{if(!_.value.trim())return s.value;const E=_.value.toLowerCase();return s.value.filter(g=>g.mcpServerName.toLowerCase().includes(E)||g.connectionType.toLowerCase().includes(E)||g.connectionConfig.toLowerCase().includes(E))}),k=E=>E?E.length>50?E.substring(0,50)+"...":E:"",I=(E,g="success")=>{l.text=E,l.type=g,l.show=!0,setTimeout(()=>{l.show=!1},3e3)},x=async()=>{try{n.value=!0,s.value=await ge.getAllMcpServers()}catch(E){console.error("Âä†ËΩΩMCPÊúçÂä°Âô®ÂàóË°®Â§±Ë¥•:",E),I("Âä†ËΩΩMCPÊúçÂä°Âô®ÂàóË°®Â§±Ë¥•","error")}finally{n.value=!1}},D=async()=>{if(!S.value){I("ËØ∑ËæìÂÖ•MCPÊúçÂä°Âô®ÈÖçÁΩÆ","error");return}try{JSON.parse(u.configJson)}catch{I("ÈÖçÁΩÆJSONÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºåËØ∑Ê£ÄÊü•ËØ≠Ê≥ï","error");return}try{n.value=!0;const E={connectionType:u.connectionType,configJson:u.configJson},g=await ge.addMcpServer(E);g.success?(I("Ê∑ªÂä†MCPÊúçÂä°Âô®ÊàêÂäü"),P(),await x()):I(g.message||"Ê∑ªÂä†MCPÊúçÂä°Âô®Â§±Ë¥•","error")}catch(E){console.error("Ê∑ªÂä†MCPÊúçÂä°Âô®Â§±Ë¥•:",E),I("Ê∑ªÂä†MCPÊúçÂä°Âô®Â§±Ë¥•ÔºåËØ∑ÈáçËØï","error")}finally{n.value=!1}},ee=async E=>{if(confirm("Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™MCPÊúçÂä°Âô®ÈÖçÁΩÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§ç„ÄÇ"))try{n.value=!0;const g=await ge.removeMcpServer(E);g.success?(I("Âà†Èô§MCPÊúçÂä°Âô®ÊàêÂäü"),await x()):I(g.message||"Âà†Èô§MCPÊúçÂä°Âô®Â§±Ë¥•","error")}catch(g){console.error("Âà†Èô§MCPÊúçÂä°Âô®Â§±Ë¥•:",g),I("Âà†Èô§MCPÊúçÂä°Âô®Â§±Ë¥•ÔºåËØ∑ÈáçËØï","error")}finally{n.value=!1}},P=()=>{u.connectionType="STUDIO",u.configJson=""};return _e(()=>{x()}),(E,g)=>(i(),d("div",wo,[e("div",ko,[e("div",Co,[g[5]||(g[5]=e("h2",null,"MCPÈÖçÁΩÆ",-1)),e("div",So,[e("span",To,[g[4]||(g[4]=e("span",{class:"stat-label"},"ÊÄªÊúçÂä°Âô®:",-1)),e("span",Ao,r(s.value.length),1)])])]),e("div",Eo,[e("div",xo,[N(e("input",{"onUpdate:modelValue":g[0]||(g[0]=U=>_.value=U),type:"text",placeholder:"ÊêúÁ¥¢MCPÊúçÂä°Âô®...",class:"search-input"},null,512),[[H,_.value]]),g[6]||(g[6]=e("span",{class:"search-icon"},"üîç",-1))])])]),n.value?(i(),d("div",Vo,g[7]||(g[7]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Ê≠£Âú®Âä†ËΩΩMCPÊúçÂä°Âô®...",-1)]))):(i(),d("div",Mo,[e("div",Uo,[g[11]||(g[11]=e("h3",{class:"section-title"},"Â∑≤ÈÖçÁΩÆÁöÑMCPÊúçÂä°Âô®",-1)),A.value.length===0?(i(),d("div",Po,[g[8]||(g[8]=e("div",{class:"empty-state-icon"},"üìÇ",-1)),e("div",Bo,r(_.value?"Êú™ÊâæÂà∞ÂåπÈÖçÁöÑMCPÊúçÂä°Âô®":"ÊöÇÊó†MCPÊúçÂä°Âô®ÈÖçÁΩÆ"),1)])):(i(),d("div",Oo,[e("table",Go,[g[10]||(g[10]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"ÊúçÂä°Âô®ÂêçÁß∞"),e("th",null,"ËøûÊé•Á±ªÂûã"),e("th",null,"ËøûÊé•ÈÖçÁΩÆ"),e("th",null,"Êìç‰Ωú")])],-1)),e("tbody",null,[(i(!0),d(F,null,K(A.value,U=>(i(),d("tr",{key:U.id,class:"mcp-row"},[e("td",Lo,r(U.id),1),e("td",Io,[e("div",Ro,[g[9]||(g[9]=e("span",{class:"server-icon"},"üîå",-1)),V(" "+r(U.mcpServerName),1)])]),e("td",No,[e("span",{class:Y(["connection-type-badge",U.connectionType.toLowerCase()])},r(U.connectionType),3)]),e("td",Do,[e("div",{class:"config-preview",title:U.connectionConfig},r(k(U.connectionConfig)),9,jo)]),e("td",Fo,[e("button",{onClick:ae=>ee(U.id),class:"action-btn delete-btn",disabled:n.value}," Âà†Èô§ ",8,Ko)])]))),128))])])]))]),e("div",Jo,[g[16]||(g[16]=e("div",{class:"add-mcp-header"},[e("h3",{class:"add-mcp-title"},"Ê∑ªÂä†MCPÊúçÂä°Âô®")],-1)),e("div",qo,[e("div",zo,[g[14]||(g[14]=e("label",{class:"form-label"},"ËøûÊé•Á±ªÂûãÔºö",-1)),e("div",Ho,[e("div",Yo,[N(e("input",{type:"radio",id:"mcp-connection-type-studio","onUpdate:modelValue":g[1]||(g[1]=U=>u.connectionType=U),value:"STUDIO"},null,512),[[Se,u.connectionType]]),g[12]||(g[12]=e("label",{for:"mcp-connection-type-studio",class:"radio-label"},[e("span",{class:"radio-title"},"STUDIO"),e("span",{class:"connection-type-desc"},"Êú¨Âú∞mcp serverÔºåÁõÆÂâçÂ∏ÇÈù¢‰∏ä‰∏ªÊµÅÁöÑÊòØËøô‰∏™")],-1))]),e("div",Xo,[N(e("input",{type:"radio",id:"mcp-connection-type-sse","onUpdate:modelValue":g[2]||(g[2]=U=>u.connectionType=U),value:"SSE"},null,512),[[Se,u.connectionType]]),g[13]||(g[13]=e("label",{for:"mcp-connection-type-sse",class:"radio-label"},[e("span",{class:"radio-title"},"SSE"),e("span",{class:"connection-type-desc"},"ÈÄöËøáhttp serverÁ≠âÊèê‰æõÁöÑÔºåÁõÆÂâçÁΩëÁªú‰∏äÊØîËæÉÂ∞ëËßÅ")],-1))])])]),e("div",Qo,[g[15]||(g[15]=e("label",{class:"form-label"},"mcp jsonÈÖçÁΩÆÔºö",-1)),N(e("textarea",{"onUpdate:modelValue":g[3]||(g[3]=U=>u.configJson=U),placeholder:"ËØ∑ËæìÂÖ•MCPÊúçÂä°Âô®ÁöÑÈÖçÁΩÆ(JSONÊ†ºÂºè)...",class:"config-textarea",rows:"6"},null,512),[[H,u.configJson]])]),e("div",Wo,[e("button",{onClick:D,class:"action-btn add-btn",disabled:n.value}," Ê∑ªÂä† ",8,Zo),e("button",{onClick:P,class:"action-btn reset-btn",disabled:n.value}," ÈáçÁΩÆ ",8,en)])]),g[17]||(g[17]=Be('<div class="mcp-form-instructions" data-v-e67db080><h4 data-v-e67db080>‰ΩøÁî®ËØ¥ÊòéÔºö</h4><ol data-v-e67db080><li data-v-e67db080>ÊâæÂà∞‰Ω†Ë¶ÅÁî®ÁöÑmcp serverÁöÑÈÖçÁΩÆjsonÔºö <ul class="indented-list" data-v-e67db080><li data-v-e67db080><strong data-v-e67db080>Êú¨Âú∞(STDIO)</strong>ÔºöÂèØ‰ª•Âú®<a href="https://mcp.so" target="_blank" rel="noopener" data-v-e67db080>mcp.so</a>‰∏äÊâæÂà∞ÔºåÈúÄË¶Å‰Ω†ÊúâNode.jsÁéØÂ¢ÉÂπ∂ÁêÜËß£‰Ω†Ë¶ÅÈÖçÁΩÆÁöÑjsonÈáåÈù¢ÁöÑÊØè‰∏Ä‰∏™È°πÔºåÂÅöÂØπÂ∫îË∞ÉÊï¥ÊØîÂ¶ÇÈÖçÁΩÆak</li><li data-v-e67db080><strong data-v-e67db080>ËøúÁ®ãÊúçÂä°(SSE)</strong>Ôºö<a href="https://mcp.higress.ai/" target="_blank" rel="noopener" data-v-e67db080>mcp.higress.ai/</a>‰∏äÂèØ‰ª•ÊâæÂà∞ÔºåÊúâSSEÂíåSTREAMING‰∏§ÁßçÔºåÁõÆÂâçSSEÂçèËÆÆÊõ¥ÂÆåÂ§á‰∏Ä‰∫õ</li></ul></li><li data-v-e67db080>Â∞ÜjsonÈÖçÁΩÆÂ§çÂà∂Âà∞‰∏äÈù¢ÁöÑËæìÂÖ•Ê°ÜÔºåÊú¨Âú∞ÈÄâSTUDIOÔºåËøúÁ®ãÈÄâSTREAMINGÊàñSSEÔºåÊèê‰∫§</li><li data-v-e67db080>ËøôÊ†∑mcp toolsÂ∞±Ê≥®ÂÜåÊàêÂäü‰∫Ü„ÄÇ</li><li data-v-e67db080>ÁÑ∂ÂêéÈúÄË¶ÅÂú®AgentÈÖçÁΩÆÈáåÈù¢ÔºåÊñ∞Âª∫‰∏Ä‰∏™agentÔºåÁÑ∂ÂêéÂ¢ûÂä†ÊåáÂÆö‰Ω†ÂàöÊâçÊ∑ªÂä†ÁöÑmcp toolsÔºåËøôÊ†∑ÂèØ‰ª•ÊûÅÂ§ßÂáèÂ∞ëÂÜ≤Á™ÅÔºåÂ¢ûÂº∫toolsË¢´agentÈÄâÊã©ÁöÑÂáÜÁ°ÆÊÄß</li></ol></div>',1))])])),T($e,{name:"message-fade"},{default:se(()=>[l.show?(i(),d("div",{key:0,class:Y(["message-toast",l.type])},r(l.text),3)):M("",!0)]),_:1})]))}}),sn=oe(tn,[["__scopeId","data-v-e67db080"]]),on={class:"config-container"},nn={class:"config-header"},an={class:"header-actions"},ln={class:"config-content"},rn={class:"config-nav"},cn=["onClick"],dn={class:"config-details"},un=ne({__name:"index",setup(L){const{t:n}=be(),s=B("basic"),_=J(()=>[{key:"basic",label:n("config.categories.basic"),icon:"carbon:settings"},{key:"agent",label:n("config.categories.agent"),icon:"carbon:bot"},{key:"mcp",label:n("config.categories.mcp"),icon:"carbon:tool-box"}]);return(u,l)=>(i(),d("div",on,[e("div",nn,[e("div",an,[T(Oe),e("button",{class:"action-btn",onClick:l[0]||(l[0]=S=>u.$router.push("/"))},[T(G(O),{icon:"carbon:arrow-left"}),V(" "+r(u.$t("backHome")),1)])])]),e("div",ln,[e("nav",rn,[(i(!0),d(F,null,K(_.value,(S,A)=>(i(),d("div",{key:A,class:Y(["nav-item",{active:s.value===S.key}]),onClick:k=>s.value=S.key},[T(G(O),{icon:S.icon,width:"20"},null,8,["icon"]),e("span",null,r(S.label),1)],10,cn))),128))]),e("div",dn,[s.value==="basic"?(i(),ce(ds,{key:0})):M("",!0),s.value==="agent"?(i(),ce($o,{key:1})):M("",!0),s.value==="mcp"?(i(),ce(sn,{key:2})):M("",!0)])])]))}}),hn=oe(un,[["__scopeId","data-v-109cfe5c"]]);export{hn as default};
