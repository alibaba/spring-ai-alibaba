var Ue=Object.defineProperty;var Ee=(I,o,s)=>o in I?Ue(I,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):I[o]=s;var ge=(I,o,s)=>Ee(I,typeof o!="symbol"?o+"":o,s);import{_ as ce,I as V}from"./_plugin-vue_export-helper-r0CwHrKy.js";import{d as re,c as r,o as i,e,t,f as he,r as L,x as ae,g as oe,h as be,i as k,u as n,b as E,q as A,w as G,v as z,F as H,j as X,p as Z,C as xe,a as ie,z as te,T as Ce,D as Pe,E as Te,s as me,B as we,G as Le,k as Be,H as ke}from"./index-u_QFLZsj.js";import{L as De}from"./index-DtrZeonT.js";const Fe={class:"switch"},Re=["checked"],Ne={class:"switch-label"},Oe=re({__name:"index",props:{enabled:{type:Boolean},label:{}},emits:["update:switchValue"],setup(I,{emit:o}){const s=o,_=$=>{const p=$.target.checked;s("update:switchValue",p)};return($,p)=>(i(),r("label",Fe,[e("input",{type:"checkbox",checked:$.enabled,onChange:_},null,40,Re),p[0]||(p[0]=e("span",{class:"slider"},null,-1)),e("span",Ne,t($.label),1)]))}}),Ie=ce(Oe,[["__scopeId","data-v-d484b4a3"]]);class fe{static async getConfigsByGroup(o){try{const s=await fetch(`${this.BASE_URL}/group/${o}`);if(!s.ok)throw new Error(`Failed to get ${o} group configuration: ${s.status}`);return await s.json()}catch(s){throw console.error(`Failed to get ${o} group configuration:`,s),s}}static async batchUpdateConfigs(o){if(o.length===0)return{success:!0,message:"No configuration needs to be updated"};try{const s=await fetch(`${this.BASE_URL}/batch-update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Batch update configuration failed: ${s.status}`);return{success:!0,message:"Configuration saved successfully"}}catch(s){return console.error("Batch update configuration failed:",s),{success:!1,message:s instanceof Error?s.message:"Update failed, please try again"}}}static async getConfigById(o){try{const s=await fetch(`${this.BASE_URL}/${o}`);if(!s.ok)throw new Error(`Failed to get configuration item: ${s.status}`);return await s.json()}catch(s){throw console.error(`Failed to get configuration item[${o}]:`,s),s}}static async updateConfig(o){try{const s=await fetch(`${this.BASE_URL}/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Failed to update configuration item: ${s.status}`);return{success:!0,message:"Configuration updated successfully"}}catch(s){return console.error("Failed to update configuration item:",s),{success:!1,message:s instanceof Error?s.message:"Update failed, please try again"}}}}ge(fe,"BASE_URL","/api/config");const Ge={class:"config-panel"},qe={class:"config-header"},je={class:"header-left"},Ke={class:"config-stats"},Je={class:"stat-item"},ze={class:"stat-value"},He={key:0,class:"stat-item"},Xe={class:"stat-value modified"},Ye={class:"header-right"},Qe={class:"import-export-actions"},We={class:"action-btn",title:"å¯¼å…¥é…ç½®"},Ze={class:"search-box"},eo=["placeholder"],oo={key:0,class:"loading-container"},to={key:1,class:"config-groups"},so={class:"group-header"},no={class:"group-info"},ao={class:"group-icon"},lo={class:"group-actions"},io=["onClick","disabled","title"],co={class:"sub-groups"},ro=["onClick"],uo={class:"sub-group-info"},po={class:"sub-group-title"},go={class:"item-count"},fo={class:"config-items"},mo={key:0,class:"config-item-content vertical-layout"},vo={class:"config-item-info"},ho={class:"config-item-header"},yo={class:"config-label"},_o={class:"type-badge boolean"},bo={key:0,class:"modified-badge"},Co=["title"],$o={class:"config-control"},wo=["value","onChange"],ko=["value"],So={key:1,class:"config-item-content vertical-layout"},To={class:"config-item-info"},Ao={class:"config-item-header"},xo={class:"config-label"},Mo={class:"type-badge select"},Vo={key:0,class:"modified-badge"},Uo=["title"],Eo={class:"config-control"},Po=["value","onChange"],Lo=["value"],Bo={key:2,class:"config-item-content vertical-layout"},Do={class:"config-item-info"},Fo={class:"config-item-header"},Ro={class:"config-label"},No={class:"type-badge textarea"},Oo={key:0,class:"modified-badge"},Io=["title"],Go={class:"config-control"},qo=["value","onInput"],jo={key:3,class:"config-item-content vertical-layout"},Ko={class:"config-item-info"},Jo={class:"config-item-header"},zo={class:"config-label"},Ho={class:"type-badge number"},Xo={key:0,class:"modified-badge"},Yo=["title"],Qo={key:0,class:"config-meta"},Wo={class:"range-info"},Zo={class:"config-control"},et=["value","onInput","min","max"],ot={key:4,class:"config-item-content vertical-layout"},tt={class:"config-item-info"},st={class:"config-item-header"},nt={class:"config-label"},at={class:"type-badge string"},lt={key:0,class:"modified-badge"},it=["title"],ct={class:"config-control"},rt=["value","onInput"],dt={key:2,class:"empty-state"},ut=re({__name:"basicConfig",setup(I){const{t:o}=he(),s=L(!0),_=L(!1),$=L([]),p=L(new Map),g=L(new Set),m=ae({show:!1,text:"",type:"success"}),M=L(""),D={maxSteps:"æ™ºèƒ½ä½“æ‰§è¡Œæœ€å¤§æ­¥æ•°",resetAllAgents:"é‡ç½®æ‰€æœ‰agent",maxMemory:"èƒ½è®°ä½çš„æœ€å¤§æ¶ˆæ¯æ•°",parallelToolCalls:"å¹¶è¡Œå·¥å…·è°ƒç”¨",headlessBrowser:"æ˜¯å¦ä½¿ç”¨æ— å¤´æµè§ˆå™¨æ¨¡å¼",browserTimeout:o("config.basicConfig.browserTimeout"),browserDebug:"æµè§ˆå™¨debugæ¨¡å¼",autoOpenBrowser:"å¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨",consoleInteractive:"å¯ç”¨æŽ§åˆ¶å°äº¤äº’æ¨¡å¼",systemName:"ç³»ç»Ÿåç§°",language:"é»˜è®¤è¯­è¨€",maxThreads:"æœ€å¤§çº¿ç¨‹æ•°",timeoutSeconds:o("config.basicConfig.requestTimeout")},S={manus:"æ™ºèƒ½ä½“è®¾ç½®",browser:"æµè§ˆå™¨è®¾ç½®",interaction:"äº¤äº’è®¾ç½®",system:"ç³»ç»Ÿè®¾ç½®",performance:"æ€§èƒ½è®¾ç½®"},x={manus:"ðŸ¤–",browser:"ðŸŒ",interaction:"ðŸ–¥ï¸",system:"âš™ï¸",performance:"âš¡"},j={agent:"æ™ºèƒ½ä½“è®¾ç½®",browser:"æµè§ˆå™¨è®¾ç½®",interaction:"äº¤äº’è®¾ç½®",system:"ç³»ç»Ÿè®¾ç½®",performance:"æ€§èƒ½è®¾ç½®",general:"å¸¸è§„è®¾ç½®"},Q=oe(()=>$.value.some(c=>c.subGroups.some(v=>v.items.some(b=>p.value.get(b.id)!==b.configValue)))),se=c=>c==="true",F=c=>parseFloat(c)||0,y=c=>({maxSteps:1,browserTimeout:1,maxThreads:1,timeoutSeconds:5,maxMemory:1})[c]||1,N=c=>({maxSteps:100,browserTimeout:600,maxThreads:32,timeoutSeconds:300,maxMemory:1e3})[c]||1e4,ee=c=>typeof c=="string"?c:c.value,q=c=>typeof c=="string"?c:c.label,ue=(c,v)=>{if(typeof v=="boolean")return v.toString();if(typeof v=="string"){if(c.options&&c.options.length>0){const b=c.options.find(C=>(typeof C=="string"?C:C.label)===v||(typeof C=="string"?C:C.value)===v);if(b)return typeof b=="string"?b:b.value}return v}return String(v)},T=(c,v,b=!1)=>{let C;c.inputType==="BOOLEAN"||c.inputType==="CHECKBOX"?C=ue(c,v):C=String(v),c.configValue!==C&&(c.configValue=C,c._modified=!0,(b||c.inputType==="BOOLEAN"||c.inputType==="CHECKBOX"||c.inputType==="SELECT")&&l())};let a=null;const l=()=>{a&&clearTimeout(a),a=window.setTimeout(()=>{B()},500)},f=(c,v="success")=>{m.text=c,m.type=v,m.show=!0,setTimeout(()=>{m.show=!1},3e3)},R=async()=>{try{s.value=!0;const v=["manus","browser","interaction","system","performance"].map(async C=>{try{const d=await fe.getConfigsByGroup(C);if(d.length===0)return null;const U=d.map(K=>({...K,displayName:K.description??(D[K.configKey]||K.configKey),min:y(K.configKey),max:N(K.configKey)}));U.forEach(K=>{p.value.set(K.id,K.configValue)});const P=new Map;U.forEach(K=>{const ne=K.configSubGroup??"general";P.has(ne)||P.set(ne,[]),P.get(ne).push(K)});const Y=Array.from(P.entries()).map(([K,ne])=>({name:K,displayName:j[K]||K,items:ne}));return{name:C,displayName:S[C]||C,subGroups:Y}}catch(d){return console.warn(`åŠ è½½é…ç½®ç»„ ${C} å¤±è´¥ï¼Œè·³è¿‡:`,d),null}}),b=await Promise.all(v);$.value=b.filter(C=>C!==null),console.log("é…ç½®åŠ è½½å®Œæˆ:",$.value)}catch(c){console.error("åŠ è½½é…ç½®å¤±è´¥:",c),f(o("config.basicConfig.loadConfigFailed"),"error")}finally{s.value=!1}},B=async()=>{if(!(_.value||!Q.value))try{_.value=!0;const c=[];if($.value.forEach(b=>{b.subGroups.forEach(C=>{const d=C.items.filter(U=>U._modified);c.push(...d)})}),c.length===0){f("æ²¡æœ‰éœ€è¦ä¿å­˜çš„ä¿®æ”¹");return}const v=await fe.batchUpdateConfigs(c);v.success?(c.forEach(b=>{p.value.set(b.id,b.configValue),b._modified=!1}),f("é…ç½®ä¿å­˜æˆåŠŸ")):f(v.message||"ä¿å­˜å¤±è´¥","error")}catch(c){console.error("ä¿å­˜é…ç½®å¤±è´¥:",c),f(o("config.basicConfig.saveFailed"),"error")}finally{_.value=!1}},J=async c=>{if(confirm(`ç¡®å®šè¦é‡ç½® "${S[c]||c}" ç»„çš„æ‰€æœ‰é…ç½®å—ï¼Ÿ`))try{_.value=!0;const b=$.value.find(U=>U.name===c);if(!b)return;const C=[];if(b.subGroups.forEach(U=>{U.items.forEach(P=>{const Y=W(P.configKey);Y!==P.configValue&&C.push({...P,configValue:Y})})}),C.length===0){f("è¯¥ç»„é…ç½®å·²æ˜¯é»˜è®¤å€¼");return}const d=await fe.batchUpdateConfigs(C);d.success?(await R(),f(`æˆåŠŸé‡ç½® ${C.length} é¡¹é…ç½®`)):f(d.message||"é‡ç½®å¤±è´¥","error")}catch(b){console.error("é‡ç½®ç»„é…ç½®å¤±è´¥:",b),f(o("config.basicConfig.resetFailed"),"error")}finally{_.value=!1}},W=c=>({systemName:"JTaskPilot",language:"zh-CN",maxThreads:"8",timeoutSeconds:"60",autoOpenBrowser:"false",headlessBrowser:"true",maxMemory:"1000"})[c]||"",ye=(c,v)=>{const b=`${c}-${v}`;g.value.has(b)?g.value.delete(b):g.value.add(b)},pe=(c,v)=>g.value.has(`${c}-${v}`),w=oe(()=>{const c=$.value.reduce((b,C)=>b+C.subGroups.reduce((d,U)=>d+U.items.length,0),0),v=$.value.reduce((b,C)=>b+C.subGroups.reduce((d,U)=>d+U.items.filter(P=>p.value.get(P.id)!==P.configValue).length,0),0);return{total:c,modified:v}}),u=oe(()=>{if(!M.value.trim())return $.value;const c=M.value.toLowerCase();return $.value.map(v=>({...v,subGroups:v.subGroups.map(b=>({...b,items:b.items.filter(C=>C.displayName.toLowerCase().includes(c)||C.configKey.toLowerCase().includes(c)||C.description&&C.description.toLowerCase().includes(c))})).filter(b=>b.items.length>0)})).filter(v=>v.subGroups.length>0)}),O=()=>{try{const c={timestamp:new Date().toISOString(),version:"1.0",configs:$.value.reduce((d,U)=>(U.subGroups.forEach(P=>{P.items.forEach(Y=>{d[Y.configKey]=Y.configValue})}),d),{})},v=JSON.stringify(c,null,2),b=new Blob([v],{type:"application/json"}),C=document.createElement("a");C.href=URL.createObjectURL(b),C.download=`config-export-${new Date().toISOString().split("T")[0]}.json`,C.click(),f("é…ç½®å¯¼å‡ºæˆåŠŸ")}catch(c){console.error("å¯¼å‡ºé…ç½®å¤±è´¥:",c),f("å¯¼å‡ºå¤±è´¥","error")}},h=c=>{var d;const v=c.target,b=(d=v.files)==null?void 0:d[0];if(!b)return;const C=new FileReader;C.onload=async U=>{var P;try{const Y=JSON.parse((P=U.target)==null?void 0:P.result);if(!Y.configs)throw new Error("æ— æ•ˆçš„é…ç½®æ–‡ä»¶æ ¼å¼");if(!confirm("ç¡®å®šè¦å¯¼å…¥é…ç½®å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰é…ç½®ã€‚"))return;_.value=!0;const ne=[];if($.value.forEach(Me=>{Me.subGroups.forEach(Ve=>{Ve.items.forEach($e=>{Object.prototype.hasOwnProperty.call(Y.configs,$e.configKey)&&ne.push({...$e,configValue:Y.configs[$e.configKey]})})})}),ne.length===0){f("æ²¡æœ‰æ‰¾åˆ°å¯å¯¼å…¥çš„é…ç½®é¡¹");return}const Se=await fe.batchUpdateConfigs(ne);Se.success?(await R(),f(`æˆåŠŸå¯¼å…¥ ${ne.length} é¡¹é…ç½®`)):f(Se.message||"å¯¼å…¥å¤±è´¥","error")}catch(Y){console.error("å¯¼å…¥é…ç½®å¤±è´¥:",Y),f(o("config.basicConfig.importFailed"),"error")}finally{_.value=!1,v.value=""}},C.readAsText(b)};return be(()=>{R()}),(c,v)=>(i(),r("div",Ge,[e("div",qe,[e("div",je,[e("h2",null,t(n(o)("config.basicConfig.title")),1),e("div",Ke,[e("span",Je,[v[1]||(v[1]=e("span",{class:"stat-label"},"æ€»é…ç½®é¡¹:",-1)),e("span",ze,t(w.value.total),1)]),w.value.modified>0?(i(),r("span",He,[v[2]||(v[2]=e("span",{class:"stat-label"},"å·²ä¿®æ”¹:",-1)),e("span",Xe,t(w.value.modified),1)])):E("",!0)])]),e("div",Ye,[e("div",Qe,[e("button",{onClick:O,class:"action-btn",title:"å¯¼å‡ºé…ç½®"}," ðŸ“¤ "),e("label",We,[v[3]||(v[3]=A(" ðŸ“¥ ")),e("input",{type:"file",accept:".json",onChange:h,style:{display:"none"}},null,32)])]),e("div",Ze,[G(e("input",{"onUpdate:modelValue":v[0]||(v[0]=b=>M.value=b),type:"text",placeholder:c.$t("config.search"),class:"search-input"},null,8,eo),[[z,M.value]]),v[4]||(v[4]=e("span",{class:"search-icon"},"ðŸ”",-1))])])]),s.value?(i(),r("div",oo,[v[5]||(v[5]=e("div",{class:"loading-spinner"},null,-1)),e("p",null,t(c.$t("config.loading")),1)])):u.value.length>0?(i(),r("div",to,[(i(!0),r(H,null,X(u.value,b=>(i(),r("div",{key:b.name,class:"config-group"},[e("div",so,[e("div",no,[e("span",ao,t(x[b.name]||"âš™ï¸"),1)]),e("div",lo,[e("button",{onClick:C=>J(b.name),class:"reset-btn",disabled:_.value,title:c.$t("config.resetGroupConfirm")},t(c.$t("config.reset")),9,io)]),v[6]||(v[6]=e("div",{class:"group-divider"},null,-1))]),e("div",co,[(i(!0),r(H,null,X(b.subGroups,C=>(i(),r("div",{key:C.name,class:"sub-group"},[e("div",{class:"sub-group-header",onClick:d=>ye(b.name,C.name)},[e("div",uo,[v[7]||(v[7]=e("span",{class:"sub-group-icon"},"ðŸ“",-1)),e("h4",po,t(C.displayName),1),e("span",go,"("+t(C.items.length)+")",1)]),e("span",{class:Z(["collapse-icon",{collapsed:pe(b.name,C.name)}])}," â–¼ ",2)],8,ro),G(e("div",fo,[(i(!0),r(H,null,X(C.items,d=>(i(),r("div",{key:d.id,class:Z(["config-item",{modified:p.value.get(d.id)!==d.configValue}])},[d.inputType==="BOOLEAN"||d.inputType==="CHECKBOX"?(i(),r("div",mo,[e("div",vo,[e("div",ho,[e("label",yo,[A(t(d.description||d.displayName)+" ",1),e("span",_o,t(d.inputType==="CHECKBOX"?c.$t("config.types.checkbox"):c.$t("config.types.boolean")),1),p.value.get(d.id)!==d.configValue?(i(),r("span",bo,t(c.$t("config.modified")),1)):E("",!0)]),e("span",{class:"config-key",title:d.configKey},t(d.configKey),9,Co)])]),e("div",$o,[d.options&&d.options.length>0?(i(),r("select",{key:0,class:"config-input select-input",value:d.configValue,onChange:U=>{var P;return T(d,((P=U.target)==null?void 0:P.value)||"")}},[(i(!0),r(H,null,X(d.options,U=>(i(),r("option",{key:ee(U),value:ee(U)},t(q(U)),9,ko))),128))],40,wo)):(i(),ie(Ie,{key:1,enabled:se(d.configValue),label:"","onUpdate:switchValue":U=>T(d,U)},null,8,["enabled","onUpdate:switchValue"]))])])):d.inputType==="SELECT"?(i(),r("div",So,[e("div",To,[e("div",Ao,[e("label",xo,[A(t(d.description||d.displayName)+" ",1),e("span",Mo,t(c.$t("config.types.select")),1),p.value.get(d.id)!==d.configValue?(i(),r("span",Vo,t(c.$t("config.modified")),1)):E("",!0)]),e("span",{class:"config-key",title:d.configKey},t(d.configKey),9,Uo)])]),e("div",Eo,[e("select",{class:"config-input select-input",value:d.configValue,onChange:U=>{var P;return T(d,((P=U.target)==null?void 0:P.value)||"")}},[(i(!0),r(H,null,X(d.options||[],U=>(i(),r("option",{key:ee(U),value:ee(U)},t(q(U)),9,Lo))),128))],40,Po)])])):d.inputType==="TEXTAREA"?(i(),r("div",Bo,[e("div",Do,[e("div",Fo,[e("label",Ro,[A(t(d.description||d.displayName)+" ",1),e("span",No,t(c.$t("config.types.textarea")),1),p.value.get(d.id)!==d.configValue?(i(),r("span",Oo,t(c.$t("config.modified")),1)):E("",!0)]),e("span",{class:"config-key",title:d.configKey},t(d.configKey),9,Io)])]),e("div",Go,[e("textarea",{class:"config-input textarea-input",value:d.configValue,onInput:U=>{var P;return T(d,((P=U.target)==null?void 0:P.value)||"")},onBlur:l,rows:"3"},null,40,qo)])])):d.inputType==="NUMBER"?(i(),r("div",jo,[e("div",Ko,[e("div",Jo,[e("label",zo,[A(t(d.description||d.displayName)+" ",1),e("span",Ho,t(c.$t("config.types.number")),1),p.value.get(d.id)!==d.configValue?(i(),r("span",Xo,t(c.$t("config.modified")),1)):E("",!0)]),e("span",{class:"config-key",title:d.configKey},t(d.configKey),9,Yo),d.min||d.max?(i(),r("div",Qo,[e("span",Wo,t(c.$t("config.range"))+": "+t(d.min||0)+" - "+t(d.max||"âˆž"),1)])):E("",!0)])]),e("div",Zo,[e("input",{type:"number",class:"config-input number-input",value:F(d.configValue),onInput:U=>{var P;return T(d,((P=U.target)==null?void 0:P.value)||"")},onBlur:l,min:d.min||1,max:d.max||1e4},null,40,et)])])):(i(),r("div",ot,[e("div",tt,[e("div",st,[e("label",nt,[A(t(d.description||d.displayName)+" ",1),e("span",at,t(d.inputType==="TEXT"?c.$t("config.types.text"):c.$t("config.types.string")),1),p.value.get(d.id)!==d.configValue?(i(),r("span",lt,t(c.$t("config.modified")),1)):E("",!0)]),e("span",{class:"config-key",title:d.configKey},t(d.configKey),9,it)])]),e("div",ct,[e("input",{type:"text",class:"config-input text-input",value:d.configValue,onInput:U=>{var P;return T(d,((P=U.target)==null?void 0:P.value)||"")},onBlur:l},null,40,rt)])]))],2))),128))],512),[[xe,!pe(b.name,C.name)]])]))),128))])]))),128))])):(i(),r("div",dt,[e("p",null,t(c.$t("config.notFound")),1)])),k(Ce,{name:"message-fade"},{default:te(()=>[m.show?(i(),r("div",{key:0,class:Z(["message-toast",m.type])},t(m.text),3)):E("",!0)]),_:1})]))}}),pt=ce(ut,[["__scopeId","data-v-22ad5fb2"]]),gt={class:"modal-header"},ft={class:"modal-content"},mt={class:"modal-footer"},vt=re({__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(I){const o=s=>{s.target===s.currentTarget&&(s.stopPropagation(),s.preventDefault())};return(s,_)=>(i(),ie(Pe,{to:"body"},[k(Ce,{name:"modal"},{default:te(()=>[I.modelValue?(i(),r("div",{key:0,class:"modal-overlay",onClick:o},[e("div",{class:"modal-container",onClick:_[3]||(_[3]=me(()=>{},["stop"]))},[e("div",gt,[e("h3",null,t(I.title),1),e("button",{class:"close-btn",onClick:_[0]||(_[0]=$=>s.$emit("update:modelValue",!1))},[k(n(V),{icon:"carbon:close"})])]),e("div",ft,[Te(s.$slots,"default",{},void 0,!0)]),e("div",mt,[Te(s.$slots,"footer",{},()=>[e("button",{class:"cancel-btn",onClick:_[1]||(_[1]=$=>s.$emit("update:modelValue",!1))},t(s.$t("common.cancel")),1),e("button",{class:"confirm-btn",onClick:_[2]||(_[2]=$=>s.$emit("confirm"))},t(s.$t("common.confirm")),1)],!0)])])])):E("",!0)]),_:3})]))}}),ve=ce(vt,[["__scopeId","data-v-baaf1c89"]]),ht={class:"tool-selection-content"},yt={class:"tool-controls"},_t={class:"search-container"},bt={class:"sort-container"},Ct={class:"tool-summary"},$t={class:"summary-text"},wt={key:0,class:"tool-groups"},kt=["onClick"],St={class:"group-title-area"},Tt={class:"group-name"},At={class:"group-count"},xt={class:"group-enable-all"},Mt=["checked","onChange","data-group"],Vt={class:"tool-info"},Ut={class:"tool-selection-name"},Et={key:0,class:"tool-selection-desc"},Pt={class:"tool-actions"},Lt=["checked","onChange"],Bt={key:1,class:"empty-state"},Dt=re({__name:"index",props:{modelValue:{type:Boolean},tools:{},selectedToolIds:{}},emits:["update:modelValue","confirm"],setup(I,{emit:o}){const s=I,_=o,$=oe({get:()=>s.modelValue,set:a=>_("update:modelValue",a)}),p=L(""),g=L("group"),m=L(new Set),M=L([]),D=(a,l)=>{const f=document.querySelector(`input[data-group="${a}"]`);f&&(f.indeterminate=N(l))};we(()=>s.selectedToolIds,a=>{M.value=[...a]},{immediate:!0});const S=oe(()=>{let a=s.tools.filter(l=>l.key);if(p.value){const l=p.value.toLowerCase();a=a.filter(f=>{var R;return f.name.toLowerCase().includes(l)||f.description.toLowerCase().includes(l)||(((R=f.serviceGroup)==null?void 0:R.toLowerCase().includes(l))??!1)})}switch(g.value){case"name":a=[...a].sort((l,f)=>l.name.localeCompare(f.name));break;case"enabled":a=[...a].sort((l,f)=>{const R=M.value.includes(l.key),B=M.value.includes(f.key);return R&&!B?-1:!R&&B?1:l.name.localeCompare(f.name)});break;case"group":default:a=[...a].sort((l,f)=>{const R=l.serviceGroup??"æœªåˆ†ç»„",B=f.serviceGroup??"æœªåˆ†ç»„";return R!==B?R.localeCompare(B):l.name.localeCompare(f.name)});break}return a}),x=oe(()=>{const a=new Map;return S.value.forEach(l=>{const f=l.serviceGroup??"æœªåˆ†ç»„";a.has(f)||a.set(f,[]),a.get(f).push(l)}),new Map([...a.entries()].sort())}),j=oe(()=>S.value.length);we([M,x],()=>{Be(()=>{for(const[a,l]of x.value)D(a,l)})},{flush:"post",deep:!1});const Q=a=>M.value.includes(a),se=(a,l)=>{l.stopPropagation();const R=l.target.checked;if(!a){console.error("toolKey is undefined, cannot proceed");return}R?M.value.includes(a)||(M.value=[...M.value,a]):M.value=M.value.filter(B=>B!==a)},F=a=>a.filter(l=>M.value.includes(l.key)),y=a=>a.length>0&&a.every(l=>M.value.includes(l.key)),N=a=>{const l=F(a).length;return l>0&&l<a.length},ee=(a,l)=>{l.stopPropagation();const R=l.target.checked,B=a.map(J=>J.key);if(R){const J=[...M.value];B.forEach(W=>{J.includes(W)||J.push(W)}),M.value=J}else M.value=M.value.filter(J=>!B.includes(J))},q=a=>{m.value.has(a)?m.value.delete(a):m.value.add(a)},ue=()=>{_("confirm",[...M.value]),_("update:modelValue",!1)},T=()=>{M.value=[...s.selectedToolIds],_("update:modelValue",!1)};return we($,a=>{if(a){m.value.clear();const l=Array.from(x.value.keys());l.length>1&&l.slice(1).forEach(f=>{m.value.add(f)})}}),(a,l)=>(i(),ie(ve,{modelValue:$.value,"onUpdate:modelValue":[l[4]||(l[4]=f=>$.value=f),T],title:"é€‰æ‹©å·¥å…·",onConfirm:ue},{default:te(()=>[e("div",ht,[e("div",yt,[e("div",_t,[G(e("input",{"onUpdate:modelValue":l[0]||(l[0]=f=>p.value=f),type:"text",class:"search-input",placeholder:"æœç´¢å·¥å…·..."},null,512),[[z,p.value]])]),e("div",bt,[G(e("select",{"onUpdate:modelValue":l[1]||(l[1]=f=>g.value=f),class:"sort-select"},l[5]||(l[5]=[e("option",{value:"group"},"æŒ‰æœåŠ¡ç»„æŽ’åº",-1),e("option",{value:"name"},"æŒ‰åç§°æŽ’åº",-1),e("option",{value:"enabled"},"æŒ‰å¯ç”¨çŠ¶æ€æŽ’åº",-1)]),512),[[Le,g.value]])])]),e("div",Ct,[e("span",$t," å…± "+t(x.value.size)+" ä¸ªæœåŠ¡ç»„ï¼Œ"+t(j.value)+" ä¸ªå·¥å…· (å·²é€‰æ‹© "+t(M.value.length)+" ä¸ª) ",1)]),x.value.size>0?(i(),r("div",wt,[(i(!0),r(H,null,X(x.value,([f,R])=>(i(),r("div",{key:f,class:"tool-group"},[e("div",{class:Z(["tool-group-header",{collapsed:m.value.has(f)}]),onClick:B=>q(f)},[e("div",St,[k(n(V),{icon:m.value.has(f)?"carbon:chevron-right":"carbon:chevron-down",class:"collapse-icon"},null,8,["icon"]),k(n(V),{icon:"carbon:folder",class:"group-icon"}),e("span",Tt,t(f),1),e("span",At," ("+t(F(R).length)+"/"+t(R.length)+") ",1)]),e("div",{class:"group-actions",onClick:l[2]||(l[2]=me(()=>{},["stop"]))},[e("label",xt,[e("input",{type:"checkbox",class:"group-enable-checkbox",checked:y(R),onChange:B=>ee(R,B),"data-group":f},null,40,Mt),l[6]||(l[6]=e("span",{class:"enable-label"},"å¯ç”¨å…¨éƒ¨",-1))])])],10,kt),e("div",{class:Z(["tool-group-content",{collapsed:m.value.has(f)}])},[(i(!0),r(H,null,X(R.filter(B=>B&&B.key),B=>(i(),r("div",{key:B.key,class:"tool-selection-item"},[e("div",Vt,[e("div",Ut,t(B.name),1),B.description?(i(),r("div",Et,t(B.description),1)):E("",!0)]),e("div",Pt,[e("label",{class:"tool-enable-switch",onClick:l[3]||(l[3]=me(()=>{},["stop"]))},[e("input",{type:"checkbox",class:"tool-enable-checkbox",checked:Q(B.key),onChange:J=>se(B.key,J)},null,40,Lt),l[7]||(l[7]=e("span",{class:"tool-enable-slider"},null,-1))])])]))),128))],2)]))),128))])):(i(),r("div",Bt,[k(n(V),{icon:"carbon:tools",class:"empty-icon"}),l[8]||(l[8]=e("p",null,"æ²¡æœ‰æ‰¾åˆ°å·¥å…·",-1))]))])]),_:1},8,["modelValue"]))}}),Ft=ce(Dt,[["__scopeId","data-v-c30d6872"]]);class de{static async handleResponse(o){if(!o.ok)try{const s=await o.json();throw new Error(s.message||`API request failed: ${o.status}`)}catch{throw new Error(`API request failed: ${o.status} ${o.statusText}`)}return o}static async getAllAgents(){try{const o=await fetch(this.BASE_URL);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get Agent list:",o),o}}static async getAgentById(o){try{const s=await fetch(`${this.BASE_URL}/${o}`);return await(await this.handleResponse(s)).json()}catch(s){throw console.error(`Failed to get Agent[${o}] details:`,s),s}}static async createAgent(o){try{const s=await fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return await(await this.handleResponse(s)).json()}catch(s){throw console.error("Failed to create Agent:",s),s}}static async updateAgent(o,s){try{const _=await fetch(`${this.BASE_URL}/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return await(await this.handleResponse(_)).json()}catch(_){throw console.error(`Failed to update Agent[${o}]:`,_),_}}static async deleteAgent(o){try{const s=await fetch(`${this.BASE_URL}/${o}`,{method:"DELETE"});if(s.status===400)throw new Error("Cannot delete default Agent");await this.handleResponse(s)}catch(s){throw console.error(`Failed to delete Agent[${o}]:`,s),s}}static async getAvailableTools(){try{const o=await fetch(`${this.BASE_URL}/tools`);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get available tools list:",o),o}}}ge(de,"BASE_URL","/api/agents");class le{static async handleResponse(o){if(!o.ok)try{const s=await o.json();throw new Error(s.message||`API request failed: ${o.status}`)}catch{throw new Error(`API request failed: ${o.status} ${o.statusText}`)}return o}static async getAllModels(){try{const o=await fetch(this.BASE_URL);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get Model list:",o),o}}static async getAllTypes(){try{const o=await fetch(`${this.BASE_URL}/types`);return await(await this.handleResponse(o)).json()}catch(o){throw console.error("Failed to get Model list:",o),o}}static async getModelById(o){try{const s=await fetch(`${this.BASE_URL}/${o}`);return await(await this.handleResponse(s)).json()}catch(s){throw console.error(`Failed to get Model[${o}] details:`,s),s}}static async createModel(o){try{const s=await fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return await(await this.handleResponse(s)).json()}catch(s){throw console.error("Failed to create Model:",s),s}}static async updateModel(o,s){try{const _=await fetch(`${this.BASE_URL}/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return await(await this.handleResponse(_)).json()}catch(_){throw console.error(`Failed to update Model[${o}]:`,_),_}}static async deleteModel(o){try{const s=await fetch(`${this.BASE_URL}/${o}`,{method:"DELETE"});if(s.status===400)throw new Error("Cannot delete default Model");await this.handleResponse(s)}catch(s){throw console.error(`Failed to delete Model[${o}]:`,s),s}}}ge(le,"BASE_URL","/api/models");const Rt={class:"config-panel"},Nt={class:"panel-header"},Ot={class:"panel-actions"},It=["disabled"],Gt={class:"agent-layout"},qt={class:"agent-list"},jt={class:"list-header"},Kt={class:"agent-count"},Jt={key:0,class:"agents-container"},zt=["onClick"],Ht={class:"agent-card-header"},Xt={class:"agent-name"},Yt={class:"agent-desc"},Qt={key:0,class:"agent-model"},Wt={class:"model-tag"},Zt={class:"model-tag"},es={key:1,class:"agent-tools"},os={key:0,class:"tool-more"},ts={key:1,class:"loading-state"},ss={key:2,class:"empty-state"},ns={key:0,class:"agent-detail"},as={class:"detail-header"},ls={class:"detail-actions"},is={class:"form-item"},cs=["placeholder"],rs={class:"form-item"},ds=["placeholder"],us={class:"form-item"},ps=["value","placeholder"],gs={class:"model-section"},fs={class:"form-item"},ms={class:"model-chooser"},vs=["title"],hs={key:0,class:"current-model"},ys={class:"model-type"},_s={class:"model-name"},bs={key:1,class:"current-model"},Cs={class:"current-model"},$s={class:"dropdown-header"},ws={class:"model-options"},ks=["onClick"],Ss={class:"model-type"},Ts={class:"model-name"},As={class:"tools-section"},xs={class:"assigned-tools"},Ms={class:"section-header"},Vs={class:"tools-grid"},Us={class:"tool-info"},Es={class:"tool-name"},Ps={class:"tool-desc"},Ls={key:0,class:"no-tools"},Bs={key:1,class:"no-selection"},Ds={class:"modal-form"},Fs={class:"form-item"},Rs=["placeholder"],Ns={class:"form-item"},Os=["placeholder"],Is={class:"form-item"},Gs=["value","placeholder"],qs={class:"delete-confirm"},js={class:"warning-text"},Ks=re({__name:"agentConfig",setup(I){const{t:o}=he(),s=L(!1),_=L(""),$=L(""),p=ae([]),g=L(null),m=ae([]),M=L(!1),D=L(!1),S=L(!1),x=L(!1),j=L(null),Q=ae([]),se=()=>{x.value=!x.value},F=w=>{j.value=w,x.value=!1},y=ae({name:"",description:"",nextStepPrompt:""}),N=w=>{const u=m.find(O=>O.key===w);return u?u.name:w},ee=w=>{const u=m.find(O=>O.key===w);return u?u.description:""},q=(w,u)=>{u==="success"?($.value=w,setTimeout(()=>{$.value=""},3e3)):(_.value=w,setTimeout(()=>{_.value=""},5e3))},ue=async()=>{s.value=!0;try{const[w,u,O]=await Promise.all([de.getAllAgents(),de.getAvailableTools(),le.getAllModels()]),h=w.map(c=>({...c,availableTools:c.availableTools,...O}));p.splice(0,p.length,...h),m.splice(0,m.length,...u),Q.splice(0,Q.length,...O),h.length>0&&await T(h[0])}catch(w){console.error("åŠ è½½æ•°æ®å¤±è´¥:",w),q(o("config.agentConfig.loadDataFailed")+": "+w.message,"error");const u=[{key:"search-web",name:"ç½‘ç»œæœç´¢",description:"åœ¨äº’è”ç½‘ä¸Šæœç´¢ä¿¡æ¯",enabled:!0,serviceGroup:"æœç´¢æœåŠ¡"},{key:"search-local",name:"æœ¬åœ°æœç´¢",description:"åœ¨æœ¬åœ°æ–‡ä»¶ä¸­æœç´¢å†…å®¹",enabled:!0,serviceGroup:"æœç´¢æœåŠ¡"},{key:"file-read",name:"è¯»å–æ–‡ä»¶",description:"è¯»å–æœ¬åœ°æˆ–è¿œç¨‹æ–‡ä»¶å†…å®¹",enabled:!0,serviceGroup:"æ–‡ä»¶æœåŠ¡"},{key:"file-write",name:"å†™å…¥æ–‡ä»¶",description:"åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶å†…å®¹",enabled:!0,serviceGroup:"æ–‡ä»¶æœåŠ¡"},{key:"file-delete",name:"åˆ é™¤æ–‡ä»¶",description:"åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶",enabled:!1,serviceGroup:"æ–‡ä»¶æœåŠ¡"},{key:"calculator",name:"è®¡ç®—å™¨",description:"æ‰§è¡Œæ•°å­¦è®¡ç®—",enabled:!0,serviceGroup:"è®¡ç®—æœåŠ¡"},{key:"code-execute",name:"ä»£ç æ‰§è¡Œ",description:"æ‰§è¡ŒPythonæˆ–JavaScriptä»£ç ",enabled:!0,serviceGroup:"è®¡ç®—æœåŠ¡"},{key:"weather",name:"å¤©æ°”æŸ¥è¯¢",description:"èŽ·å–æŒ‡å®šåœ°åŒºçš„å¤©æ°”ä¿¡æ¯",enabled:!0,serviceGroup:"ä¿¡æ¯æœåŠ¡"},{key:"currency",name:"æ±‡çŽ‡æŸ¥è¯¢",description:"æŸ¥è¯¢è´§å¸æ±‡çŽ‡ä¿¡æ¯",enabled:!0,serviceGroup:"ä¿¡æ¯æœåŠ¡"},{key:"email",name:"å‘é€é‚®ä»¶",description:"å‘é€ç”µå­é‚®ä»¶",enabled:!1,serviceGroup:"é€šä¿¡æœåŠ¡"},{key:"sms",name:"å‘é€çŸ­ä¿¡",description:"å‘é€çŸ­ä¿¡æ¶ˆæ¯",enabled:!1,serviceGroup:"é€šä¿¡æœåŠ¡"}],O=[{id:"demo-1",name:"é€šç”¨åŠ©æ‰‹",description:"ä¸€ä¸ªèƒ½å¤Ÿå¤„ç†å„ç§ä»»åŠ¡çš„æ™ºèƒ½åŠ©æ‰‹",nextStepPrompt:"You are a helpful assistant that can answer questions and help with various tasks. What would you like me to help you with next?",availableTools:["search-web","calculator","weather"]},{id:"demo-2",name:"æ•°æ®åˆ†æžå¸ˆ",description:"ä¸“é—¨ç”¨äºŽæ•°æ®åˆ†æžå’Œå¯è§†åŒ–çš„Agent",nextStepPrompt:"You are a data analyst assistant specialized in analyzing data and creating visualizations. Please provide the data you would like me to analyze.",availableTools:["file-read","file-write","calculator","code-execute"]}];m.splice(0,m.length,...u),p.splice(0,p.length,...O),O.length>0&&(g.value=O[0])}finally{s.value=!1}},T=async w=>{try{const u=await de.getAgentById(w.id);g.value={...u,availableTools:u.availableTools},j.value=u.model??null}catch(u){console.error("åŠ è½½Agentè¯¦æƒ…å¤±è´¥:",u),q(o("config.agentConfig.loadDetailsFailed")+": "+u.message,"error"),g.value={...w,availableTools:w.availableTools}}},a=()=>{y.name="",y.description="",y.nextStepPrompt="",M.value=!0},l=async()=>{var w;if(!y.name.trim()||!y.description.trim()){q(o("config.agentConfig.requiredFields"),"error");return}try{const u={name:y.name.trim(),description:y.description.trim(),nextStepPrompt:((w=y.nextStepPrompt)==null?void 0:w.trim())??"",availableTools:[]},O=await de.createAgent(u);p.push(O),g.value=O,M.value=!1,q(o("config.agentConfig.createSuccess"),"success")}catch(u){q(o("config.agentConfig.createFailed")+": "+u.message,"error")}},f=()=>{S.value=!0},R=w=>{g.value&&(g.value.availableTools=[...w])},B=async()=>{if(g.value){if(!g.value.name.trim()||!g.value.description.trim()){q(o("config.agentConfig.requiredFields"),"error");return}try{g.value.model=j.value;const w=await de.updateAgent(g.value.id,g.value),u=p.findIndex(O=>O.id===w.id);u!==-1&&(p[u]=w),g.value=w,g.value.model=j.value,q(o("config.agentConfig.saveSuccess"),"success")}catch(w){q(o("config.agentConfig.saveFailed")+": "+w.message,"error")}}},J=()=>{D.value=!0},W=async()=>{if(g.value)try{await de.deleteAgent(g.value.id);const w=p.findIndex(u=>u.id===g.value.id);w!==-1&&p.splice(w,1),g.value=p.length>0?p[0]:null,D.value=!1,q(o("config.agentConfig.deleteSuccess"),"success")}catch(w){q(o("config.agentConfig.deleteFailed")+": "+w.message,"error")}},ye=()=>{const w=document.createElement("input");w.type="file",w.accept=".json",w.onchange=u=>{var h;const O=(h=u.target.files)==null?void 0:h[0];if(O){const c=new FileReader;c.onload=async v=>{var b;try{const C=JSON.parse((b=v.target)==null?void 0:b.result);if(!C.name||!C.description)throw new Error(o("config.agentConfig.invalidFormat"));const{id:d,...U}=C,P=await de.createAgent(U);p.push(P),g.value=P,q(o("config.agentConfig.importSuccess"),"success")}catch(C){q(o("config.agentConfig.importFailed")+": "+C.message,"error")}},c.readAsText(O)}},w.click()},pe=()=>{if(g.value)try{const w=JSON.stringify(g.value,null,2),u=new Blob([w],{type:"application/json"}),O=URL.createObjectURL(u),h=document.createElement("a");h.href=O,h.download=`agent-${g.value.name}-${new Date().toISOString().split("T")[0]}.json`,h.click(),URL.revokeObjectURL(O),q(o("config.agentConfig.exportSuccess"),"success")}catch(w){q(o("config.agentConfig.exportFailed")+": "+w.message,"error")}};return be(()=>{ue()}),(w,u)=>{var O;return i(),r("div",Rt,[e("div",Nt,[e("h2",null,t(n(o)("config.agentConfig.title")),1),e("div",Ot,[e("button",{class:"action-btn",onClick:ye},[k(n(V),{icon:"carbon:upload"}),A(" "+t(n(o)("config.agentConfig.import")),1)]),e("button",{class:"action-btn",onClick:pe,disabled:!g.value},[k(n(V),{icon:"carbon:download"}),A(" "+t(n(o)("config.agentConfig.export")),1)],8,It)])]),e("div",Gt,[e("div",qt,[e("div",jt,[e("h3",null,t(n(o)("config.agentConfig.configuredAgents")),1),e("span",Kt,"("+t(p.length)+t(n(o)("config.agentConfig.agentCount"))+")",1)]),s.value?E("",!0):(i(),r("div",Jt,[(i(!0),r(H,null,X(p,h=>{var c,v;return i(),r("div",{key:h.id,class:Z(["agent-card",{active:((c=g.value)==null?void 0:c.id)===h.id}]),onClick:b=>T(h)},[e("div",Ht,[e("span",Xt,t(h.name),1),k(n(V),{icon:"carbon:chevron-right"})]),e("p",Yt,t(h.description),1),h.model?(i(),r("div",Qt,[e("span",Wt,t(h.model.type),1),e("span",Zt,t(h.model.modelName),1)])):E("",!0),((v=h.availableTools)==null?void 0:v.length)>0?(i(),r("div",es,[(i(!0),r(H,null,X(h.availableTools.slice(0,3),b=>(i(),r("span",{key:b,class:"tool-tag"},t(N(b)),1))),128)),h.availableTools.length>3?(i(),r("span",os," +"+t(h.availableTools.length-3),1)):E("",!0)])):E("",!0)],10,zt)}),128))])),s.value?(i(),r("div",ts,[k(n(V),{icon:"carbon:loading",class:"loading-icon"}),A(" "+t(n(o)("common.loading")),1)])):E("",!0),!s.value&&p.length===0?(i(),r("div",ss,[k(n(V),{icon:"carbon:bot",class:"empty-icon"}),e("p",null,t(n(o)("config.agentConfig.noAgent")),1)])):E("",!0),e("button",{class:"add-btn",onClick:a},[k(n(V),{icon:"carbon:add"}),A(" "+t(n(o)("config.agentConfig.createNew")),1)])]),g.value?(i(),r("div",ns,[e("div",as,[e("h3",null,t(g.value.name),1),e("div",ls,[e("button",{class:"action-btn primary",onClick:B},[k(n(V),{icon:"carbon:save"}),A(" "+t(n(o)("common.save")),1)]),e("button",{class:"action-btn danger",onClick:J},[k(n(V),{icon:"carbon:trash-can"}),A(" "+t(n(o)("common.delete")),1)])])]),e("div",is,[e("label",null,[A(t(n(o)("config.agentConfig.agentName"))+" ",1),u[15]||(u[15]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=h=>g.value.name=h),placeholder:n(o)("config.agentConfig.agentNamePlaceholder"),required:""},null,8,cs),[[z,g.value.name]])]),e("div",rs,[e("label",null,[A(t(n(o)("config.agentConfig.description"))+" ",1),u[16]||(u[16]=e("span",{class:"required"},"*",-1))]),G(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=h=>g.value.description=h),rows:"3",placeholder:n(o)("config.agentConfig.descriptionPlaceholder"),required:""},null,8,ds),[[z,g.value.description]])]),e("div",us,[e("label",null,t(n(o)("config.agentConfig.nextStepPrompt")),1),e("textarea",{value:g.value.nextStepPrompt||"",onInput:u[2]||(u[2]=h=>g.value.nextStepPrompt=h.target.value),rows:"8",placeholder:n(o)("config.agentConfig.nextStepPromptPlaceholder")},null,40,ps)]),e("div",gs,[e("h4",null,t(n(o)("config.agentConfig.modelConfiguration")),1),e("div",fs,[e("div",ms,[e("button",{class:"model-btn",onClick:se,title:w.$t("model.switch")},[k(n(V),{icon:"carbon:build-run",width:"18"}),j.value?(i(),r("span",hs,[e("span",ys,t(j.value.type),1),u[17]||(u[17]=e("span",{class:"spacer"},null,-1)),e("span",_s,t(j.value.modelName),1)])):(i(),r("span",bs,[e("span",Cs,t(n(o)("config.agentConfig.modelConfigurationLabel")),1)])),k(n(V),{icon:x.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,vs),x.value?(i(),r("div",{key:0,class:"model-dropdown",onClick:u[4]||(u[4]=me(()=>{},["stop"]))},[e("div",$s,[e("span",null,t(n(o)("config.agentConfig.modelConfigurationLabel")),1),e("button",{class:"close-btn",onClick:u[3]||(u[3]=h=>x.value=!1)},[k(n(V),{icon:"carbon:close",width:"16"})])]),e("div",ws,[(i(!0),r(H,null,X(Q,h=>{var c,v;return i(),r("button",{key:h.id,class:Z(["model-option",{active:((c=j.value)==null?void 0:c.id)===h.id}]),onClick:b=>F(h)},[e("span",Ss,t(h.type),1),e("span",Ts,t(h.modelName),1),((v=j.value)==null?void 0:v.id)===h.id?(i(),ie(n(V),{key:0,icon:"carbon:checkmark",width:"16",class:"check-icon"})):E("",!0)],10,ks)}),128))])])):E("",!0),x.value?(i(),r("div",{key:1,class:"backdrop",onClick:u[5]||(u[5]=h=>x.value=!1)})):E("",!0)])])]),e("div",As,[e("h4",null,t(n(o)("config.agentConfig.toolConfiguration")),1),e("div",xs,[e("div",Ms,[e("span",null,t(n(o)("config.agentConfig.assignedTools"))+" ("+t((g.value.availableTools||[]).length)+")",1),m.length>0?(i(),r("button",{key:0,class:"action-btn small",onClick:f},[k(n(V),{icon:"carbon:add"}),A(" "+t(n(o)("config.agentConfig.addRemoveTools")),1)])):E("",!0)]),e("div",Vs,[(i(!0),r(H,null,X(g.value.availableTools||[],h=>(i(),r("div",{key:h,class:"tool-item assigned"},[e("div",Us,[e("span",Es,t(N(h)),1),e("span",Ps,t(ee(h)),1)])]))),128)),g.value.availableTools.length===0?(i(),r("div",Ls,[k(n(V),{icon:"carbon:tool-box"}),e("span",null,t(n(o)("config.agentConfig.noAssignedTools")),1)])):E("",!0)])])])])):(i(),r("div",Bs,[k(n(V),{icon:"carbon:bot",class:"placeholder-icon"}),e("p",null,t(n(o)("config.agentConfig.selectAgentHint")),1)]))]),k(ve,{modelValue:M.value,"onUpdate:modelValue":u[9]||(u[9]=h=>M.value=h),title:n(o)("config.agentConfig.newAgent"),onConfirm:l},{default:te(()=>[e("div",Ds,[e("div",Fs,[e("label",null,[A(t(n(o)("config.agentConfig.agentName"))+" ",1),u[18]||(u[18]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":u[6]||(u[6]=h=>y.name=h),placeholder:n(o)("config.agentConfig.agentNamePlaceholder"),required:""},null,8,Rs),[[z,y.name]])]),e("div",Ns,[e("label",null,[A(t(n(o)("config.agentConfig.description"))+" ",1),u[19]||(u[19]=e("span",{class:"required"},"*",-1))]),G(e("textarea",{"onUpdate:modelValue":u[7]||(u[7]=h=>y.description=h),rows:"3",placeholder:n(o)("config.agentConfig.descriptionPlaceholder"),required:""},null,8,Os),[[z,y.description]])]),e("div",Is,[e("label",null,t(n(o)("config.agentConfig.nextStepPrompt")),1),e("textarea",{value:y.nextStepPrompt||"",onInput:u[8]||(u[8]=h=>y.nextStepPrompt=h.target.value),rows:"8",placeholder:n(o)("config.agentConfig.nextStepPromptPlaceholder")},null,40,Gs)])])]),_:1},8,["modelValue","title"]),k(Ft,{modelValue:S.value,"onUpdate:modelValue":u[10]||(u[10]=h=>S.value=h),tools:m,"selected-tool-ids":((O=g.value)==null?void 0:O.availableTools)||[],onConfirm:R},null,8,["modelValue","tools","selected-tool-ids"]),k(ve,{modelValue:D.value,"onUpdate:modelValue":u[12]||(u[12]=h=>D.value=h),title:n(o)("config.agentConfig.deleteConfirm")},{footer:te(()=>[e("button",{class:"cancel-btn",onClick:u[11]||(u[11]=h=>D.value=!1)},t(n(o)("common.cancel")),1),e("button",{class:"confirm-btn danger",onClick:W},t(n(o)("common.delete")),1)]),default:te(()=>{var h;return[e("div",qs,[k(n(V),{icon:"carbon:warning",class:"warning-icon"}),e("p",null,[A(t(n(o)("config.agentConfig.deleteConfirmText"))+" ",1),e("strong",null,t((h=g.value)==null?void 0:h.name),1),A(" "+t(n(o)("common.confirm"))+"ï¼Ÿ",1)]),e("p",js,t(n(o)("config.agentConfig.deleteWarning")),1)])]}),_:1},8,["modelValue","title"]),_.value?(i(),r("div",{key:0,class:"error-toast",onClick:u[13]||(u[13]=h=>_.value="")},[k(n(V),{icon:"carbon:error"}),A(" "+t(_.value),1)])):E("",!0),$.value?(i(),r("div",{key:1,class:"success-toast",onClick:u[14]||(u[14]=h=>$.value="")},[k(n(V),{icon:"carbon:checkmark"}),A(" "+t($.value),1)])):E("",!0)])}}}),Js=ce(Ks,[["__scopeId","data-v-86b6e145"]]),zs={class:"custom-select"},Hs=["title"],Xs={key:0,class:"current-option"},Ys={class:"option-name"},Qs={key:1,class:"current-option"},Ws={class:"dropdown-header"},Zs={class:"select-options"},en=["onClick"],on={class:"option-name"},tn=re({__name:"index",props:{modelValue:{},options:{},placeholder:{},dropdownTitle:{},icon:{}},emits:["update:modelValue"],setup(I,{emit:o}){const s=I,_=o,$=L(!1),p=oe(()=>s.options.find(D=>D.id===s.modelValue)),g=D=>D.id===s.modelValue,m=()=>{$.value=!$.value},M=D=>{_("update:modelValue",D.id),$.value=!1};return(D,S)=>(i(),r("div",zs,[e("button",{class:"select-btn",onClick:m,title:D.placeholder},[k(n(V),{icon:s.icon||"carbon:select-01",width:"18"},null,8,["icon"]),p.value?(i(),r("span",Xs,[e("span",Ys,t(p.value.name),1)])):(i(),r("span",Qs,t(D.placeholder),1)),k(n(V),{icon:$.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,Hs),k(Ce,{name:"slideDown"},{default:te(()=>[G(e("div",{class:"select-dropdown",onClick:S[1]||(S[1]=me(()=>{},["stop"]))},[e("div",Ws,[e("span",null,t(D.dropdownTitle),1),e("button",{class:"close-btn",onClick:S[0]||(S[0]=x=>$.value=!1)},[k(n(V),{icon:"carbon:close",width:"16"})])]),e("div",Zs,[(i(!0),r(H,null,X(D.options,x=>(i(),r("button",{key:x.id,class:Z(["select-option",{active:g(x)}]),onClick:j=>M(x)},[e("span",on,t(x.name),1),g(x)?(i(),ie(n(V),{key:0,icon:"carbon:checkmark",width:"16",class:"check-icon"})):E("",!0)],10,en))),128))])],512),[[xe,$.value]])]),_:1}),$.value?(i(),r("div",{key:0,class:"backdrop",onClick:S[2]||(S[2]=x=>$.value=!1)})):E("",!0)]))}}),Ae=ce(tn,[["__scopeId","data-v-ed05fea8"]]),sn={class:"config-panel"},nn={class:"panel-header"},an={class:"panel-actions"},ln=["disabled"],cn={class:"model-layout"},rn={class:"model-list"},dn={class:"list-header"},un={class:"model-count"},pn={key:0,class:"models-container"},gn=["onClick"],fn={class:"model-card-header"},mn={class:"model-name"},vn={class:"model-desc"},hn={key:0,class:"model-type"},yn={class:"model-tag"},_n={key:1,class:"loading-state"},bn={key:2,class:"empty-state"},Cn={key:0,class:"model-detail"},$n={class:"detail-header"},wn={class:"detail-actions"},kn={class:"form-item"},Sn={class:"form-item"},Tn=["placeholder"],An={class:"form-item"},xn=["placeholder"],Mn={class:"form-item"},Vn=["placeholder"],Un={class:"form-item"},En=["placeholder"],Pn={key:1,class:"no-selection"},Ln={class:"modal-form"},Bn={class:"form-item"},Dn={class:"form-item"},Fn=["placeholder"],Rn={class:"form-item"},Nn=["placeholder"],On={class:"form-item"},In=["placeholder"],Gn={class:"form-item"},qn=["placeholder"],jn={class:"delete-confirm"},Kn={class:"warning-text"},Jn=re({__name:"modelConfig",setup(I){const{t:o}=he(),s=L(!1),_=L(""),$=L(""),p=ae([]),g=ae([]),m=L(null),M=L(!1),D=L(!1),S=ae({baseUrl:"",apiKey:"",modelName:"",modelDescription:"",type:""}),x=(T,a)=>{a==="success"?($.value=T,setTimeout(()=>{$.value=""},3e3)):(_.value=T,setTimeout(()=>{_.value=""},5e3))},j=async()=>{s.value=!0;try{const[T,a]=await Promise.all([le.getAllModels(),le.getAllTypes()]),l=T.map(f=>({...f}));p.splice(0,p.length,...l),g.splice(0,p.length,...a),l.length>0&&await Q(l[0])}catch(T){console.error("åŠ è½½æ•°æ®å¤±è´¥:",T),x(o("config.modelConfig.loadDataFailed")+": "+T.message,"error")}finally{s.value=!1}},Q=async T=>{try{const a=await le.getModelById(T.id);m.value={...a}}catch(a){console.error("åŠ è½½Modelè¯¦æƒ…å¤±è´¥:",a),x(o("config.modelConfig.loadDetailsFailed")+": "+a.message,"error"),m.value={...T}}},se=()=>{S.baseUrl="",S.apiKey="",S.modelName="",S.modelDescription="",S.type="",M.value=!0},F=async()=>{if(!S.modelName.trim()||!S.modelDescription.trim()){x(o("config.modelConfig.requiredFields"),"error");return}try{const T={baseUrl:S.baseUrl.trim(),apiKey:S.apiKey.trim(),modelName:S.modelName.trim(),modelDescription:S.modelDescription.trim(),type:S.type.trim()},a=await le.createModel(T);p.push(a),m.value=a,M.value=!1,x(o("config.modelConfig.createSuccess"),"success")}catch(T){x(o("config.modelConfig.createFailed")+": "+T.message,"error")}},y=async()=>{if(m.value){if(!m.value.modelName.trim()||!m.value.modelDescription.trim()){x(o("config.modelConfig.requiredFields"),"error");return}try{const T=await le.updateModel(m.value.id,m.value),a=p.findIndex(l=>l.id===T.id);a!==-1&&(p[a]=T),m.value=T,x(o("config.modelConfig.saveSuccess"),"success")}catch(T){x(o("config.modelConfig.saveFailed")+": "+T.message,"error")}}},N=()=>{D.value=!0},ee=async()=>{if(m.value)try{await le.deleteModel(m.value.id);const T=p.findIndex(a=>a.id===m.value.id);T!==-1&&p.splice(T,1),m.value=p.length>0?p[0]:null,D.value=!1,x(o("config.modelConfig.deleteSuccess"),"success")}catch(T){x(o("config.modelConfig.deleteFailed")+": "+T.message,"error")}},q=()=>{const T=document.createElement("input");T.type="file",T.accept=".json",T.onchange=a=>{var f;const l=(f=a.target.files)==null?void 0:f[0];if(l){const R=new FileReader;R.onload=async B=>{var J;try{const W=JSON.parse((J=B.target)==null?void 0:J.result);if(!W.modelName||!W.modelDescription)throw new Error(o("config.modelConfig.invalidFormat"));const{id:ye,...pe}=W,w=await le.createModel(pe);p.push(w),m.value=w,x(o("config.modelConfig.importSuccess"),"success")}catch(W){x(o("config.modelConfig.importFailed")+": "+W.message,"error")}},R.readAsText(l)}},T.click()},ue=()=>{if(m.value)try{const T=JSON.stringify(m.value,null,2),a=new Blob([T],{type:"application/json"}),l=URL.createObjectURL(a),f=document.createElement("a");f.href=l,f.download=`model-${m.value.modelName}-${new Date().toISOString().split("T")[0]}.json`,f.click(),URL.revokeObjectURL(l),x(o("config.modelConfig.exportSuccess"),"success")}catch(T){x(o("config.modelConfig.exportFailed")+": "+T.message,"error")}};return be(()=>{j()}),(T,a)=>(i(),r("div",sn,[e("div",nn,[e("h2",null,t(n(o)("config.modelConfig.title")),1),e("div",an,[e("button",{class:"action-btn",onClick:q},[k(n(V),{icon:"carbon:upload"}),A(" "+t(n(o)("config.modelConfig.import")),1)]),e("button",{class:"action-btn",onClick:ue,disabled:!m.value},[k(n(V),{icon:"carbon:download"}),A(" "+t(n(o)("config.modelConfig.export")),1)],8,ln)])]),e("div",cn,[e("div",rn,[e("div",dn,[e("h3",null,t(n(o)("config.modelConfig.configuredModels")),1),e("span",un,"("+t(p.length)+")",1)]),s.value?E("",!0):(i(),r("div",pn,[(i(!0),r(H,null,X(p,l=>{var f;return i(),r("div",{key:l.id,class:Z(["model-card",{active:((f=m.value)==null?void 0:f.id)===l.id}]),onClick:R=>Q(l)},[e("div",fn,[e("span",mn,t(l.modelName),1),k(n(V),{icon:"carbon:chevron-right"})]),e("p",vn,t(l.modelDescription),1),l.type?(i(),r("div",hn,[e("span",yn,t(l.type),1)])):E("",!0)],10,gn)}),128))])),s.value?(i(),r("div",_n,[k(n(V),{icon:"carbon:loading",class:"loading-icon"}),A(" "+t(n(o)("common.loading")),1)])):E("",!0),!s.value&&p.length===0?(i(),r("div",bn,[k(n(V),{icon:"carbon:bot",class:"empty-icon"}),e("p",null,t(n(o)("config.modelConfig.noModel")),1)])):E("",!0),e("button",{class:"add-btn",onClick:se},[k(n(V),{icon:"carbon:add"}),A(" "+t(n(o)("config.modelConfig.createNew")),1)])]),m.value?(i(),r("div",Cn,[e("div",$n,[e("h3",null,t(m.value.modelName),1),e("div",wn,[e("button",{class:"action-btn primary",onClick:y},[k(n(V),{icon:"carbon:save"}),A(" "+t(n(o)("common.save")),1)]),e("button",{class:"action-btn danger",onClick:N},[k(n(V),{icon:"carbon:trash-can"}),A(" "+t(n(o)("common.delete")),1)])])]),e("div",kn,[e("label",null,[A(t(n(o)("config.modelConfig.type"))+" ",1),a[15]||(a[15]=e("span",{class:"required"},"*",-1))]),k(Ae,{modelValue:m.value.type,"onUpdate:modelValue":a[0]||(a[0]=l=>m.value.type=l),options:g.map(l=>({id:l,name:l})),placeholder:n(o)("config.modelConfig.typePlaceholder"),"dropdown-title":n(o)("config.modelConfig.typePlaceholder"),icon:"carbon:types"},null,8,["modelValue","options","placeholder","dropdown-title"])]),e("div",Sn,[e("label",null,[A(t(n(o)("config.modelConfig.baseUrl"))+" ",1),a[16]||(a[16]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=l=>m.value.baseUrl=l),placeholder:n(o)("config.modelConfig.baseUrlPlaceholder"),required:""},null,8,Tn),[[z,m.value.baseUrl]])]),e("div",An,[e("label",null,[A(t(n(o)("config.modelConfig.apiKey"))+" ",1),a[17]||(a[17]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=l=>m.value.apiKey=l),placeholder:n(o)("config.modelConfig.apiKeyPlaceholder"),required:""},null,8,xn),[[z,m.value.apiKey]])]),e("div",Mn,[e("label",null,[A(t(n(o)("config.modelConfig.modelName"))+" ",1),a[18]||(a[18]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=l=>m.value.modelName=l),placeholder:n(o)("config.modelConfig.modelNamePlaceholder"),required:""},null,8,Vn),[[z,m.value.modelName]])]),e("div",Un,[e("label",null,[A(t(n(o)("config.modelConfig.description"))+" ",1),a[19]||(a[19]=e("span",{class:"required"},"*",-1))]),G(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=l=>m.value.modelDescription=l),rows:"3",placeholder:n(o)("config.modelConfig.descriptionPlaceholder"),required:""},null,8,En),[[z,m.value.modelDescription]])])])):(i(),r("div",Pn,[k(n(V),{icon:"carbon:bot",class:"placeholder-icon"}),e("p",null,t(n(o)("config.modelConfig.selectModelHint")),1)]))]),k(ve,{modelValue:M.value,"onUpdate:modelValue":a[10]||(a[10]=l=>M.value=l),title:n(o)("config.modelConfig.newModel"),onConfirm:F},{default:te(()=>[e("div",Ln,[e("div",Bn,[e("label",null,[A(t(n(o)("config.modelConfig.type"))+" ",1),a[20]||(a[20]=e("span",{class:"required"},"*",-1))]),k(Ae,{modelValue:S.type,"onUpdate:modelValue":a[5]||(a[5]=l=>S.type=l),options:g.map(l=>({id:l,name:l})),placeholder:n(o)("config.modelConfig.typePlaceholder"),"dropdown-title":n(o)("config.modelConfig.typePlaceholder"),icon:"carbon:types"},null,8,["modelValue","options","placeholder","dropdown-title"])]),e("div",Dn,[e("label",null,[A(t(n(o)("config.modelConfig.baseUrl"))+" ",1),a[21]||(a[21]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=l=>S.baseUrl=l),placeholder:n(o)("config.modelConfig.baseUrlPlaceholder"),required:""},null,8,Fn),[[z,S.baseUrl]])]),e("div",Rn,[e("label",null,[A(t(n(o)("config.modelConfig.apiKey"))+" ",1),a[22]||(a[22]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=l=>S.apiKey=l),placeholder:n(o)("config.modelConfig.apiKeyPlaceholder"),required:""},null,8,Nn),[[z,S.apiKey]])]),e("div",On,[e("label",null,[A(t(n(o)("config.modelConfig.modelName"))+" ",1),a[23]||(a[23]=e("span",{class:"required"},"*",-1))]),G(e("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=l=>S.modelName=l),placeholder:n(o)("config.modelConfig.modelNamePlaceholder"),required:""},null,8,In),[[z,S.modelName]])]),e("div",Gn,[e("label",null,[A(t(n(o)("config.modelConfig.description"))+" ",1),a[24]||(a[24]=e("span",{class:"required"},"*",-1))]),G(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=l=>S.modelDescription=l),rows:"3",placeholder:n(o)("config.modelConfig.descriptionPlaceholder"),required:""},null,8,qn),[[z,S.modelDescription]])])])]),_:1},8,["modelValue","title"]),k(ve,{modelValue:D.value,"onUpdate:modelValue":a[12]||(a[12]=l=>D.value=l),title:"åˆ é™¤ç¡®è®¤"},{footer:te(()=>[e("button",{class:"cancel-btn",onClick:a[11]||(a[11]=l=>D.value=!1)},t(n(o)("common.cancel")),1),e("button",{class:"confirm-btn danger",onClick:ee},t(n(o)("common.delete")),1)]),default:te(()=>{var l;return[e("div",jn,[k(n(V),{icon:"carbon:warning",class:"warning-icon"}),e("p",null,[A(t(n(o)("config.modelConfig.deleteConfirmText"))+" ",1),e("strong",null,t((l=m.value)==null?void 0:l.modelName),1),A(" "+t(n(o)("common.confirm"))+"ï¼Ÿ",1)]),e("p",Kn,t(n(o)("config.modelConfig.deleteWarning")),1)])]}),_:1},8,["modelValue"]),_.value?(i(),r("div",{key:0,class:"error-toast",onClick:a[13]||(a[13]=l=>_.value="")},[k(n(V),{icon:"carbon:error"}),A(" "+t(_.value),1)])):E("",!0),$.value?(i(),r("div",{key:1,class:"success-toast",onClick:a[14]||(a[14]=l=>$.value="")},[k(n(V),{icon:"carbon:checkmark"}),A(" "+t($.value),1)])):E("",!0)]))}}),zn=ce(Jn,[["__scopeId","data-v-e7941263"]]);class _e{static async getAllMcpServers(){const o=await fetch(`${this.BASE_URL}/list`);if(!o.ok)throw new Error(`Failed to get MCP server list: ${o.status}`);return await o.json()}static async addMcpServer(o){try{const s=await fetch(`${this.BASE_URL}/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Failed to add MCP server: ${s.status}`);return{success:!0,message:"Successfully added MCP server"}}catch(s){return console.error("Failed to add MCP server:",s),{success:!1,message:s instanceof Error?s.message:"Failed to add, please retry"}}}static async removeMcpServer(o){try{const s=await fetch(`${this.BASE_URL}/remove?id=${o}`);if(!s.ok)throw new Error(`Failed to delete MCP server: ${s.status}`);return{success:!0,message:"Successfully deleted MCP server"}}catch(s){return console.error(`Failed to delete MCP server[${o}]:`,s),{success:!1,message:s instanceof Error?s.message:"Failed to delete, please retry"}}}}ge(_e,"BASE_URL","/api/mcp");const Hn={class:"mcp-config-panel"},Xn={class:"mcp-header"},Yn={class:"header-left"},Qn={class:"mcp-stats"},Wn={class:"stat-item"},Zn={class:"stat-label"},ea={class:"stat-value"},oa={class:"header-right"},ta={class:"search-box"},sa=["placeholder"],na={key:0,class:"loading-container"},aa={key:1,class:"mcp-layout"},la={class:"mcp-table-container"},ia={class:"section-title"},ca={key:0,class:"empty-state"},ra={class:"empty-state-text"},da={key:1,class:"mcp-table-wrapper"},ua={class:"mcp-table"},pa={class:"mcp-id"},ga={class:"mcp-server-name"},fa={class:"server-name-content"},ma={class:"mcp-connection-type"},va={class:"mcp-config"},ha=["title"],ya={class:"mcp-actions"},_a=["onClick","disabled"],ba={class:"add-mcp-container"},Ca={class:"add-mcp-header"},$a={class:"add-mcp-title"},wa={class:"mcp-form"},ka={class:"mcp-form-group"},Sa={class:"form-label"},Ta={class:"connection-type-options"},Aa={class:"connection-type-option"},xa={for:"mcp-connection-type-studio",class:"radio-label"},Ma={class:"connection-type-desc"},Va={class:"connection-type-option"},Ua={for:"mcp-connection-type-sse",class:"radio-label"},Ea={class:"connection-type-desc"},Pa={class:"connection-type-option"},La={for:"mcp-connection-type-streaming",class:"radio-label"},Ba={class:"connection-type-desc"},Da={class:"mcp-form-group"},Fa={class:"form-label"},Ra=["placeholder"],Na={class:"mcp-form-actions"},Oa=["disabled"],Ia=["disabled"],Ga={class:"mcp-form-instructions"},qa={class:"indented-list"},ja=re({__name:"mcpConfig",setup(I){const{t:o}=he(),s=L(!1),_=L([]),$=L(""),p=ae({connectionType:"STUDIO",configJson:""}),g=ae({show:!1,text:"",type:"success"}),m=oe(()=>p.configJson.trim().length>0),M=oe(()=>{if(!$.value.trim())return _.value;const F=$.value.toLowerCase();return _.value.filter(y=>y.mcpServerName.toLowerCase().includes(F)||y.connectionType.toLowerCase().includes(F)||y.connectionConfig.toLowerCase().includes(F))}),D=F=>F?F.length>50?F.substring(0,50)+"...":F:"",S=(F,y="success")=>{g.text=F,g.type=y,g.show=!0,setTimeout(()=>{g.show=!1},3e3)},x=async()=>{try{s.value=!0,_.value=await _e.getAllMcpServers()}catch(F){console.error("åŠ è½½MCPæœåŠ¡å™¨åˆ—è¡¨å¤±è´¥:",F),S(o("config.basicConfig.loadConfigFailed"),"error")}finally{s.value=!1}},j=async()=>{if(!m.value){S(o("config.mcpConfig.configRequired"),"error");return}try{JSON.parse(p.configJson)}catch{S(o("config.mcpConfig.invalidJson"),"error");return}try{s.value=!0;const F={connectionType:p.connectionType,configJson:p.configJson},y=await _e.addMcpServer(F);y.success?(S(o("config.mcpConfig.addSuccess")),se(),await x()):S(y.message||o("config.mcpConfig.addFailed"),"error")}catch(F){console.error("æ·»åŠ MCPæœåŠ¡å™¨å¤±è´¥:",F),S(o("config.mcpConfig.addFailed"),"error")}finally{s.value=!1}},Q=async F=>{if(confirm(o("config.mcpConfig.deleteConfirm")))try{s.value=!0;const y=await _e.removeMcpServer(F);y.success?(S(o("config.mcpConfig.deleteSuccess")),await x()):S(y.message||o("config.mcpConfig.deleteFailed"),"error")}catch(y){console.error("åˆ é™¤MCPæœåŠ¡å™¨å¤±è´¥:",y),S(o("config.mcpConfig.deleteFailed"),"error")}finally{s.value=!1}},se=()=>{p.connectionType="STUDIO",p.configJson=""};return be(()=>{x()}),(F,y)=>(i(),r("div",Hn,[e("div",Xn,[e("div",Yn,[e("h2",null,t(n(o)("config.mcpConfig.title")),1),e("div",Qn,[e("span",Wn,[e("span",Zn,t(n(o)("config.mcpConfig.mcpServers"))+":",1),e("span",ea,t(_.value.length),1)])])]),e("div",oa,[e("div",ta,[G(e("input",{"onUpdate:modelValue":y[0]||(y[0]=N=>$.value=N),type:"text",placeholder:n(o)("config.mcpSearch"),class:"search-input"},null,8,sa),[[z,$.value]]),y[5]||(y[5]=e("span",{class:"search-icon"},"ðŸ”",-1))])])]),s.value?(i(),r("div",na,[y[6]||(y[6]=e("div",{class:"loading-spinner"},null,-1)),e("p",null,t(n(o)("config.loading")),1)])):(i(),r("div",aa,[e("div",la,[e("h3",ia,t(n(o)("config.mcpConfig.serverList")),1),M.value.length===0?(i(),r("div",ca,[y[7]||(y[7]=e("div",{class:"empty-state-icon"},"ðŸ“‚",-1)),e("div",ra,t($.value?n(o)("config.notFound"):n(o)("config.mcpConfig.noServers")),1)])):(i(),r("div",da,[e("table",ua,[e("thead",null,[e("tr",null,[y[8]||(y[8]=e("th",null,"ID",-1)),e("th",null,t(n(o)("agent.name")),1),e("th",null,t(n(o)("config.mcpConfig.connectionType")),1),e("th",null,t(n(o)("config.mcpConfig.configJsonLabel")),1),e("th",null,t(n(o)("common.actions")),1)])]),e("tbody",null,[(i(!0),r(H,null,X(M.value,N=>(i(),r("tr",{key:N.id,class:"mcp-row"},[e("td",pa,t(N.id),1),e("td",ga,[e("div",fa,[y[9]||(y[9]=e("span",{class:"server-icon"},"ðŸ”Œ",-1)),A(" "+t(N.mcpServerName),1)])]),e("td",ma,[e("span",{class:Z(["connection-type-badge",N.connectionType.toLowerCase()])},t(N.connectionType),3)]),e("td",va,[e("div",{class:"config-preview",title:N.connectionConfig},t(D(N.connectionConfig)),9,ha)]),e("td",ya,[e("button",{onClick:ee=>Q(N.id),class:"action-btn delete-btn",disabled:s.value},t(n(o)("common.delete")),9,_a)])]))),128))])])]))]),e("div",ba,[e("div",Ca,[e("h3",$a,t(n(o)("config.mcpConfig.addMcpServer")),1)]),e("div",wa,[e("div",ka,[e("label",Sa,t(n(o)("config.mcpConfig.connectionType"))+"ï¼š",1),e("div",Ta,[e("div",Aa,[G(e("input",{type:"radio",id:"mcp-connection-type-studio","onUpdate:modelValue":y[1]||(y[1]=N=>p.connectionType=N),value:"STUDIO"},null,512),[[ke,p.connectionType]]),e("label",xa,[y[10]||(y[10]=e("span",{class:"radio-title"},"STUDIO",-1)),e("span",Ma,t(n(o)("config.mcpConfig.instructionStep1LocalDesc")),1)])]),e("div",Va,[G(e("input",{type:"radio",id:"mcp-connection-type-sse","onUpdate:modelValue":y[2]||(y[2]=N=>p.connectionType=N),value:"SSE"},null,512),[[ke,p.connectionType]]),e("label",Ua,[y[11]||(y[11]=e("span",{class:"radio-title"},"SSE",-1)),e("span",Ea,t(n(o)("config.mcpConfig.instructionStep1RemoteDesc")),1)])]),e("div",Pa,[G(e("input",{type:"radio",id:"mcp-connection-type-streaming","onUpdate:modelValue":y[3]||(y[3]=N=>p.connectionType=N),value:"STREAMING"},null,512),[[ke,p.connectionType]]),e("label",La,[y[12]||(y[12]=e("span",{class:"radio-title"},"Streamable HTTP",-1)),e("span",Ba,t(n(o)("config.mcpConfig.instructionStep1RemoteDesc")),1)])])])]),e("div",Da,[e("label",Fa,t(n(o)("config.mcpConfig.configJsonLabel")),1),G(e("textarea",{"onUpdate:modelValue":y[4]||(y[4]=N=>p.configJson=N),placeholder:n(o)("config.mcpConfig.configJsonPlaceholder"),class:"config-textarea",rows:"6"},null,8,Ra),[[z,p.configJson]])]),e("div",Na,[e("button",{onClick:j,class:"action-btn add-btn",disabled:s.value},t(n(o)("common.add")),9,Oa),e("button",{onClick:se,class:"action-btn reset-btn",disabled:s.value},t(n(o)("common.reset")),9,Ia)])]),e("div",Ga,[e("h4",null,t(n(o)("config.mcpConfig.instructions")),1),e("ol",null,[e("li",null,[A(t(n(o)("config.mcpConfig.instructionStep1"))+" ",1),e("ul",qa,[e("li",null,[e("strong",null,t(n(o)("config.mcpConfig.instructionStep1Local")),1),A("ï¼š"+t(n(o)("config.mcpConfig.instructionStep1LocalDesc")),1)]),e("li",null,[e("strong",null,t(n(o)("config.mcpConfig.instructionStep1Remote")),1),A("ï¼š"+t(n(o)("config.mcpConfig.instructionStep1RemoteDesc")),1)])])]),e("li",null,t(n(o)("config.mcpConfig.instructionStep2")),1),e("li",null,t(n(o)("config.mcpConfig.instructionStep3")),1),e("li",null,t(n(o)("config.mcpConfig.instructionStep4")),1)])])])])),k(Ce,{name:"message-fade"},{default:te(()=>[g.show?(i(),r("div",{key:0,class:Z(["message-toast",g.type])},t(g.text),3)):E("",!0)]),_:1})]))}}),Ka=ce(ja,[["__scopeId","data-v-619397ab"]]),Ja={class:"config-container"},za={class:"config-header"},Ha={class:"header-actions"},Xa={class:"config-content"},Ya={class:"config-nav"},Qa=["onClick"],Wa={class:"config-details"},Za=re({__name:"index",setup(I){const{t:o}=he(),s=L("basic"),_=oe(()=>[{key:"basic",label:o("config.categories.basic"),icon:"carbon:settings"},{key:"agent",label:o("config.categories.agent"),icon:"carbon:bot"},{key:"model",label:o("config.categories.model"),icon:"carbon:build-image"},{key:"mcp",label:o("config.categories.mcp"),icon:"carbon:tool-box"}]);return($,p)=>(i(),r("div",Ja,[e("div",za,[e("div",Ha,[e("button",{class:"action-btn",onClick:p[0]||(p[0]=g=>$.$router.push("/"))},[k(n(V),{icon:"carbon:arrow-left"}),A(" "+t($.$t("backHome")),1)]),k(De)])]),e("div",Xa,[e("nav",Ya,[(i(!0),r(H,null,X(_.value,(g,m)=>(i(),r("div",{key:m,class:Z(["nav-item",{active:s.value===g.key}]),onClick:M=>s.value=g.key},[k(n(V),{icon:g.icon,width:"20"},null,8,["icon"]),e("span",null,t(g.label),1)],10,Qa))),128))]),e("div",Wa,[s.value==="basic"?(i(),ie(pt,{key:0})):E("",!0),s.value==="agent"?(i(),ie(Js,{key:1})):E("",!0),s.value==="model"?(i(),ie(zn,{key:2})):E("",!0),s.value==="mcp"?(i(),ie(Ka,{key:3})):E("",!0)])])]))}}),nl=ce(Za,[["__scopeId","data-v-857c9630"]]);export{nl as default};
