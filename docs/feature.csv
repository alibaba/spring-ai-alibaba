ID,Title,Content,Acceptance Criteria,Review Requirements,State,Labels,Related Files
1,ToolContext Metadata Helper Design,Design and implement ToolContextHelper to provide user-friendly API for accessing ToolContext metadata without exposing internal key constants. Supports dual access modes: Helper and direct key access.,"1. ✅ ToolContextHelper class with getConfig(), getState(), getStateForUpdate(), getMetadata() methods
2. ✅ ToolContextConstants retained as public API (not deprecated)
3. ✅ Comprehensive example (ToolContextDualAccessExample) demonstrating both access modes
4. ✅ Type-safe access with Optional return
5. ✅ Backward compatibility maintained
6. ✅ Documentation examples updated with dual-mode usage
7. ⚠️ Unit tests created but project pre-compilation errors prevent execution","Code review: API design and naming conventions
Documentation review: Example clarity and completeness
Example review: Verify both access patterns work
Note: Project has pre-existing compilation errors (MultiCommand, RemoveByHash, etc.) that prevent full build",已完成,"design,impl,agent-framework,issue-3110",docs/issue/3110-toolcontext-metadata-solution.md;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/tools/ToolContextHelper.java;examples/documentation/src/main/java/com/alibaba/cloud/ai/examples/documentation/graph/examples/ToolContextDualAccessExample.java
2,Issue #4184 Repro Case (Full),Rewrite Issue4184FullAgentTest as a deterministic runnable reproduction for the HITL + skills tool missing problem in 1.1.2.0. Removes LLM/network dependency and hardcoded API keys; simulates post-checkpoint tool-callback loss and verifies the error message.,"1. ✅ Running Issue4184FullAgentTest reproduces: IllegalStateException 'No ToolCallback found ... read_skill'
2. ✅ No external LLM/API key required
3. ✅ Skill registry + SkillsAgentHook + HumanInTheLoopHook path exercised
4. ✅ No secrets committed (no hardcoded API keys)","Code review: correctness of repro steps and alignment with Issue #4184 description
Security review: ensure no secrets/hardcoded tokens",已完成,"bug,test,issue-4184,agent-framework",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/studiocorsconditionalit/Issue4184FullAgentTest.java;docs/feature/feature-02-issue-4184-repro-case.md
3,Issue #4184 Fix Options,"Provide multiple fix方案 for Issue #4184 so the team can compare trade-offs (scope, risk, compatibility, testing).","1. ✅ 至少 3 个修复方案
2. ✅ 每个方案包含：实现位置、原理、优缺点、风险、测试建议
3. ✅ 给出推荐方案与适用条件",Review: solution trade-off clarity and feasibility,待评审,"design,issue-4184,agent-framework",docs/feature/feature-04-issue-4184-fix-options.md
3,Issue #4184 Fix (HITL skill tool restore),Fix tool callback loss after HITL interruption by persisting skill tool metadata and restoring missing tools during AgentToolNode execution.,"1. ✅ SkillsAgentHook persists skill tool names + hook instance into state
2. ✅ AgentToolNode restores missing tools and avoids immutable tool list failures
3. ✅ Missing ToolCallback throws consistent error when still unresolved",Code review: recovery flow correctness and logging clarity,待评审,"bug,fix,issue-4184,agent-framework",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/skills/SkillsAgentHook.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/node/AgentToolNode.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/skills/SkillToolCallbackResolver.java;docs/feature/feature-03-issue-4184-fix.md
4,Issue #4184 Fix (HITL hook reinjection),Implement方案B: reinject tool callbacks in HumanInTheLoopHook after approval.,"1. ✅ HumanInTheLoopHook triggers tool refresh on approved feedback
2. ✅ ReactAgent refresh collects configured tools/providers/resolver/hooks/interceptors
3. ✅ Only HITL resume path affected",Code review: hook-level reinjection correctness and scope,待评审,"bug,fix,issue-4184,agent-framework",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/hip/HumanInTheLoopHook.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/ReactAgent.java;docs/feature/feature-05-issue-4184-hitl-hook-injection.md;docs/_history.md
5,Normal Tool HITL Loss Repro,Add a runnable reproduction showing a normal (non-skill) tool callback can be lost after HITL resume when tool callbacks are not re-injected.,"1. ✅ Running NormalToolHITLLossTest reproduces: IllegalStateException 'No ToolCallback found ... echo'
2. ✅ No external LLM/API key required
3. ✅ HumanInTheLoopHook approval path exercised with a normal FunctionToolCallback",Code review: repro steps and message verification,待评审,"test,issue-4184,agent-framework",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/corsit/NormalToolHITLLossTest.java;docs/feature/feature-06-normal-tool-hitl-loss-repro.md
6,NormalToolHITLLossTest inputType fix,Fix FunctionToolCallback inputType to avoid build-time IllegalArgumentException in NormalToolHITLLossTest.,"1. ✅ NormalToolHITLLossTest builds without inputType null error
2. ✅ Repro still triggers missing ToolCallback exception when tool list is empty",Code review: builder usage and tool args,待评审,"test,bug,issue-4184,agent-framework",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/corsit/NormalToolHITLLossTest.java;docs/feature/feature-06-normal-tool-hitl-loss-repro.md;docs/_history.md
7,NormalToolHITLLossTest sanity check update,Preserve tool callbacks after HITL in NormalToolHITLLossTest to avoid simulated loss; update docs to reflect expected success.,"1. NormalToolHITLLossTest runs without 'No ToolCallback found' when callbacks are preserved
2. Docs describe the sanity-check behavior and expected success",Code review: repro validity and log clarity,待评审,"test,docs,issue-4184,agent-framework",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/corsit/NormalToolHITLLossTest.java;docs/feature/feature-06-normal-tool-hitl-loss-repro.md;docs/_history.md
8,HITL tool retention example,Create a runnable HITL + tools example that verifies tool callbacks are retained after human approval.,"1. HITLToolRetentionCheck runs without 'No ToolCallback found'
2. Docs explain the HITL approval flow and expected success",Code review: example flow correctness and log clarity,等待确认,"test,docs,hitl,agent-framework",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/studiocorsconditionalit/HITLToolRetentionCheck.java;docs/feature/feature-07-hitl-tool-retention-check.md;docs/_history.md
9,Issue #4184 Fix (Skills context retention),Persist activated skill names in SkillsAgentHook state and restore them into ModelRequest metadata so SkillsInterceptor can reuse activation after HITL resume.,"1. ✅ SkillsAgentHook persists active skill names to state in before/after model hooks
2. ✅ SkillsAgentHook merges persisted + scanned skills and writes to ModelRequest metadata
3. ✅ SkillsInterceptor prioritizes metadata, falls back to message scan
4. ✅ No behavior change when skills are unused",Code review: hook lifecycle and metadata propagation,等待确认,"bug,fix,issue-4184,agent-framework,skills",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/skills/SkillsAgentHook.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/interceptor/skills/SkillsInterceptor.java;docs/feature/feature-08-issue-4184-skills-context-retention.md;docs/_history.md;docs/feature.csv
10,Issue #4184 HITL resume reinject skills tools only,"Implement scheme B (partial reinjection): after HITL approval, re-inject skills tools into AgentToolNode while keeping user tools untouched.","1. ✅ HumanInTheLoopHook triggers skills-only reinjection after approval
2. ✅ ReactAgent reinjects tools from SkillsAgentHook only when missing
3. ✅ Non-skill tools remain unchanged",Code review: reinjection scope stays limited to skills,待评审,"bug,fix,issue-4184,agent-framework,skills",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/ReactAgent.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/hip/HumanInTheLoopHook.java;docs/feature/feature-04-issue-4184-fix-options.md;docs/_history.md
11,Issue #4184 Fix (ReactAgent reinject tools on resume),"Implement complete fix for Issue #4184: SkillsAgentHook persists tool names to state, AgentToolNode restores tools from state via SkillToolCallbackResolver on checkpoint restore.","1. ✅ SkillToolCallbackResolver created for resolving tools from persisted state
2. ✅ SkillsAgentHook persists skill tool names to state (SKILL_TOOLS_KEY) in beforeAgent()
3. ✅ AgentToolNode restores tools from state using resolver when toolCallbacks is empty
4. ✅ Issue4184FullAgentTest verifies full fix: persistence + restoration + execution
5. ✅ ReactAgent.reinjectSkillsTools() enhanced for in-memory scenarios
6. ✅ Complete state-based restoration for checkpoint restore scenarios",Code review: refresh scope and ordering; verify no regressions; test full checkpoint restore flow,已完成,"bug,fix,issue-4184,agent-framework,docs,test",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/ReactAgent.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/skills/SkillsAgentHook.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/skills/SkillToolCallbackResolver.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/node/AgentToolNode.java;examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/studiocorsconditionalit/Issue4184FullAgentTest.java;docs/feature/feature-04-issue-4184-fix-options.md;docs/_history.md;docs/feature.csv
12,Spring AI Alibaba Sandbox Examples,"Create 4 complete sandbox example modules demonstrating different Spring AI Alibaba Sandbox capabilities: Simple Tool, Structured Output, Custom Sandbox, and Browser Use Fullstack.","1. ✅ sandbox-simple-tool: REST API with Calculator, Weather, Python, Shell, Browser tools (COMPILES)
2. ✅ sandbox-structured-output: Browser data extraction with typed POJOs (COMPILES)
3. ✅ sandbox-custom: Custom Sandbox with SPI registration and @RegisterSandbox (COMPILES - API fixes applied)
4. ✅ sandbox-browser-fullstack: Full-stack app with React frontend + WebSocket + SSE (COMPILES)
5. ✅ All examples compile successfully with Maven
6. ✅ Fixed API compatibility issues (PythonSandboxTool → SaaBasePythonRunner, sandbox.execute() → pythonRunner.apply())
7. ✅ Created examples/pom.xml parent for unified build management
8. ✅ Created docker-compose.yml for one-click service deployment","Code review: Example structure and API usage correctness
Documentation review: README and QUICKSTART clarity
Build verification: All examples compile without errors
Integration verification: Parent POM and Docker Compose functionality",已完成,"examples,sandbox,documentation,backend,frontend,devops",examples/sandbox-simple-tool/;examples/sandbox-structured-output/;examples/sandbox-custom/;examples/sandbox-browser-fullstack/;examples/pom.xml;examples/docker-compose.yml;docs/_history.md;docs/feature.csv
13,Sandbox Examples Docker Support,Add Dockerfiles and Docker Compose integration for all sandbox examples to enable containerized deployment,"1. ✅ Create Dockerfile for sandbox-simple-tool
2. ✅ Create Dockerfile for sandbox-structured-output
3. ✅ Create Dockerfile for sandbox-custom
4. ✅ Create Dockerfile for sandbox-browser-fullstack/backend
5. ✅ Create Dockerfile for sandbox-browser-fullstack/frontend
6. ✅ Create nginx.conf for frontend reverse proxy
7. ✅ Update docker-compose.yml with proper build contexts
8. ✅ Add health checks and proper networking
9. ✅ Added .dockerignore files to all examples for optimized build context
10. ✅ Updated README with comprehensive Docker testing guide and troubleshooting
11. ⏳ Test full docker-compose up workflow (pending - Docker environment issues)
12. ✅ Create GitHub Actions workflow for Docker CI/CD (automated build, lint, security scan)
13. ✅ Create Hadolint configuration for Dockerfile linting","Code review: Dockerfile best practices
Security review: Non-root user, minimal base images
Integration test: Full docker-compose stack startup
Documentation review: Docker testing guide completeness",已完成,"examples,sandbox,docker,devops",examples/docker-compose.yml;examples/*/Dockerfile;examples/sandbox-browser-fullstack/frontend/nginx.conf;examples/*/.dockerignore;examples/README.md;.github/workflows/docker-examples.yml;.hadolint.yaml
14,Issue #4184 Fix (DefaultBuilder skills resolver chain),Ensure DefaultBuilder chains SkillToolCallbackResolver when SkillsAgentHook is present so checkpoint/HITL resume can resolve read_skill by name.,"1. ✅ When hooks include SkillsAgentHook, DefaultBuilder composes ToolCallbackResolver to resolve skills tool names (read_skill)
2. ✅ toolNames resolution uses the effective resolver (includes skills resolver)
3. ✅ AgentToolNode is configured with the same effective resolver",Code review: builder wiring and resolver ordering,待评审,"bug,fix,issue-4184,agent-framework",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/DefaultBuilder.java;docs/feature/feature-04-issue-4184-fix-options.md;docs/_history.md;docs/feature.csv
15,Issue #4184 Fix (DefaultBuilder minimal-diff refactor),"Refactor DefaultBuilder resolver chaining to reuse original naming/structure (e.g., finalResolver) with clarifying comments; avoid unnecessary renames while preserving behavior.","1. ✅ Use finalResolver naming consistent with prior pattern
2. ✅ No behavior change (skills resolver still chained; toolNames + AgentToolNode use it)
3. ✅ Module compiles",Code review: diff size and readability,待评审,"refactor,bug,fix,issue-4184,agent-framework",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/DefaultBuilder.java;docs/_history.md;docs/feature.csv;docs/feature/feature-04-issue-4184-fix-options.md
16,Issue #4184 FullAgentTest constant fix,Fix Issue4184FullAgentTest to avoid referencing removed SkillsAgentHook constants; validate HITL interception + tool resolution after clearing toolCallbacks.,"1. ✅ Issue4184FullAgentTest compiles
2. ✅ No reference to removed SkillsAgentHook.SKILL_TOOLS_KEY
3. ✅ The scenario assertions remain accurate (HITL intercepts read_skill; resume succeeds after toolCallbacks cleared)",Code review: example correctness and assertions,待评审,"bug,refactor,issue-4184,examples",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/studiocorsconditionalit/Issue4184FullAgentTest.java;docs/_history.md;docs/feature.csv
17,Issue4184FullAgentTest reduce noisy skills prompt,Avoid printing full skills system prompt by default when running Issue4184FullAgentTest; keep a verbose toggle for debugging.,"1. ✅ Default run does not print Skills System section
2. ✅ Verbose logs available with -Dissue4184.verbose=true
3. ✅ Module compiles",Review: runnable output readability,待评审,"chore,examples,issue-4184",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/studiocorsconditionalit/Issue4184FullAgentTest.java;docs/_history.md;docs/feature.csv
18,Issue4184FullAgentTest verify read_skill execution,Strengthen Issue4184FullAgentTest to assert read_skill actually executes and returns the expected skill content (not just compilation).,"1. ✅ The runnable asserts HITL intercepts read_skill
2. ✅ After resume, it finds ToolResponse by call id + tool name
3. ✅ Tool response matches SkillRegistry.readSkillContent(\pdf-extractor\"") (normalize JSON-string responseData)"
"4. ✅ Can be executed via mvn exec:java""",Review: assertion strength and false positives,待评审,"test,examples,issue-4184",examples/studio-cors-conditional-it/src/main/java/com/alibaba/cloud/ai/examples/studiocorsconditionalit/Issue4184FullAgentTest.java;docs/_history.md;docs/feature.csv
19,Fix flaky timeout cancellation test,Stabilize CancellableAsyncToolCallback timeout test by avoiding ForkJoinPool.commonPool scheduling/starvation.,1. ✅ `./mvnw -pl spring-ai-alibaba-agent-framework test` passes; 2. ✅ TimeoutScenarioTests no longer relies on common pool scheduling.,Review: test determinism and thread behavior,已完成,"test,bug,agent-framework",spring-ai-alibaba-agent-framework/src/test/java/com/alibaba/cloud/ai/graph/agent/tool/CancellableAsyncToolCallbackTest.java;docs/feature/feature-09-fix-agent-framework-test-flake.md;docs/_history.md;docs/feature.csv
20,Sandbox Simple Tool usage & verification review,"Analyze examples/sandbox-simple-tool usage, verification steps, and whether the sample truly exercises sandbox execution.","1. ✅ Usage steps cover required env/Docker and startup
2. ✅ Verification includes sandbox-specific checks (containers/logs/tool execution)
3. ✅ Analysis explains whether sandbox is actually used and how to prove it",Review: accuracy of usage/verification guidance,等待确认,"docs,examples,sandbox,analysis",docs/feature/feature-10-sandbox-simple-tool-usage-review.md;docs/_history.md;docs/feature.csv
21,Sandbox Simple Tool docker host config,Ensure sandbox.docker.host uses Unix socket to match Docker Desktop default and avoid localhost:2375 connection errors.,"1. ✅ application.yml sets sandbox.docker.host to unix:///var/run/docker.sock
2. ✅ Feature doc records the config change and verification steps",Config review: verify docker host value and startup behavior,待评审,"examples,sandbox,config",examples/sandbox-simple-tool/src/main/resources/application.yml;docs/feature/feature-11-sandbox-docker-host-unix-socket.md;docs/_history.md;docs/feature.csv
21,Merge main into bugfix-lose-skills,Merge local main into current branch and resolve DefaultBuilder conflict while keeping skills resolver chain and main refactor.,"1. ✅ Merge local main into current branch
2. ✅ Resolve DefaultBuilder conflict with skills resolver chain + refactor retained
3. ✅ Create merge commit",Code review: conflict resolution correctness,已完成,"merge,process,agent-framework",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/DefaultBuilder.java;docs/feature/feature-11-merge-main-into-branch.md;docs/_history.md;docs/feature.csv
22,DefaultBuilder format sync,Align DefaultBuilder resolver chaining changes with main formatting and naming; avoid unnecessary diff while preserving behavior.,"1. ✅ DefaultBuilder uses effective resolver naming consistently
2. ✅ Imports/blank lines align with main style
3. ✅ No behavior change in resolver chaining",Code review: diff size and readability,待评审,"refactor,style,issue-4184,agent-framework",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/DefaultBuilder.java;docs/feature/feature-12-defaultbuilder-format-sync.md;docs/_history.md;docs/feature.csv
23,DefaultBuilder restore this.resolver usage,Restore visible usage of this.resolver in DefaultBuilder while keeping skills resolver chaining effective.,"1. ✅ this.resolver referenced in build and gatherLocalTools
2. ✅ Resolver chaining still applied when SkillsAgentHook is present
3. ✅ No functional regression introduced",Code review: behavior equivalence and side effects,待评审,"refactor,style,issue-4184,agent-framework",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/DefaultBuilder.java;docs/feature/feature-12-defaultbuilder-format-sync.md;docs/_history.md;docs/feature.csv
24,Studio CORS IT use local SNAPSHOT deps,Align examples/studio-cors-conditional-it to local 1.1.3.0-SNAPSHOT so DefaultBuilder changes are picked up after mvn install.,1. examples/studio-cors-conditional-it uses 1.1.3.0-SNAPSHOT for spring-ai-alibaba deps; 2. Tests/IT resolve local SNAPSHOT artifacts from ~/.m2,Review: verify dependency version alignment and local install resolution,等待确认,"build,examples,dependency",examples/studio-cors-conditional-it/pom.xml;docs/feature/feature-13-studio-cors-it-use-local-snapshot-deps.md;docs/_history.md;docs/feature.csv
25,Studio CORS IT sandbox dependency fix,Replace missing spring-ai-alibaba-sandbox-tool dependency with local spring-ai-alibaba-sandbox for 1.1.3.0-SNAPSHOT.,1. examples/studio-cors-conditional-it depends on spring-ai-alibaba-sandbox at 1.1.3.0-SNAPSHOT; 2. Maven resolves sandbox dependency from local install,Review: verify sandbox dependency resolution and example build,等待确认,"build,examples,dependency",examples/studio-cors-conditional-it/pom.xml;docs/feature/feature-14-studio-cors-it-sandbox-dep-fix.md;docs/_history.md;docs/feature.csv
26,DefaultBuilder resolver PR fixes (no tests),"Apply PR review fixes excluding tests: chain all SkillsAgentHook resolvers, resolve ToolCallbackResolver once per build, and align read_skill constant with ReadSkillTool.","1. ✅ Multiple SkillsAgentHook instances are all chained (no early break)
2. ✅ ToolCallbackResolver is resolved once per build (no duplicate side effects)
3. ✅ read_skill tool name uses ReadSkillTool.READ_SKILL single source of truth",Code review: resolver chaining behavior and single-resolution flow clarity,待评审,"bug,fix,issue-4184,agent-framework,refactor",spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/DefaultBuilder.java;spring-ai-alibaba-agent-framework/src/main/java/com/alibaba/cloud/ai/graph/agent/hook/skills/SkillToolCallbackResolver.java;docs/feature/feature-15-defaultbuilder-resolver-pr-fixes.md;docs/_history.md;docs/feature.csv
