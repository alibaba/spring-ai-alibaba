# Spring AI Alibaba Admin

> Spring AI Alibaba Repo: https://github.com/alibaba/spring-ai-alibaba
>
> Spring AI Alibaba Website: https://java2ai.com
>
> Spring AI Alibaba Website Repo: https://github.com/springaialibaba/spring-ai-alibaba-website

[English](./README.md) | ä¸­æ–‡



## é¡¹ç›®èƒŒæ™¯

Spring AI Alibaba Admin æ˜¯ä¸€ä¸ªåŸºäº Spring AI Alibaba çš„ AI Agent å¼€å‘ä¸è¯„ä¼°å¹³å°ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…å’Œä¼ä¸šæä¾›å®Œæ•´çš„ AI Agent ç”Ÿå‘½å‘¨æœŸç®¡ç†è§£å†³æ–¹æ¡ˆã€‚å¹³å°æ”¯æŒä» Prompt å·¥ç¨‹ã€æ•°æ®é›†ç®¡ç†ã€è¯„ä¼°å™¨é…ç½®åˆ°å®éªŒæ‰§è¡Œå’Œç»“æœåˆ†æçš„å®Œæ•´å·¥ä½œæµï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ„å»ºã€æµ‹è¯•å’Œä¼˜åŒ– AI Agent åº”ç”¨ã€‚


## æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– Prompt ç®¡ç†
- **Prompt æ¨¡æ¿ç®¡ç†**: åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ Prompt æ¨¡æ¿
- **ç‰ˆæœ¬æ§åˆ¶**: æ”¯æŒ Prompt ç‰ˆæœ¬ç®¡ç†å’Œå†å²è¿½è¸ª
- **å®æ—¶è°ƒè¯•**: æä¾› Prompt åœ¨çº¿è°ƒè¯•å’Œæµå¼å“åº”
- **ä¼šè¯ç®¡ç†**: æ”¯æŒå¤šè½®å¯¹è¯ä¼šè¯ç®¡ç†

### ğŸ“Š æ•°æ®é›†ç®¡ç†
- **æ•°æ®é›†åˆ›å»º**: æ”¯æŒå¤šç§æ ¼å¼çš„æ•°æ®é›†å¯¼å…¥å’Œåˆ›å»º
- **ç‰ˆæœ¬ç®¡ç†**: æ•°æ®é›†ç‰ˆæœ¬æ§åˆ¶å’Œå†å²ç®¡ç†
- **æ•°æ®é¡¹ç®¡ç†**: ç»†ç²’åº¦çš„æ•°æ®é¡¹å¢åˆ æ”¹æŸ¥
- **ä»é“¾è·¯è¿½è¸ªåˆ›å»º**: æ”¯æŒä» OpenTelemetry é“¾è·¯æ•°æ®åˆ›å»ºæ•°æ®é›†

### âš–ï¸ è¯„ä¼°å™¨ç®¡ç†
- **è¯„ä¼°å™¨é…ç½®**: æ”¯æŒå¤šç§è¯„ä¼°å™¨çš„åˆ›å»ºå’Œé…ç½®
- **æ¨¡æ¿ç³»ç»Ÿ**: æä¾›è¯„ä¼°å™¨æ¨¡æ¿å’Œè‡ªå®šä¹‰è¯„ä¼°é€»è¾‘
- **è°ƒè¯•åŠŸèƒ½**: æ”¯æŒè¯„ä¼°å™¨åœ¨çº¿è°ƒè¯•å’Œæµ‹è¯•
- **ç‰ˆæœ¬ç®¡ç†**: è¯„ä¼°å™¨ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒç®¡ç†

### ğŸ§ª å®éªŒç®¡ç†
- **å®éªŒæ‰§è¡Œ**: è‡ªåŠ¨åŒ–æ‰§è¡Œè¯„ä¼°å®éªŒ
- **ç»“æœåˆ†æ**: è¯¦ç»†çš„å®éªŒç»“æœåˆ†æå’Œç»Ÿè®¡
- **å®éªŒæ§åˆ¶**: æ”¯æŒå®éªŒçš„å¯åŠ¨ã€åœæ­¢ã€é‡å¯å’Œåˆ é™¤
- **æ‰¹é‡å¤„ç†**: æ”¯æŒæ‰¹é‡å®éªŒæ‰§è¡Œå’Œç»“æœå¯¹æ¯”

### ğŸ“ˆ å¯è§‚æµ‹æ€§
- **é“¾è·¯è¿½è¸ª**: é›†æˆ OpenTelemetry æä¾›å®Œæ•´çš„é“¾è·¯è¿½è¸ª
- **æœåŠ¡ç›‘æ§**: æ”¯æŒæœåŠ¡åˆ—è¡¨å’Œæ¦‚è§ˆç»Ÿè®¡
- **Trace åˆ†æ**: æä¾›è¯¦ç»†çš„ Trace è¯¦æƒ…å’Œ Span åˆ†æ

### ğŸ”§ æ¨¡å‹é…ç½®
- **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒ OpenAIã€DashScopeã€DeepSeek ä¸»æµ AI æ¨¡å‹
- **é…ç½®ç®¡ç†**: æ¨¡å‹å‚æ•°çš„ç»Ÿä¸€é…ç½®å’Œç®¡ç†
- **åŠ¨æ€åˆ‡æ¢**: æ”¯æŒè¿è¡Œæ—¶æ¨¡å‹é…ç½®çš„åŠ¨æ€æ›´æ–°

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„

![æ•´ä½“æ¶æ„](./docs/imgs/arch.png)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- ğŸ³ **Docker** (ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²) + **Docker Compose**: 2.0+
- â˜• **Java 17+** (ç”¨äºæºç è¿è¡Œ) + **Maven**: 3.8+
- ğŸŒ **AI æ¨¡å‹æä¾›å•† API å¯†é’¥**ï¼Œæ”¯æŒOpenAIã€DashScopeã€DeepSeek



### ä»æºç è¿è¡Œ

#### 1. å…‹éš†é¡¹ç›® 

```bash
git clone https://github.com/spring-ai-alibaba/spring-ai-alibaba-admin.git
cd spring-ai-alibaba-admin
```

#### 2. é…ç½®æ‚¨çš„ API å¯†é’¥
æ ¹æ®æ‚¨çš„æ¨¡å‹ä¾›åº”å•†ï¼Œä¿®æ”¹ `spring-ai-alibaba-admin-server-start/model-config.yaml` çš„æ¨¡å‹é…ç½®ã€‚
- å¦‚æœæ‚¨ä½¿ç”¨DashScopeï¼Œè¯·å‚ç…§model-config-dashscope.yamlæ¨¡ç‰ˆè¿›è¡Œé…ç½®
- å¦‚æœæ‚¨ä½¿ç”¨DeepSeekï¼Œè¯·å‚ç…§model-config-deepseek.yamlæ¨¡ç‰ˆè¿›è¡Œé…ç½®
- å¦‚æœæ‚¨ä½¿ç”¨OpenAIï¼Œè¯·å‚ç…§model-config-openai.yamlæ¨¡ç‰ˆè¿›è¡Œé…ç½®
> ğŸ’¡ **è·å–æ‚¨çš„ DashScope API å¯†é’¥**: è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°](https://bailian.console.aliyun.com/?tab=model#/api-key) è·å–å…è´¹ API å¯†é’¥ã€‚

#### 3. nacosé…ç½®ï¼ˆå¯é€‰ï¼‰
å¦‚æœæ‚¨éœ€è¦ä¿®æ”¹nacosåœ°å€ï¼Œè¯·æ›´æ–°spring-ai-alibaba-admin-server-start/src/main/resources/application.ymlæ–‡ä»¶ä¸­çš„é…ç½®
```yaml
nacos:
  server-addr: ${nacosåœ°å€}
```

### 4. å¯åŠ¨SAA Admin
åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¯åŠ¨è„šæœ¬ã€‚è¯¥è„šæœ¬ä¼šå¸®åŠ©æ‚¨å¯åŠ¨å¥½æ•°æ®åº“ç›¸å…³çš„æœåŠ¡

```bash
sh start.sh
```
spring-ai-alibaba-admin-server-start ç›®å½•ä¸‹å¯åŠ¨åº”ç”¨ç¨‹åº
```bash
mvn spring-boot:run
```
### 5. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8080/admin å³å¯ä½¿ç”¨ SAA Admin å¹³å°ã€‚

è‡³æ­¤ï¼Œæ‚¨å·²ç»å¯ä»¥åœ¨å¹³å°ä¸­å¯¹promptè¿›è¡Œç®¡ç†ã€è°ƒè¯•ã€è¯„ä¼°ã€å¯è§‚æµ‹ã€‚å¦‚æœæ‚¨æœŸæœ›Spring AI Alibaba Agentåº”ç”¨èƒ½å¤Ÿé›†æˆNacosä»¥å®ç°promptåŠ è½½ä»¥åŠåŠ¨æ€æ›´æ–°ï¼Œå¹¶ä¸”è§‚æµ‹çº¿ä¸Šçš„è¿è¡Œæƒ…å†µï¼Œå¯ä»¥å‚ç…§ç¬¬å…­æ­¥é…ç½®æ‚¨çš„ AI Agent åº”ç”¨ã€‚

### 6. è¿æ¥æ‚¨çš„ AI Agent åº”ç”¨
åœ¨æ‚¨çš„ Spring AI Alibaba Agentåº”ç”¨ä¸­ï¼Œå¼•å…¥å¦‚ä¸‹ä¾èµ–
```xml
<dependencies>
    <!-- å¼•å…¥spring ai alibaba agent nacosä»£ç†æ¨¡å— -->
    <dependency>
        <groupId>com.alibaba.cloud.ai</groupId>
        <artifactId>spring-ai-alibaba-agent-nacos</artifactId>
        <version>{spring.ai.alibaba.version}</version>
    </dependency>

    <!-- å¼•å…¥å¯è§‚æµ‹æ¨¡å— -->

    <dependency>
        <groupId>com.alibaba.cloud.ai</groupId>
        <artifactId>spring-ai-alibaba-autoconfigure-arms-observation</artifactId>
        <version>{spring.ai.alibaba.version}</version>
    </dependency>
    
    
    <!-- ç”¨äºå®ç°å„ç§ OTel ç›¸å…³ç»„ä»¶ï¼Œå¦‚ Tracerã€Exporter çš„è‡ªåŠ¨è£…è½½ -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-actuator</artifactId>
    </dependency>
    
    <!-- ç”¨äºå°† micrometer äº§ç”Ÿçš„æŒ‡æ ‡æ•°æ®å¯¹æ¥åˆ° otlp æ ¼å¼ -->
    <dependency>
        <groupId>io.micrometer</groupId>
        <artifactId>micrometer-registry-otlp</artifactId>
    </dependency>
    
    <!-- ç”¨äºå°† micrometer åº•å±‚çš„é“¾è·¯è¿½è¸ª tracer æ›¿æ¢ä¸º OTel tracer -->
    <dependency>
        <groupId>io.micrometer</groupId>
        <artifactId>micrometer-tracing-bridge-otel</artifactId>
    </dependency>
    
    <!-- ç”¨äºå°† OTel tracer äº§ç”Ÿçš„ span æŒ‰ç…§ otlp åè®®è¿›è¡Œä¸ŠæŠ¥ -->
    <dependency>
        <groupId>io.opentelemetry</groupId>
        <artifactId>opentelemetry-exporter-otlp</artifactId>
    </dependency>

    <dependency>
        <groupId>org.springframework.ai</groupId>
        <artifactId>spring-ai-autoconfigure-model-tool</artifactId>
        <version>1.0.0</version>
    </dependency>
</dependencies>
``` 

æŒ‡å®šnacosåœ°å€åŠprompKey
```yaml
    spring.ai.alibaba.agent.proxy.nacos.serverAddr={ æ›¿æ¢ nacos address, ç¤ºä¾‹ï¼š127.0.0.1:8848}
    spring.ai.alibaba.agent.proxy.nacos.username={ æ›¿æ¢ nacos ç”¨æˆ·å, ç¤ºä¾‹ï¼šnacos}
    spring.ai.alibaba.agent.proxy.nacos.password={ æ›¿æ¢ nacos å¯†ç , ç¤ºä¾‹ï¼šnacos}
    spring.ai.alibaba.agent.proxy.nacos.promptKey={ æ›¿æ¢ä¸ºpromptKeyï¼Œç¤ºä¾‹ï¼šmse-nacos-helper } 
```

è®¾ç½®å¯è§‚æµ‹å‚æ•°

```yaml
    management.otlp.tracing.export.enabled=true
    management.tracing.sampling.probability=1.0
    management.otlp.tracing.endpoint=http://{admin address}:4318/v1/traces
    management.otlp.metrics.export.enabled=false
    management.otlp.logging.export.enabled=false
    management.opentelemetry.resource-attributes.service.name=agent-nacos-prompt-test
    management.opentelemetry.resource-attributes.service.version=1.0
    spring.ai.chat.client.observations.log-prompt=true
    spring.ai.chat.observations.log-prompt=true
    spring.ai.chat.observations.log-completion=true
    spring.ai.image.observations.log-prompt=true
    spring.ai.vectorstore.observations.log-query-response=true
    spring.ai.alibaba.arms.enabled=true
    spring.ai.alibaba.arms.tool.enabled=true
    spring.ai.alibaba.arms.model.capture-input=true
    spring.ai.alibaba.arms.model.capture-output=true
```

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº Apache License 2.0 è®¸å¯è¯å¼€æºã€‚

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥å¸®åŠ©æ”¹è¿›é¡¹ç›®ã€‚

 
 