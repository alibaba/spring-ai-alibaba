<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¡åˆ’æ¨¡æ¿ - JTaskPilot</title>
    <!-- å¼•å…¥æ¨¡å—åŒ–CSSæ–‡ä»¶ -->
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/content.css">
    <link rel="stylesheet" href="../css/chat.css">
    <link rel="stylesheet" href="../css/input.css">
    <link rel="stylesheet" href="../css/right-sidebar.css">
    <link rel="stylesheet" href="css/plan-template.css">
    <style>
        /* Simple icons for demo */
        .icon-placeholder::before { content: "â–¡"; display: inline-block; margin-right: 5px; }
        .icon-collapse-left::before { content: "â—€"; }
        .icon-expand-left::before { content: "â–¶"; }
        .icon-collapse-right::before { content: "â–¶"; }
        .icon-expand-right::before { content: "â—€"; }
        .icon-terminal::before { content: ">_"; }
        .icon-play::before { content: "â–º"; }
        .icon-realtime::before { content: "â—"; color: #1a73e8; }
        .icon-menu::before { content: "â‹®"; }
        .icon-share::before { content: "â†‘"; }
        .icon-star-outline::before { content: "â˜†"; }
        .icon-star-filled::before { content: "â˜…"; }
        .icon-lightbulb::before { content: "ğŸ’¡"; }
        .icon-attach::before { content: "ğŸ“"; }
        .icon-send::before { content: "â†‘"; }
        .icon-add::before { content: "+"; }
        .icon-folder::before { content:"ğŸ“"; }
        .icon-pages::before { content:"ğŸ“„";}
        .icon-down-arrow::before { content: "â–¼"; }
        .icon-up-arrow::before { content: "â–²"; }
        .icon-edit::before { content: "âœ"; }
        .icon-run::before { content: "â–¶"; }
        .icon-save::before { content: "ğŸ’¾"; }
        .icon-back::before { content: "â¬…"; }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- å·¦ä¾§è¾¹æ  - å·²ç®€åŒ– -->
        <aside class="sidebar left-sidebar" id="leftSidebar">
            <div class="sidebar-top-icons">
                <div class="icon">[M]</div>
                <div class="icon">[G]</div>
            </div>
            <button class="new-task-btn">
                <span class="icon-add"></span> æ–°å»ºè®¡åˆ’ <span class="shortcut">âŒ˜ K</span>
            </button>
            <ul class="task-list">
                <li class="task-item">
                    <div class="task-icon">[ğŸ“Š]</div>
                    <div class="task-details">
                        <div class="task-title">æ·±åº¦åˆ†æMCPæ ¸å¿ƒæŠ€æœ¯åŸç†</div>
                        <div class="task-preview">æˆ‘å·²ç»æˆåŠŸå°†MCPæ ¸å¿ƒæŠ€æœ¯åŸç†åˆ†ææŠ¥...</div>
                    </div>
                    <div class="task-time">6å°æ—¶å‰</div>
                </li>
                <li class="task-item selected">
                    <div class="task-icon">[ğŸ›¡ï¸]</div>
                    <div class="task-details">
                        <div class="task-title">manusæ ¸å¿ƒæŠ€æœ¯è®²è§£ä¸å¼€æº...</div>
                        <div class="task-preview">æˆ‘å·²ç»æˆåŠŸå°†Manus AIæŒ‡å—ç½‘ç«™éƒ¨ç½²åˆ°...</div>
                    </div>
                    <div class="task-time">2å¤©å‰</div>
                </li>
            </ul>
            <div class="sidebar-bottom">
                <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
            </div>
        </aside>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content-wrapper" id="mainContent">
            <header class="content-header">
                <div class="header-controls-left">
                    <button id="toggleLeftSidebarBtn" class="action-btn toggle-btn" title="åˆ‡æ¢å·¦ä¾§è¾¹æ ">
                        <span class="icon-collapse-left"></span>
                    </button>
                    <div class="header-title-section">
                        <h1>è®¡åˆ’æ¨¡æ¿</h1>
                        <div class="knowledge-suggestion">
                            <span class="icon-lightbulb"></span> è‡ªåŠ¨ç”Ÿæˆå’Œä¿®æ”¹æ‰§è¡Œè®¡åˆ’
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="backToMainBtn" class="action-btn" onclick="window.location.href='index.html'">
                        <span class="icon-back"></span> è¿”å›ä¸»é¡µ
                    </button>
                    <button id="toggleRightSidebarBtn" class="action-btn toggle-btn" title="åˆ‡æ¢å³ä¾§è¾¹æ ">
                        <span class="icon-collapse-right"></span>
                    </button>
                </div>
            </header>

            <div class="plan-container">
                <div class="plan-input-section">
                    <div class="section-header">
                        <h2>è®¡åˆ’éœ€æ±‚è¾“å…¥</h2>
                        <div class="section-actions">
                            <button class="action-btn" id="clearBtn">
                                <span class="icon-placeholder"></span> æ¸…ç©º
                            </button>
                        </div>
                    </div>
                    <div class="input-field">
                        <label for="plan-prompt">ä»»åŠ¡æè¿°ï¼š</label>
                        <textarea id="plan-prompt" placeholder="è¯·è¾“å…¥æ‚¨çš„ä»»åŠ¡éœ€æ±‚ï¼Œç³»ç»Ÿå°†åŸºäºæ­¤ç”Ÿæˆæ‰§è¡Œè®¡åˆ’..."></textarea>
                    </div>
                    <div class="submit-area">
                        <button class="submit-btn" id="generatePlanBtn">
                            <span class="icon-placeholder"></span> ç”Ÿæˆè®¡åˆ’
                        </button>
                    </div>
                </div>

                <div class="plan-result-section">
                    <div class="section-header">
                        <h2>è®¡åˆ’æ–‡æœ¬é¢„è§ˆ</h2>
                        <div class="section-actions">
                            <button class="action-btn" id="editModeBtn">
                                <span class="icon-edit"></span> ç¼–è¾‘æ¨¡å¼
                            </button>
                            <button class="action-btn" id="saveBtn">
                                <span class="icon-save"></span> ä¿å­˜
                            </button>
                        </div>
                    </div>
                    <div class="plan-text-preview">
                        <div id="plan-text-display" class="preview-content">
                            <p class="placeholder-text">è®¡åˆ’æ–‡æœ¬å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</p>
                        </div>
                        <textarea id="plan-text-editor" class="hidden"></textarea>
                    </div>
                </div>

                <div class="plan-json-section">
                    <div class="section-header">
                        <h2>è®¡åˆ’æ•°æ® (JSON)</h2>
                        <div class="section-actions">
                            <button class="action-btn" id="jsonEditModeBtn">
                                <span class="icon-edit"></span> ç¼–è¾‘JSON
                            </button>
                            <button class="action-btn" id="validateJsonBtn">
                                <span class="icon-placeholder"></span> éªŒè¯
                            </button>
                        </div>
                    </div>
                    <div class="plan-json-preview">
                        <div id="plan-json-display" class="preview-content code-view">
                            <p class="placeholder-text">è®¡åˆ’çš„JSONæ•°æ®å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</p>
                        </div>
                        <textarea id="plan-json-editor" class="hidden"></textarea>
                    </div>
                </div>

                <div class="plan-actions">
                    <button class="secondary-btn" id="modifyPlanBtn">
                        <span class="icon-edit"></span> é‡æ–°ç”Ÿæˆ
                    </button>
                    <button class="primary-btn" id="runPlanBtn">
                        <span class="icon-run"></span> æ‰§è¡Œè®¡åˆ’
                    </button>
                </div>
            </div>
        </main>

        <!-- å³ä¾§è¾¹æ  -->
        <aside class="sidebar right-sidebar" id="rightSidebar">
            <div class="right-sidebar-header">
                <h3>è®¡åˆ’å†å²</h3>
            </div>
            <div class="right-sidebar-content">
                <div class="plan-history-list">
                    <div class="plan-history-item">
                        <div class="history-item-header">
                            <span class="history-date">2025-04-10 15:32</span>
                            <span class="history-status completed">å·²å®Œæˆ</span>
                        </div>
                        <div class="history-title">åˆ†æé¡¹ç›®ç»“æ„å¹¶åˆ›å»ºæ–‡æ¡£</div>
                        <div class="history-steps">5ä¸ªæ­¥éª¤</div>
                    </div>
                    <div class="plan-history-item">
                        <div class="history-item-header">
                            <span class="history-date">2025-04-09 11:20</span>
                            <span class="history-status failed">å¤±è´¥</span>
                        </div>
                        <div class="history-title">éƒ¨ç½²Spring AIåº”ç”¨åˆ°é˜¿é‡Œäº‘</div>
                        <div class="history-steps">8ä¸ªæ­¥éª¤</div>
                    </div>
                    <div class="plan-history-item">
                        <div class="history-item-header">
                            <span class="history-date">2025-04-08 09:45</span>
                            <span class="history-status completed">å·²å®Œæˆ</span>
                        </div>
                        <div class="history-title">ç”Ÿæˆå•å…ƒæµ‹è¯•ç”¨ä¾‹</div>
                        <div class="history-steps">3ä¸ªæ­¥éª¤</div>
                    </div>
                </div>
            </div>
            <div class="right-sidebar-footer">
                <span>è®¡åˆ’æ¨¡æ¿ v1.0.0</span>
            </div>
        </aside>
    </div>

    <!-- æ‰§è¡Œç¡®è®¤å¯¹è¯æ¡† -->
    <div class="dialog-overlay" id="executionDialog">
        <div class="dialog-container">
            <div class="dialog-header">
                <h3>è®¡åˆ’æ‰§è¡Œç¡®è®¤</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="dialog-content">
                <p>æ‚¨ç¡®å®šè¦æ‰§è¡Œæ­¤è®¡åˆ’å—ï¼Ÿæ‰§è¡Œåå°†ä¼šå®é™…è¿è¡Œè®¡åˆ’ä¸­å®šä¹‰çš„æ‰€æœ‰æ­¥éª¤ã€‚</p>
                <div class="dialog-plan-summary">
                    <h4>è®¡åˆ’æ‘˜è¦ï¼š</h4>
                    <div id="plan-summary"></div>
                    <div class="plan-step-count"><span id="step-count">0</span> ä¸ªæ­¥éª¤å°†è¢«æ‰§è¡Œ</div>
                </div>
            </div>
            <div class="dialog-footer">
                <button class="secondary-btn" id="cancelExecutionBtn">å–æ¶ˆ</button>
                <button class="primary-btn" id="confirmExecutionBtn">ç¡®è®¤æ‰§è¡Œ</button>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥æ¨¡å—åŒ–JavaScriptæ–‡ä»¶ -->
    <script src="../js/api.js"></script>
    <script src="js/plan-template.js"></script>
</body>
</html>
